<!DOCTYPE html>
<html lang='en'>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Add to list plus | Drafts Directory</title>
    <meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="el7l+BtAoq1Yo5kk3ue2V8O3uK8swhE3ljIKXM3OLx8JQcNyfysFSNfzInSKpO1JZBRmVNISW5G7Q1gl5Dax7Q==" />
    <meta http-equiv="content-type" content="text/html;charset=utf-8">
    <meta http-equiv="content-language" content="en">
    <meta http-equiv="content-language" content="en-us">
    
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <meta property="og:title" content="Drafts Directory: Add to list plus" />
    <meta property="og:url" content="https://actions.getdrafts.com/a/1Gd" />
    <meta property="og:type" content="website" />
    <meta property="og:description" content="Example actions and other extensions for Drafts, the quick-capture notes app." />
    <meta property="og:image" content="https://actions.getdrafts.com/assets/drafts-ogimage-action-d9c60102fd45e0cb516e1b49ed50a81e3c3a2b90f81f55df8f43d0feb0512978.png" />
    <meta property="twitter:title" content="Drafts Directory: Add to list plus" />
    <meta property="twitter:url" content="https://actions.getdrafts.com/a/1Gd" />
    <meta property="twitter:type" content="website" />
    <meta property="twitter:description" content="Example actions and other extensions for Drafts, the quick-capture notes app." />
    <meta property="twitter:image" content="https://actions.getdrafts.com/assets/drafts-ogimage-action-d9c60102fd45e0cb516e1b49ed50a81e3c3a2b90f81f55df8f43d0feb0512978.png" />

    <link rel="shortcut icon" type="image/x-icon" href="../assets/favicon-114dbb66b0ef0399a14fa5dfcad7e6210bb558c30cea665e04d49b59fec87f70.png" />

    <link rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/styles/default.min.css">
    <link rel="stylesheet" media="all" href="../assets/application-6e4f014b4c48cd673942dbfbbeb3e571a732b05562ddde5904f3a5c3833e54ff.css" />
    <script src="../assets/application-13492939cb10be5be76b5abb3e9ae0bef0bbae3202cec2b85cf6fca5bc8429c8.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/highlight.min.js"></script>
    <script>hljs.highlightAll();</script>
    <script async defer data-domain="directory.getdrafts.com" src="https://plausible.io/js/plausible.js"></script>
  </head>

<body data-no-turbolink>

    <div class="page-wrap">
        <div class="side-bar">
            <a href="../index.html" class="site-title fs-6 lh-tight" title="{{ site.title }}">
                <img src="../assets/drafts-directory-header-4d826bd007f515c8e5a10f654e56ad76fbb3bd3103a67ce342283f701f1677fe.svg" alt="Drafts Directory" style="max-height: 30px;" />
            </a>
            <span class="fs-3"><button class="js-main-nav-trigger navigation-list-toggle btn btn-outline" type="button"
                    data-text-toggle="Hide">Menu</button></span>
            <div class="navigation main-nav js-main-nav">
              <ul class="navigation-list">
                <li class="navigation-list-item">
                  <a class="navigation-list-link" href="../index.html">Home</a>
                </li>
                <li class="navigation-list-item">
                  <a class="navigation-list-link" href="../drafts_actions.html">Actions</a>
                </li>
                <li class="navigation-list-item">
                  <a class="navigation-list-link" href="../drafts_action_groups.html">Action Groups</a>
                </li>
                <li class="navigation-list-item">
                  <a class="navigation-list-link" href="../syntax_definitions.html">Syntaxes</a>
                </li>
                <li class="navigation-list-item">
                  <a class="navigation-list-link" href="../theme_definitions.html">Themes</a>
                </li>
                <li class="navigation-list-item">
                  <a class="navigation-list-link" href="../workspaces.html">Workspaces</a>
                </li>
                <li class="navigation-list-item">
                  <hr style="margin:1em; padding: 0;" />
                </li>
                <li class="navigation-list-item">
                  <a class="navigation-list-link" href="../search.html">Search</a>
                </li>
                <li class="navigation-list-item">
                  <hr style="margin:1em; padding: 0;" />
                </li>
                <li class="navigation-list-item">
                    <a class="navigation-list-link nav-external" title="About Drafts" href="../../getdrafts.com/index.html">Get Drafts &#x2192;</a>
                </li>
                <li class="navigation-list-item">
                    <a class="navigation-list-link nav-external" title="Detailed documentation" href="../../docs.getdrafts.com/index.html">User Guide &#x2192;</a>
                </li>
                <li class="navigation-list-item">
                    <a class="navigation-list-link nav-external" title="Get your questions answered in the forums" href="https://forums.getdrafts.com/">Community &#x2192;</a>
                </li>
                <li class="navigation-list-item">
                    <a class="navigation-list-link nav-external" title="Online tools and generators" href="../../tools.getdrafts.com/index.html">Tools &#x2192;</a>
                </li>
                <li class="navigation-list-item">
                    <a class="navigation-list-link nav-external" title="Scripting library reference" href="../../scripting.getdrafts.com/index.html">Script Reference &#x2192;</a>
                </li>
              </ul>
            </div>
            <footer role="contentinfo" class="site-footer">
                <p class="text-small text-grey-dk-000 mb-0">
                    Download: <a href="https://itunes.apple.com/app/id1236254471?ls=1&mt=8&at=11l4Cf&ct=site">iOS</a> | <a href="https://itunes.apple.com/app/id1435957248?mt=12&at=11l4Cf&ct=site">Mac</a>
                </p>
            </footer>
        </div>
        <div class="main-content-wrap js-main-content" tabindex="0">
            <div class="page-header">
                <div class="main-content">
                    <div class="search js-search">
	<div class="search-input-wrap">
<form class="search-form" action="../search.html" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
	<button style='border:none;background-color:transparent;'>
	<svg width="14" height="14" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg"
		class="search-icon">
		<title>Search</title>
		<g fill-rule="nonzero">
			<path
				d="M17.332 20.735c-5.537 0-10-4.6-10-10.247 0-5.646 4.463-10.247 10-10.247 5.536 0 10 4.601 10 10.247s-4.464 10.247-10 10.247zm0-4c3.3 0 6-2.783 6-6.247 0-3.463-2.7-6.247-6-6.247s-6 2.784-6 6.247c0 3.464 2.7 6.247 6 6.247z" />
			<path d="M11.672 13.791L.192 25.271 3.02 28.1 14.5 16.62z" />
		</g>
	</svg>
	</button>
	<input type="text" name="q" id="q" class="js-search-input search-input search" size="12" tabindex="0" placeholder="Search" />
</form>	</div>
</div>
                    <ul class="list-style-none text-small mt-md-1 mb-md-1 pb-4 pb-md-0 js-aux-nav aux-nav">
                        <li class="d-inline-block my-0 mr-2">
                          <a href="../../getdrafts.com/index.html">Get Drafts</a>
                        </li>
                        <li class="d-inline-block my-0">
                          <a href="https://forums.getdrafts.com">Community</a>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="main-content">
                <div id="main-content" class="page-content" role="main">
                  <div class="type">
                    <h4>Action</h4>
                  </div>
                  <div class="header">
                      <h1><img src="https://config.agiletortoise.com/drafts-icons/page-add.png" class="action-icon" />Add to list plus</h1>
                  </div>

                  <div class="content">
                    
<div class='caption'>
        Posted by dchar,
    Last update
    8 months ago
</div>

    <div class='update_notes'>
      <h3>UPDATES</h3>
      <div id="firstUpdateNote">
      <h4>8 months ago</h4>
      <h3>V2021.09.13</h3>

<ul>
<li><p>Allow level 1 (<code>#</code>) or level 2 (<code>##</code>) category headings for list drafts.</p></li>
<li><p>Add option to configure the markdown header level of newly created lists.</p></li>
<li><p>Add option to configure the workspace tabs to search for lists.</p></li>
</ul>

      </div>
    </div>

    <div class='description'>
        <p>Append to running lists in Drafts.</p>

<p>Action directory: <a href="1Gd.html">https://actions.getdrafts.com/a/1Gd</a></p>

<p><a href="../../forums.getdrafts.com/t/tip-append-to-running-lists-with-the-add-to-list-action/596.html">Discuss in Drafts Forum</a></p>

<p><a href="https://vimeo.com/266310783">See it in action</a></p>

<p>This action is used to append items to running lists in Drafts. Useful for things like capturing movies you want to watch or stuff to pick up at the grocery store.</p>

<p>Based on an <a href="1Ga.html">example action</a> by @agiletortoise. </p>

<h2>Usage</h2>

<p>As a example, create a new list of movies to watch.</p>

<ul>
<li>Create a new draft and enter <code>Godfather</code></li>
<li>Tap the <code>Add to list</code> action</li>
<li>Press the button <code>Create a new list</code></li>
<li>Enter <code>Movies</code> in the text field and press <code>Ok</code></li>
</ul>

<p>This creates a new draft with a title <code>## Movies</code> and a tag <code>lists</code>:</p>

<pre><code>## Movies

- [ ] Godfather
</code></pre>

<p>Add another movie.</p>

<ul>
<li>Create a new draft and enter <code>Jaws</code></li>
<li>Tap the <code>Add to list</code> action</li>
<li>Press the button <code>Movies</code></li>
</ul>

<p>This updates the movie list draft:</p>

<pre><code>## Movies

- [ ] Godfather
- [ ] Jaws
</code></pre>

<p>These lists can be found by filtering the draft list by the tag <code>lists</code>. Create a Workspace for &ldquo;Lists&rdquo; with a tag filter for easy access.</p>

<h2>Customizations</h2>

<p>Several customizations are available in the first script action.</p>

<p>Change the variable <code>appendItem</code> to switch between append and prepend modes:</p>

<pre><code>// true to append
// false to prepend
const appendItem = true;
</code></pre>

<p>Change the variable <code>viewListAfterSuccess</code> to load the list into the editor after the new list item has been successfully added.</p>

<h2>Version History</h2>

<h3>V2021.09.13</h3>

<ul>
<li><p>Allow level 1 (<code>#</code>) or level 2 (<code>##</code>) category headings for list drafts.</p></li>
<li><p>Add option to configure the markdown header level of newly created lists.</p></li>
<li><p>Add option to configure the workspace tabs to search for lists.</p></li>
</ul>

<h3>Original</h3>

<ul>
<li><p>Add option to view list after success.</p></li>
<li><p>Look for lists in inbox, flagged, archive.</p></li>
<li><p>Add option to append or prepend items to a list.</p></li>
<li><p>Collect list names from tagged drafts.</p></li>
<li><p>Create new lists inside the action.</p></li>
<li><p>Based on an <a href="1Ga.html">example action</a> by @agiletortoise. </p></li>
</ul>

    </div>

<div class="certification">
  
  <a class='trusted' href='1Gd.html#' title='From trusted community member'><img style="width:24px;height:24px;vertical-align:middle;" src="../assets/trusted-c3f95628f768e0a0ed09961d556a8012d1b1be6ae9e6adede683513eec0df814.svg" /> Trusted member</a>
</div>

<div style="margin: 2em 0;">
    <a class="btn btn-blue" href="drafts5://action?identifier=1Gd&amp;data=%7B%22uuid%22:%22FFFFF8E2-AFCB-41D0-ACE8-25FC3D1E28D2%22,%22steps%22:[%7B%22platforms%22:3,%22data%22:%7B%22script%22:%22//%20the%20tag%20used%20for%20list%20drafts%5Cnconst%20listTag%20=%20&#39;lists&#39;;%5Cn%5Cn//%20set%20this%20option%20to%20%60true%60%20to%20append%5Cn//%20or%20%60false%60%20to%20prepend%20a%20new%20item.%5Cnconst%20appendItem%20=%20true;%5Cn%5Cn//%20set%20this%20option%20to%20%60true%60%20to%20view%5Cn//%20the%20list%20after%20adding%20an%20item.%5Cnconst%20viewListAfterSuccess%20=%20false;%5Cn%5Cn//%20Set%20this%20option%20to%20configure%20the%20markdown%5Cn//%20header%20level%20of%20a%20newly%20created%20list.%5Cn//%5Cn//%20The%20default%20(&#39;%23%23&#39;)%20matches%20the%20original%5Cn//%20script%20from%20agiletortoise.%20Some%20may%20prefer%5Cn//%20a%20level%201%20markdown%20heading%20(&#39;%23&#39;)%20instead.%5Cnconst%20newListHeading%20=%20&#39;%23%23&#39;;%5Cn%5Cn//%20Set%20this%20option%20to%20configure%20the%20workspace%5Cn//%20tabs%20to%20look%20for%20active%20lists.%5Cn//%5Cn//%20Some%20may%20prefer%20just%20inbox%20and%20flagged.%5Cnconst%20listWorkspaceTabs%20=%20[%5C%22inbox%5C%22,%20%5C%22flagged%5C%22,%20%5C%22archive%5C%22];%5Cn%22,%22allowAsync%22:%22false%22%7D,%22type%22:%22script%22,%22isEnabled%22:true,%22uuid%22:%223BF84A16-C0AF-44E0-8000-9E63E7B1FABE%22%7D,%7B%22platforms%22:3,%22data%22:%7B%22script%22:%22//%20Add%20to%20list%20plus%5Cn//%20Based%20on%20an%20example%20script%20from%20@agiletortoise%5Cn//%5Cn//%20v2021.09.13%5Cn%5Cn(()%20=%5Cu003e%20%7B%5Cn%5Cn%5Ctconst%20getLists%20=%20()%20=%5Cu003e%20%7B%5Cn%5Ct%5Ctreturn%20listWorkspaceTabs%5Cn%5Ct%5Ct%5Ct.map(s%20=%5Cu003e%20Draft.query(%5C%22%5C%22,%20s,%20[listTag]))%5Cn%5Ct%5Ct%5Ct.filter(arr%20=%5Cu003e%20arr%20!==%20undefined)%5Cn%5Ct%5Ct%5Ct.reduce((acc,%20v)%20=%5Cu003e%20acc.concat(v),%20[])%5Cn%5Ct%5Ct%5Ct.reduce((o,%20d)%20=%5Cu003e%20%7B%5Cn%5Ct%5Ct%5Ct%5Ctconst%20m%20=%20d.content.match(/%23+%20([%5E%5C%5Cn]+)/);%5Cn%5Ct%5Ct%5Ct%5Ctif%20(m)%20%7B%20o[m[1].trim()]%20=%20d;%20%7D%5Cn%5Ct%5Ct%5Ct%5Ctreturn%20o;%5Cn%5Ct%5Ct%5Ct%7D,%20%7B%7D);%5Cn%5Ct%7D;%5Cn%5Cn%5Ctconst%20sortcase%20=%20(xs)%20=%5Cu003e%20%7B%5Cn%5Ct%5Ctreturn%20xs.sort((a,b)%20=%5Cu003e%20%7B%5Cn%5Ct%5Ct%5Ctreturn%20a.toLowerCase().localeCompare(b.toLowerCase());%5Cn%5Ct%5Ct%7D)%5Cn%5Ct%7D%5Cn%5Cn%5Ctconst%20split%20=%20(s,%20delim)%20=%5Cu003e%20%7B%5Cn%5Ct%5Ctconst%20i%20=%20s.indexOf(delim);%5Cn%5Ct%5Ctreturn%20[%5Cn%5Ct%5Ct%5Cts.substr(0,%20(i%5Cu003e=0)%20?%20i%20:%20s.length),%5Cn%5Ct%5Ct%5Ct(i%5Cu003e=0)%20?%20s.substr(i)%20:%20&#39;&#39;%5Cn%5Ct%5Ct]%5Cn%5Ct%7D;%5Cn%5Cn%5Ctconst%20append%20=%20(s,%20item)%20=%5Cu003e%20%7B%5Cn%5Ct%5Cts%20=%20s.replace(/%5C%5Cn$/,%20&#39;&#39;);%5Cn%5Ct%5Ctreturn%20[s,%20item].join(&#39;%5C%5Cn&#39;);%5Cn%5Ct%7D;%5Cn%5Cn%5Ctconst%20prepend%20=%20(s,%20item)%20=%5Cu003e%20%7B%5Cn%5Ct%5Ctconst%20xs%20=%20split(s,%20&#39;-%20[&#39;);%5Cn%5Ct%5Ctxs[0]%20=%20xs[0].replace(/%5C%5Cn$/,%20&#39;&#39;);%5Cn%5Ct%5Ctreturn%20[xs[0],%20item,%20xs[1]].join(&#39;%5C%5Cn&#39;);%5Cn%5Ct%7D;%5Cn%5Cn%5Ctconst%20main%20=%20()%20=%5Cu003e%20%7B%5Cn%5Cn%5Ct%5Ctif%20(draft.hasTag(listTag))%20%7B%5Cn%5Ct%5Ct%5Ctalert(&#39;Cannot%20run%20this%20action%20on%20a%20list%20draft.&#39;);%5Cn%5Ct%5Ct%5Ctcontext.fail();%5Cn%5Ct%5Ct%5Ctreturn;%5Cn%5Ct%5Ct%7D%5Cn%5Cn%5Ct%5Ct//%20prompt%20to%20select%20a%20list%5Cn%5Ct%5Ctlet%20p%20=%20Prompt.create();%5Cn%5Ct%5Ctp.title%20=%20&#39;Add%20item%20to%20list&#39;;%5Cn%5Cn%5Ct%5Ctconst%20lists%20=%20getLists();%5Cn%5Ct%5Ctsortcase(Object.keys(lists)).map(c%20=%5Cu003e%20p.addButton(c));%5Cn%5Cn%5Ct%5Ct//%20Give%20the%20user%20an%20option%20to%20create%20a%20new%20list%5Cn%5Ct%5Ctp.addButton(&#39;Create%20a%20new%20list&#39;);%5Cn%5Cn%5Ct%5Ctif%20(!p.show())%20%7B%5Cn%5Ct%5Ct%5Ctcontext.fail();%5Cn%5Ct%5Ct%5Ctreturn;%5Cn%5Ct%5Ct%7D%5Cn%5Cn%5Ct%5Ctlet%20d%20=%20lists[p.buttonPressed];%5Cn%5Ct%5Ctif%20(d%20===%20undefined)%20%7B%5Cn%5Ct%5Ct%5Ctp%20=%20Prompt.create();%5Cn%5Ct%5Ct%5Ctp.title%20=%20&#39;Create%20a%20new%20list&#39;;%5Cn%5Ct%5Ct%5Ctp.addTextField(&#39;listName&#39;,%20&#39;List%20name&#39;,%20&#39;&#39;);%5Cn%5Ct%5Ct%5Ctp.addButton(&#39;Ok&#39;);%5Cn%5Cn%5Ct%5Ct%5Ctif%20(!p.show())%20%7B%5Cn%5Ct%5Ct%5Ct%5Ctcontext.fail();%5Cn%5Ct%5Ct%5Ct%5Ctreturn;%5Cn%5Ct%5Ct%5Ct%7D%5Cn%5Cn%5Ct%5Ct%5Ctconst%20name%20=%20p.fieldValues[&#39;listName&#39;].trim();%5Cn%5Ct%5Ct%5Ctif%20(name.length%20==%200)%20%7B%5Cn%5Ct%5Ct%5Ct%5Ctalert(&#39;Invalid%20list%20name.&#39;);%5Cn%5Ct%5Ct%5Ct%5Ctcontext.fail();%5Cn%5Ct%5Ct%5Ct%5Ctreturn;%5Cn%5Ct%5Ct%5Ct%7D%5Cn%5Cn%5Ct%5Ct%5Ctd%20=%20Draft.create();%5Cn%5Ct%5Ct%5Ctd.content%20=%20newListHeading%20+%20%60%20$%7Bname%7D%20%5C%5Cn%5C%5Cn%60;%5Cn%5Ct%5Ct%5Ctd.addTag(listTag);%5Cn%5Ct%5Ct%7D%5Cn%5Cn%5Ct%5Ctconst%20item%20=%20&#39;-%20[%20]%20&#39;%20+%20draft.content.trim();%5Cn%5Ct%5Ctconst%20fn%20=%20appendItem%20?%20append%20:%20prepend;%5Cn%5Ct%5Ctd.content%20=%20fn(d.content,%20item);%5Cn%5Ct%5Ctd.update();%5Cn%5Cn%5Ct%5Ctif%20(viewListAfterSuccess)%20%7B%5Cn%5Ct%5Ct%5Cteditor.load(d);%5Cn%5Ct%5Ct%7D%5Cn%5Ct%7D;%5Cn%5Cn%5Ctmain();%5Cn%5Cn%7D)();%5Cn%22,%22allowAsync%22:%22false%22%7D,%22type%22:%22script%22,%22isEnabled%22:true,%22uuid%22:%2244035548-B4E1-4CF7-84A0-A2BFEADA66D0%22%7D],%22groupDisposition%22:2,%22shortName%22:%22Add%20to%20list%22,%22shouldConfirm%22:false,%22disposition%22:2,%22keyCommand%22:%7B%22optionKey%22:false,%22input%22:%22%22,%22controlKey%22:false,%22commandKey%22:false,%22type%22:%22action%22,%22discoverabilityTitle%22:%22Add%20to%20list%20plus%22,%22shiftKey%22:false%7D,%22logLevel%22:2,%22notificationType%22:2,%22tintColor%22:%22blue%22,%22actionDescription%22:%22Append%20to%20running%20lists%20in%20Drafts.%5Cn%5CnAction%20directory:%20https://actions.getdrafts.com/a/1Gd%5Cn%5Cn[Discuss%20in%20Drafts%20Forum](https://forums.getdrafts.com/t/tip-append-to-running-lists-with-the-add-to-list-action/596)%5Cn%5Cn[See%20it%20in%20action](https://vimeo.com/266310783)%5Cn%5CnThis%20action%20is%20used%20to%20append%20items%20to%20running%20lists%20in%20Drafts.%20Useful%20for%20things%20like%20capturing%20movies%20you%20want%20to%20watch%20or%20stuff%20to%20pick%20up%20at%20the%20grocery%20store.%5Cn%5CnBased%20on%20an%20[example%20action](http://actions.getdrafts.com/a/1Ga)%20by%20@agiletortoise.%20%5Cn%5Cn%23%23%20Usage%5Cn%5CnAs%20a%20example,%20create%20a%20new%20list%20of%20movies%20to%20watch.%5Cn%5Cn-%20Create%20a%20new%20draft%20and%20enter%20%60Godfather%60%5Cn-%20Tap%20the%20%60Add%20to%20list%60%20action%5Cn-%20Press%20the%20button%20%60Create%20a%20new%20list%60%5Cn-%20Enter%20%60Movies%60%20in%20the%20text%20field%20and%20press%20%60Ok%60%5Cn%5CnThis%20creates%20a%20new%20draft%20with%20a%20title%20%60%23%23%20Movies%60%20and%20a%20tag%20%60lists%60:%5Cn%5Cn%60%60%60%5Cn%23%23%20Movies%5Cn%5Cn-%20[%20]%20Godfather%5Cn%60%60%60%5Cn%5CnAdd%20another%20movie.%5Cn%5Cn-%20Create%20a%20new%20draft%20and%20enter%20%60Jaws%60%5Cn-%20Tap%20the%20%60Add%20to%20list%60%20action%5Cn-%20Press%20the%20button%20%60Movies%60%5Cn%5CnThis%20updates%20the%20movie%20list%20draft:%5Cn%5Cn%60%60%60%5Cn%23%23%20Movies%5Cn%5Cn-%20[%20]%20Godfather%5Cn-%20[%20]%20Jaws%5Cn%60%60%60%5Cn%5CnThese%20lists%20can%20be%20found%20by%20filtering%20the%20draft%20list%20by%20the%20tag%20%60lists%60.%20Create%20a%20Workspace%20for%20%5C%22Lists%5C%22%20with%20a%20tag%20filter%20for%20easy%20access.%5Cn%5Cn%5Cn%23%23%20Customizations%5Cn%5CnSeveral%20customizations%20are%20available%20in%20the%20first%20script%20action.%5Cn%5CnChange%20the%20variable%20%60appendItem%60%20to%20switch%20between%20append%20and%20prepend%20modes:%5Cn%5Cn%60%60%60%5Cn//%20true%20to%20append%5Cn//%20false%20to%20prepend%5Cnconst%20appendItem%20=%20true;%5Cn%60%60%60%5Cn%5CnChange%20the%20variable%20%60viewListAfterSuccess%60%20to%20load%20the%20list%20into%20the%20editor%20after%20the%20new%20list%20item%20has%20been%20successfully%20added.%5Cn%5Cn%23%23%20Version%20History%5Cn%5Cn-%20Add%20option%20to%20view%20list%20after%20success.%5Cn%5Cn-%20Look%20for%20lists%20in%20inbox,%20flagged,%20archive.%5Cn%5Cn-%20Add%20option%20to%20append%20or%20prepend%20items%20to%20a%20list.%5Cn%5Cn-%20Collect%20list%20names%20from%20tagged%20drafts.%5Cn%5Cn-%20Create%20new%20lists%20inside%20the%20action.%5Cn%5Cn-%20Based%20on%20an%20[example%20action](http://actions.getdrafts.com/a/1Ga)%20by%20@agiletortoise.%20%5Cn%5Cn%22,%22keyUseIcon%22:true,%22icon%22:%22page-add%22,%22visibility%22:480,%22groupUUID%22:%22248CFAA7-6F9A-4070-8FC8-331BE7367B41%22,%22assignTags%22:[],%22name%22:%22Add%20to%20list%20plus%22%7D">Install</a>
</div>

<div>
  <h4>Steps</h4>
<ul class='steps'>
  <li>
    <div class='step'><h3>script</h3><pre><code class='language-javascript'>// the tag used for list drafts
const listTag = &#39;lists&#39;;

// set this option to `true` to append
// or `false` to prepend a new item.
const appendItem = true;

// set this option to `true` to view
// the list after adding an item.
const viewListAfterSuccess = false;

// Set this option to configure the markdown
// header level of a newly created list.
//
// The default (&#39;##&#39;) matches the original
// script from agiletortoise. Some may prefer
// a level 1 markdown heading (&#39;#&#39;) instead.
const newListHeading = &#39;##&#39;;

// Set this option to configure the workspace
// tabs to look for active lists.
//
// Some may prefer just inbox and flagged.
const listWorkspaceTabs = [&quot;inbox&quot;, &quot;flagged&quot;, &quot;archive&quot;];
</code></pre></div>
  </li>
  <li>
    <div class='step'><h3>script</h3><pre><code class='language-javascript'>// Add to list plus
// Based on an example script from @agiletortoise
//
// v2021.09.13

(() =&gt; {

	const getLists = () =&gt; {
		return listWorkspaceTabs
			.map(s =&gt; Draft.query(&quot;&quot;, s, [listTag]))
			.filter(arr =&gt; arr !== undefined)
			.reduce((acc, v) =&gt; acc.concat(v), [])
			.reduce((o, d) =&gt; {
				const m = d.content.match(/#+ ([^\n]+)/);
				if (m) { o[m[1].trim()] = d; }
				return o;
			}, {});
	};

	const sortcase = (xs) =&gt; {
		return xs.sort((a,b) =&gt; {
			return a.toLowerCase().localeCompare(b.toLowerCase());
		})
	}

	const split = (s, delim) =&gt; {
		const i = s.indexOf(delim);
		return [
			s.substr(0, (i&gt;=0) ? i : s.length),
			(i&gt;=0) ? s.substr(i) : &#39;&#39;
		]
	};

	const append = (s, item) =&gt; {
		s = s.replace(/\n$/, &#39;&#39;);
		return [s, item].join(&#39;\n&#39;);
	};

	const prepend = (s, item) =&gt; {
		const xs = split(s, &#39;- [&#39;);
		xs[0] = xs[0].replace(/\n$/, &#39;&#39;);
		return [xs[0], item, xs[1]].join(&#39;\n&#39;);
	};

	const main = () =&gt; {

		if (draft.hasTag(listTag)) {
			alert(&#39;Cannot run this action on a list draft.&#39;);
			context.fail();
			return;
		}

		// prompt to select a list
		let p = Prompt.create();
		p.title = &#39;Add item to list&#39;;

		const lists = getLists();
		sortcase(Object.keys(lists)).map(c =&gt; p.addButton(c));

		// Give the user an option to create a new list
		p.addButton(&#39;Create a new list&#39;);

		if (!p.show()) {
			context.fail();
			return;
		}

		let d = lists[p.buttonPressed];
		if (d === undefined) {
			p = Prompt.create();
			p.title = &#39;Create a new list&#39;;
			p.addTextField(&#39;listName&#39;, &#39;List name&#39;, &#39;&#39;);
			p.addButton(&#39;Ok&#39;);

			if (!p.show()) {
				context.fail();
				return;
			}

			const name = p.fieldValues[&#39;listName&#39;].trim();
			if (name.length == 0) {
				alert(&#39;Invalid list name.&#39;);
				context.fail();
				return;
			}

			d = Draft.create();
			d.content = newListHeading + ` ${name} \n\n`;
			d.addTag(listTag);
		}

		const item = &#39;- [ ] &#39; + draft.content.trim();
		const fn = appendItem ? append : prepend;
		d.content = fn(d.content, item);
		d.update();

		if (viewListAfterSuccess) {
			editor.load(d);
		}
	};

	main();

})();
</code></pre></div>
  </li>
</ul>
</div>

<div>
  <h4>Options</h4>
  <ul class="steps">
    <li>
  <table class='action-detail'>
    <tr>
      <td class="cell-label">After Success</td>
      <td class="value">
        Trash
        
      </td>
    </tr>
    <tr>
      <td class="cell-label">Notification</td>
      <td class="value">Info</td>
    </tr>
    <tr>
      <td class="cell-label">Log Level</td>
      <td class="value">Info</td>
    </tr>
  </table>
</li>
</ul>
</div>

<div class="disclaimer">
  Items available in the Drafts Directory are uploaded by community members. Use appropriate caution reviewing downloaded items before use.
</div>


                  </div>
                  <div class="footer-content">
                  <p>
                  <a href="https://itunes.apple.com/app/id1236254471?ls=1&mt=8&at=11l4Cf&ct=site">
                    <img alt="Download on App Store" src="../assets/appstore-deaf597bd57239c5054c59099e54ab9014f1e15eddb961085428e0ce94d4385b.svg" />
                  </a>
                  <a href="https://itunes.apple.com/app/id1435957248?mt=12&at=11l4Cf&ct=site">
                    <img alt="Download on Mac App Store" src="../assets/macappstore-05f5eed00e6bb26b68c1368217276158329862682e6d61b3ed193f819fe02f2f.svg" />
                  </a>
                  </p>
                    &copy; 2012-2022 by Agile Tortoise, Inc.<br/>
                    Drafts is a registered Trademark of Agile Tortoise, Inc.<br/>
                    <a href="../../getdrafts.com/support/privacy.html">Privacy</a> | <a href="../../getdrafts.com/support/terms.html">Terms</a>
                </div>
                </div>
            </div>
        </div>
    </div>

  </body>
  </html>
