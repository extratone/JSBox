<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Newline in evernote callback urls - Actions - Help &amp; Questions - Drafts Community</title>
    <meta name="description" content="So I slowly become crazy‚Ä¶ 
I‚Äôm using the drafts x-callback url mechanics to create a note in evernote. 
Note: I don‚Äôt want to use the Evernote Action direclty, beause this takes way longer and is not possible when I‚Äôm of&amp;hellip;">
    <meta name="generator" content="Discourse 2.9.0.beta4 - https://github.com/discourse/discourse version f0d46c35493f4d01e4c1f9a3b32f867c1ade595e">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/1X/25837d707e58349c1c1881afc1883055a203ac28_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/7/77d737820f07fbb0e980560a8c341a18432a7d92_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="5463.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forums.getdrafts.com","potentialAction":{"@type":"SearchAction","target":"https://forums.getdrafts.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Drafts Community Search">

    <link href="https://forums.getdrafts.com/stylesheets/color_definitions_base__2_3d1df61a71325940d683ff0221fd14dee6a802e5.css?__ws=forums.getdrafts.com" media="all" rel="stylesheet" class="light-scheme"/><link href="https://forums.getdrafts.com/stylesheets/color_definitions_simple-dark_1_2_ce13c571d5f0d2fac2c7d8164bf57e59bd0aa89f.css?__ws=forums.getdrafts.com" media="(prefers-color-scheme: dark)" rel="stylesheet" class="dark-scheme"/>

  <link href="https://forums.getdrafts.com/stylesheets/desktop_efbc3607260bd3949bf9351692c294020d363176.css?__ws=forums.getdrafts.com" media="all" rel="stylesheet" data-target="desktop"  />


  <link href="https://forums.getdrafts.com/stylesheets/discourse-details_efbc3607260bd3949bf9351692c294020d363176.css?__ws=forums.getdrafts.com" media="all" rel="stylesheet" data-target="discourse-details"  />
  <link href="https://forums.getdrafts.com/stylesheets/discourse-local-dates_efbc3607260bd3949bf9351692c294020d363176.css?__ws=forums.getdrafts.com" media="all" rel="stylesheet" data-target="discourse-local-dates"  />
  <link href="https://forums.getdrafts.com/stylesheets/discourse-narrative-bot_efbc3607260bd3949bf9351692c294020d363176.css?__ws=forums.getdrafts.com" media="all" rel="stylesheet" data-target="discourse-narrative-bot"  />
  <link href="https://forums.getdrafts.com/stylesheets/discourse-presence_efbc3607260bd3949bf9351692c294020d363176.css?__ws=forums.getdrafts.com" media="all" rel="stylesheet" data-target="discourse-presence"  />
  <link href="https://forums.getdrafts.com/stylesheets/lazy-yt_efbc3607260bd3949bf9351692c294020d363176.css?__ws=forums.getdrafts.com" media="all" rel="stylesheet" data-target="lazy-yt"  />
  <link href="https://forums.getdrafts.com/stylesheets/poll_efbc3607260bd3949bf9351692c294020d363176.css?__ws=forums.getdrafts.com" media="all" rel="stylesheet" data-target="poll"  />
  <link href="https://forums.getdrafts.com/stylesheets/poll_desktop_efbc3607260bd3949bf9351692c294020d363176.css?__ws=forums.getdrafts.com" media="all" rel="stylesheet" data-target="poll_desktop"  />

  <link href="https://forums.getdrafts.com/stylesheets/desktop_theme_2_8a6535adb5ffcb37b246b8087d7136cfbc597ca9.css?__ws=forums.getdrafts.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2" data-theme-name="default"/>

    
    
        <link rel="alternate nofollow" type="application/rss+xml" title="RSS feed of &#39;Newline in evernote callback urls&#39;" href="5463.rss" />
    <meta property="og:site_name" content="Drafts Community" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://forums.getdrafts.com/uploads/default/original/2X/8/8028b40b2b5c46fe6a21aa3e1b9480b911b845df.png" />
<meta property="og:image" content="https://forums.getdrafts.com/uploads/default/original/2X/8/8028b40b2b5c46fe6a21aa3e1b9480b911b845df.png" />
<meta property="og:url" content="https://forums.getdrafts.com/t/newline-in-evernote-callback-urls/5463" />
<meta name="twitter:url" content="https://forums.getdrafts.com/t/newline-in-evernote-callback-urls/5463" />
<meta property="og:title" content="Newline in evernote callback urls" />
<meta name="twitter:title" content="Newline in evernote callback urls" />
<meta property="og:description" content="So I slowly become crazy‚Ä¶  I‚Äôm using the drafts x-callback url mechanics to create a note in evernote.  Note: I don‚Äôt want to use the Evernote Action direclty, beause this takes way longer and is not possible when I‚Äôm offline (even for a short amount of time).  I want to create a note in evernote from a draft.  the note title should be the title of the draft and the content of the evernote note should be the drafts body.  The ‚Äúproblem‚Äù now is, that I want to be able to just have a note like this..." />
<meta name="twitter:description" content="So I slowly become crazy‚Ä¶  I‚Äôm using the drafts x-callback url mechanics to create a note in evernote.  Note: I don‚Äôt want to use the Evernote Action direclty, beause this takes way longer and is not possible when I‚Äôm offline (even for a short amount of time).  I want to create a note in evernote from a draft.  the note title should be the title of the draft and the content of the evernote note should be the drafts body.  The ‚Äúproblem‚Äù now is, that I want to be able to just have a note like this..." />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="1 mins üïë" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="2 ‚ù§" />
<meta property="article:published_time" content="2019-09-04T08:01:32+00:00" />
<meta property="og:ignore_canonical" content="true" />


    
  </head>
  <body class="crawler">
    
    <header>
  <a href="https://forums.getdrafts.com/">
    <h1>Drafts Community</h1>
  </a>
</header>

    <div id="main-outlet" class="wrap" role="main">
        <div id="topic-title">
    <h1>
      <a href="5463.html">Newline in evernote callback urls</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="../../c/actions.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #652D90'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Actions - Help &amp; Questions</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

      <div class="topic-category">
        <div class='discourse-tags list-tags'>
            <a href='../../tag/evernote.html' class='discourse-tag' rel="tag">evernote</a>
        </div>
      </div>
  </div>

  


      <div id='post_1' itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Agile Tortoise, Inc.'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forums.getdrafts.com/uploads/default/original/2X/8/8ed1af80ec826f0860aad768f711c6b1b0fb32b4.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forums.getdrafts.com/u/FlohGro'><span itemprop='name'>FlohGro</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="5463.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-09-04T08:01:32Z' class='post-time'>
                September 4, 2019,  8:01am
              </time>
              <meta itemprop='dateModified' content='2019-09-04T08:01:32Z'>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>So I slowly become crazy‚Ä¶<br>
I‚Äôm using the drafts x-callback url mechanics to create a note in evernote.<br>
Note: I don‚Äôt want to use the Evernote Action direclty, beause this takes way longer and is not possible when I‚Äôm offline (even for a short amount of time).<br>
I want to create a note in evernote from a draft.<br>
the note title should be the title of the draft and the content of the evernote note should be the drafts body.<br>
The ‚Äúproblem‚Äù now is, that I want to be able to just have a note like this:</p>
<blockquote>
<p>Example Note title<br>
first line of the drafts body.<br>
the second line.<br>
some<br>
other<br>
lines</p>
<p>with a gap in between‚Ä¶</p>
</blockquote>
<p>My first script looked like this:</p>
<pre><code class="lang-auto">const baseURL = "evernote://x-callback-url/new-note";
let nTitle = draft.title;
let parsedBody = draft.processTemplate("[[body]]");

var cb = CallbackURL.create();
cb.baseURL = baseURL;
cb.addParameter("type","text");
cb.addParameter("title",nTitle);
cb.addParameter("text",parsedBody);

var success = cb.open();
// maybe success will be used later
</code></pre>
<p>When i just use the the drafts title as value for the title parameter as and then process the drafts content with the [[body]] template and use it as value for the text parameter (with type ‚Äútext‚Äù) i will recieve a note in evernote which looks more or less like this:</p>
<blockquote>
<p>Example Note title {as title of the note in evernote}<br>
first line of the drafts body. the second line. some other  lines with a gap in between‚Ä¶</p>
</blockquote>
<p>so all my newlines are gone.</p>
<p>so then I started experimenting with other types and my current solution is to use the type ‚Äúhtml‚Äù and also solit the draft into every line and insert another newline after each linebreak to ensure that the html will parse it corectly to evernote.<br>
My script now looks like this:</p>
<pre><code class="lang-auto">const baseURL = "evernote://x-callback-url/new-note";

let nTitle = draft.title;
let nBody = draft.content;
let lines = nBody.split('\n');

var newBody = "";

for (line of lines) {
newBody = newBody + line + '\n\n';
}

draft.content = newBody;

let parsedBody = draft.processTemplate("%%[[body]]%%");

alert(parsedBody);
var cb = CallbackURL.create();
cb.baseURL = baseURL;
cb.addParameter("type","html");
cb.addParameter("title",nTitle);
cb.addParameter("text",parsedBody);

var success = cb.open();
// maybe success will be used later
</code></pre>
<p>when I run this action with the example content above I receive a note which looks like this:</p>
<blockquote>
<p>Example Note title {as title of the note in evernote}<br>
first line of the drafts body.</p>
<p>the second line.</p>
<p>some</p>
<p>other</p>
<p>lines</p>
<p>with a gap in between‚Ä¶</p>
</blockquote>
<p>so i have a bigger space between all the lines and double linebreaks are ignored from the parser‚Ä¶<br>
The problem is, that I can‚Äôt change the space between the lines in evernote and its really annoying with this bigger spaces.<br>
I really just wanted to have the text with the exact formatting in evernote‚Ä¶<br>
Later I wanted to use  maybe some markdown features like bold styles - thats why I wont be able to use pure text, two.<br>
But can you help me figure out what could be the solution here!?<br>
Thanks!</p>
        </div>

        <meta itemprop='headline' content='Newline in evernote callback urls'>
          <meta itemprop='keywords' content='evernote'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div id='post_2' itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Agile Tortoise, Inc.'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forums.getdrafts.com/uploads/default/original/2X/8/8ed1af80ec826f0860aad768f711c6b1b0fb32b4.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forums.getdrafts.com/u/sylumer'><span itemprop='name'>sylumer</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="5463.html">

            <link itemprop="image" href="../../uploads/default/original/2X/d/d78ec341b37a6b1f64422c9f4024a7130c2c787d.jpeg">

          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-09-04T11:09:20Z' class='post-time'>
                September 4, 2019, 11:09am
              </time>
              <meta itemprop='dateModified' content='2019-09-04T11:09:20Z'>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>It is to do with your original text needing to be Markdown.</p>
<p>Hopefully this will work here, but you need to add two spaces at the end of a line to indicate a new line rather than a line wrap.</p>
<pre><code class="lang-auto">Example Note title  
first line of the drafts body  
the second line  
some  
other  
lines  

with a gap in between‚Ä¶
</code></pre>
<p>From the spec. at <a href="https://daringfireball.net/projects/markdown/syntax" rel="nofollow noopener">Daring Fireball</a>.</p>
<blockquote>
<p>When you do want to insert a <code>&lt;br /&gt;</code> break tag using Markdown, you end a line with two or more spaces, then type return.</p>
<p>Yes, this takes a tad more effort to create a <code>&lt;br /&gt;</code>, but a simplistic ‚Äúevery line break is a <code>&lt;br /&gt;</code>‚Äù rule wouldn‚Äôt work for Markdown. Markdown‚Äôs email-style blockquoting and multi-paragraph list items work best ‚Äî and look better ‚Äî when you format them with hard breaks.</p>
</blockquote>
<p>The end result for me in the HTML then looked to be much more like what I imagine you expected to be passing to Evernote.</p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="../../uploads/default/original/2X/d/d78ec341b37a6b1f64422c9f4024a7130c2c787d.jpeg" data-download-href="https://forums.getdrafts.com/uploads/default/d78ec341b37a6b1f64422c9f4024a7130c2c787d" title="F35E518C-33B9-4086-B0F7-E6EA4BC594A6.jpg"><img src="../../uploads/default/optimized/2X/d/d78ec341b37a6b1f64422c9f4024a7130c2c787d_2_281x500.jpeg" alt="image" data-base62-sha1="uKUwtJZgjbEtzn3x66Ge83mMGT3" width="281" height="500" srcset="../../uploads/default/optimized/2X/d/d78ec341b37a6b1f64422c9f4024a7130c2c787d_2_281x500.jpeg, ../../uploads/default/optimized/2X/d/d78ec341b37a6b1f64422c9f4024a7130c2c787d_2_421x750.jpeg 1.5x, ../../uploads/default/optimized/2X/d/d78ec341b37a6b1f64422c9f4024a7130c2c787d_2_562x1000.jpeg 2x" data-small-upload="https://forums.getdrafts.com/uploads/default/optimized/2X/d/d78ec341b37a6b1f64422c9f4024a7130c2c787d_2_10x10.png"><div class="meta">
<svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use xlink:href="#far-image"></use></svg><span class="filename">F35E518C-33B9-4086-B0F7-E6EA4BC594A6.jpg</span><span class="informations">1242√ó2208 153 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use xlink:href="#discourse-expand"></use></svg>
</div></a></div></p>
<p>Hope that helps.</p>
        </div>

        <meta itemprop='headline' content='Newline in evernote callback urls'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div id='post_3' itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Agile Tortoise, Inc.'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forums.getdrafts.com/uploads/default/original/2X/8/8ed1af80ec826f0860aad768f711c6b1b0fb32b4.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forums.getdrafts.com/u/FlohGro'><span itemprop='name'>FlohGro</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="5463.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-09-04T13:58:08Z' class='post-time'>
                September 4, 2019,  1:58pm
              </time>
              <meta itemprop='dateModified' content='2019-09-04T13:58:08Z'>
          <span itemprop='position'>#3</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Trank you so much!<br>
Works as expected!</p>
<p>For later reference here is my Updates script, just adding two Spaces and a linebreak to each new line!</p>
<pre><code class="lang-auto">
const baseURL = "evernote://x-callback-url/new-note";

let nTitle = draft.title;
let nBody = draft.content;
let lines = nBody.split('\n');

var newBody = "";

for (line of lines) {
	newBody = newBody + line + '  \n';
}

draft.content = newBody;

let parsedBody = draft.processTemplate("%%[[body]]%%");

draft.content = nBody;
draft.update();

alert(parsedBody);

var cb = CallbackURL.create();
cb.baseURL = baseURL;
cb.addParameter("type", "html");
cb.addParameter("title", nTitle);
cb.addParameter("text", parsedBody);
//cb.waitForResponse = true;
//cb.addParameter("",);


var success = cb.open();
</code></pre>
        </div>

        <meta itemprop='headline' content='Newline in evernote callback urls'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>






    </div>
    <footer class="container wrap">
  <nav class='crawler-nav'>
    <ul>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://forums.getdrafts.com/' itemprop="url">Home </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://forums.getdrafts.com/categories' itemprop="url">Categories </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://forums.getdrafts.com/guidelines' itemprop="url">FAQ/Guidelines </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://forums.getdrafts.com/tos' itemprop="url">Terms of Service </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://forums.getdrafts.com/privacy' itemprop="url">Privacy Policy </a>
        </span>
      </li>
    </ul>
  </nav>
  <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
</footer>

    
    
  </body>
  
</html>
