<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>iPad iOS Widget - Running Action and Cursor Placement - #2 by agiletortoise - Issues - Drafts Community</title>
    <meta name="description" content="Hi 
I have created a simple “insert text” action to create a template dated note. Essentially as follows: 

Title

Created: “[[date]]”
Body text 
When running the action within drafts, the cursor appears where I need it &amp;hellip;">
    <meta name="generator" content="Discourse 2.9.0.beta4 - https://github.com/discourse/discourse version f0d46c35493f4d01e4c1f9a3b32f867c1ade595e">
<link rel="icon" type="image/png" href="../../../uploads/default/optimized/1X/25837d707e58349c1c1881afc1883055a203ac28_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../../uploads/default/optimized/2X/7/77d737820f07fbb0e980560a8c341a18432a7d92_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="https://forums.getdrafts.com/t/ipad-ios-widget-running-action-and-cursor-placement/12514" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forums.getdrafts.com","potentialAction":{"@type":"SearchAction","target":"https://forums.getdrafts.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../../opensearch.xml" title="Drafts Community Search">

    <link href="https://forums.getdrafts.com/stylesheets/color_definitions_base__2_3d1df61a71325940d683ff0221fd14dee6a802e5.css?__ws=forums.getdrafts.com" media="all" rel="stylesheet" class="light-scheme"/><link href="https://forums.getdrafts.com/stylesheets/color_definitions_simple-dark_1_2_ce13c571d5f0d2fac2c7d8164bf57e59bd0aa89f.css?__ws=forums.getdrafts.com" media="(prefers-color-scheme: dark)" rel="stylesheet" class="dark-scheme"/>

  <link href="https://forums.getdrafts.com/stylesheets/desktop_efbc3607260bd3949bf9351692c294020d363176.css?__ws=forums.getdrafts.com" media="all" rel="stylesheet" data-target="desktop"  />


  <link href="https://forums.getdrafts.com/stylesheets/discourse-details_efbc3607260bd3949bf9351692c294020d363176.css?__ws=forums.getdrafts.com" media="all" rel="stylesheet" data-target="discourse-details"  />
  <link href="https://forums.getdrafts.com/stylesheets/discourse-local-dates_efbc3607260bd3949bf9351692c294020d363176.css?__ws=forums.getdrafts.com" media="all" rel="stylesheet" data-target="discourse-local-dates"  />
  <link href="https://forums.getdrafts.com/stylesheets/discourse-narrative-bot_efbc3607260bd3949bf9351692c294020d363176.css?__ws=forums.getdrafts.com" media="all" rel="stylesheet" data-target="discourse-narrative-bot"  />
  <link href="https://forums.getdrafts.com/stylesheets/discourse-presence_efbc3607260bd3949bf9351692c294020d363176.css?__ws=forums.getdrafts.com" media="all" rel="stylesheet" data-target="discourse-presence"  />
  <link href="https://forums.getdrafts.com/stylesheets/lazy-yt_efbc3607260bd3949bf9351692c294020d363176.css?__ws=forums.getdrafts.com" media="all" rel="stylesheet" data-target="lazy-yt"  />
  <link href="https://forums.getdrafts.com/stylesheets/poll_efbc3607260bd3949bf9351692c294020d363176.css?__ws=forums.getdrafts.com" media="all" rel="stylesheet" data-target="poll"  />
  <link href="https://forums.getdrafts.com/stylesheets/poll_desktop_efbc3607260bd3949bf9351692c294020d363176.css?__ws=forums.getdrafts.com" media="all" rel="stylesheet" data-target="poll_desktop"  />

  <link href="https://forums.getdrafts.com/stylesheets/desktop_theme_2_8a6535adb5ffcb37b246b8087d7136cfbc597ca9.css?__ws=forums.getdrafts.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2" data-theme-name="default"/>

    
    
        <link rel="alternate nofollow" type="application/rss+xml" title="RSS feed of &#39;iPad iOS Widget - Running Action and Cursor Placement&#39;" href="../12514.rss" />
    <meta property="og:site_name" content="Drafts Community" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://forums.getdrafts.com/uploads/default/original/2X/8/8028b40b2b5c46fe6a21aa3e1b9480b911b845df.png" />
<meta property="og:image" content="https://forums.getdrafts.com/uploads/default/original/2X/8/8028b40b2b5c46fe6a21aa3e1b9480b911b845df.png" />
<meta property="og:url" content="https://forums.getdrafts.com/t/ipad-ios-widget-running-action-and-cursor-placement/12514/2" />
<meta name="twitter:url" content="https://forums.getdrafts.com/t/ipad-ios-widget-running-action-and-cursor-placement/12514/2" />
<meta property="og:title" content="iPad iOS Widget - Running Action and Cursor Placement" />
<meta name="twitter:title" content="iPad iOS Widget - Running Action and Cursor Placement" />
<meta property="og:description" content="Not all actions are well suited for use from Widgets (related docs).  For the particular use you describe, you might be better off using the “New Draft with Template” action with template drafts (which also support templates specifying initial cursor position). See:    Just having an action that uses “Insert Text” might have unpredictable results - like inserting in another draft loaded in the editor when executing the action." />
<meta name="twitter:description" content="Not all actions are well suited for use from Widgets (related docs).  For the particular use you describe, you might be better off using the “New Draft with Template” action with template drafts (which also support templates specifying initial cursor position). See:    Just having an action that uses “Insert Text” might have unpredictable results - like inserting in another draft loaded in the editor when executing the action." />
<meta property="article:published_time" content="2022-04-19T01:15:57+00:00" />
<meta property="og:ignore_canonical" content="true" />


    
  </head>
  <body class="crawler">
    
    <header>
  <a href="https://forums.getdrafts.com/">
    <h1>Drafts Community</h1>
  </a>
</header>

    <div id="main-outlet" class="wrap" role="main">
        <div id="topic-title">
    <h1>
      <a href="https://forums.getdrafts.com/t/ipad-ios-widget-running-action-and-cursor-placement/12514">iPad iOS Widget - Running Action and Cursor Placement</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://forums.getdrafts.com/c/issues/10" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #F1592A'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Issues</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

  </div>

  


      <div id='post_1' itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Agile Tortoise, Inc.'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forums.getdrafts.com/uploads/default/original/2X/8/8ed1af80ec826f0860aad768f711c6b1b0fb32b4.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forums.getdrafts.com/u/Abjerybfsk'><span itemprop='name'>Abjerybfsk</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="https://forums.getdrafts.com/t/ipad-ios-widget-running-action-and-cursor-placement/12514">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2022-04-19T00:52:10Z' class='post-time'>
                April 19, 2022, 12:52am
              </time>
              <meta itemprop='dateModified' content='2022-04-19T00:52:10Z'>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Hi</p>
<p>I have created a simple “insert text” action to create a template dated note. Essentially as follows:</p>
<h1>
<a name="title-1" class="anchor" href="2.html#title-1"></a>Title</h1>
<h2>
<a name="created-date-2" class="anchor" href="2.html#created-date-2"></a>Created: “[[date]]”</h2>
<p>Body text</p>
<p>When running the action within drafts, the cursor appears where I need it to - before the word “Body” in the example above. That allows me to immediately create the content of my note.</p>
<p>When running the action from the iOS widget, however, the cursor doesn’t appear until I press on the screen. Is there a fix for that, or am I doing something wrong?</p>
<p>Many thanks in advance for your help</p>
<p>Alex</p>
        </div>

        <meta itemprop='headline' content='iPad iOS Widget - Running Action and Cursor Placement'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div id='post_2' itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Agile Tortoise, Inc.'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forums.getdrafts.com/uploads/default/original/2X/8/8ed1af80ec826f0860aad768f711c6b1b0fb32b4.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forums.getdrafts.com/u/agiletortoise'><span itemprop='name'>agiletortoise</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="https://forums.getdrafts.com/t/ipad-ios-widget-running-action-and-cursor-placement/12514">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2022-04-19T01:15:57Z' class='post-time'>
                April 19, 2022,  1:15am
              </time>
              <meta itemprop='dateModified' content='2022-04-19T01:15:57Z'>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Not all actions are well suited for use from Widgets (<a href="../../../../docs.getdrafts.com/docs/extensions/widgets.html#using-actions-with-widgets">related docs</a>).</p>
<p>For the particular use you describe, you might be better off using the “New Draft with Template” action with template drafts (which also support templates specifying initial cursor position). See:</p>
<aside class="quote quote-modified" data-post="1" data-topic="4253">
  <div class="title">
    <div class="quote-controls"></div>
    <img loading="lazy" alt="" width="20" height="20" src="../../../user_avatar/forums.getdrafts.com/agiletortoise/40/1822_2.png" class="avatar">
    <a href="../../tip-creating-new-drafts-with-templates/4253.html">TIP: Creating New Drafts with Templates</a> <a class="badge-wrapper  bullet" href="../../../c/tips.html"><span class="badge-category-bg" style="background-color: #12A89D;"></span><span style="" data-drop-close="true" class="badge-category clear-badge" title="Quick Drafts tips on a variety of topics. Free free to post your own.">Tips &amp; Tricks</span></a>
  </div>
  <blockquote>
    UPDATE - 2021/09/01 Updated action to support a “Omit First Line in New Draft” option, that allows you to use a friendly name for the template in the first line, like “Meeting Notes Template” that is help for selecting templates in the prompt, but will no be included in the output. 


UPDATE - 2020/11/01 The current version of this action has been updated with new features, such as cursor placement, as of Nov. 1, 2020. You may need to reinstall the <a href="../../../../actions.getdrafts.com/a/1VL.html">action from the directory</a> if you have a previo…
  </blockquote>
</aside>

<p>Just having an action that uses “Insert Text” might have unpredictable results - like inserting in another draft loaded in the editor when executing the action.</p>
        </div>

        <meta itemprop='headline' content='iPad iOS Widget - Running Action and Cursor Placement'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div id='post_3' itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Agile Tortoise, Inc.'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forums.getdrafts.com/uploads/default/original/2X/8/8ed1af80ec826f0860aad768f711c6b1b0fb32b4.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forums.getdrafts.com/u/Abjerybfsk'><span itemprop='name'>Abjerybfsk</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="https://forums.getdrafts.com/t/ipad-ios-widget-running-action-and-cursor-placement/12514">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2022-04-19T01:20:34Z' class='post-time'>
                April 19, 2022,  1:20am
              </time>
              <meta itemprop='dateModified' content='2022-04-19T01:20:34Z'>
          <span itemprop='position'>#3</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Thank you for your response.</p>
<p>I have since noticed it appears as though the ipad isn’t ready to type - it’s if the keyboard isn’t active when I run the action. When pressing the “+” for new draft, it works every time. Are there any tips for ipad keyboard settings when using drafts?</p>
<p>Regarding the “New Draft with Template” action - I love the action, but I’m trying to get to “one press and type” for these notes. Is there a way to use the action within only one template, and bypass the selection menu?</p>
<p>Thank you for all your do with this app. It is incredible.</p>
        </div>

        <meta itemprop='headline' content='iPad iOS Widget - Running Action and Cursor Placement'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div id='post_4' itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Agile Tortoise, Inc.'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forums.getdrafts.com/uploads/default/original/2X/8/8ed1af80ec826f0860aad768f711c6b1b0fb32b4.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forums.getdrafts.com/u/Abjerybfsk'><span itemprop='name'>Abjerybfsk</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="https://forums.getdrafts.com/t/ipad-ios-widget-running-action-and-cursor-placement/12514">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2022-04-19T03:41:08Z' class='post-time'>
                April 19, 2022,  3:41am
              </time>
              <meta itemprop='dateModified' content='2022-04-19T03:41:08Z'>
          <span itemprop='position'>#4</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I think I figured it out.</p>
<p>I used this thread to work out which parts to edit from the “New Draft from Template” action - <a href="../../using-prompt-results-in-new-draft-with-template/11481.html" class="inline-onebox">Using prompt results in New Draft with Template</a></p>
<p>After looking at that, I commented (added “//“ before each like) out the code to be disabled like that person suggested. The script now looks like the below. I’m sure this looks terrible to anyone with experience, but I’m pleased it’s working! I guess I can now delete all the commented code.</p>
<p><strong>Here’s the script:</strong></p>
<p>//modified from New Draft with Template Action</p>
<p>// defaults<br>
let omitFirstLineDefault = false;</p>
<p>// select from a list of drafts tagged “template” and create new draft based on selection.</p>
<p>let f = () =&gt; {<br>
// create temp workspace to query drafts<br>
//	let workspace = Workspace.create();<br>
//	if (!workspace) {<br>
//		return false;<br>
//	}<br>
//	workspace.tagFilter = “template”;<br>
//	workspace.setAllSort(“name”, false, true);<br>
// get list of drafts in workspace<br>
//	let drafts = workspace.query(“all”);</p>
<pre><code>// check if we found any valid templates
</code></pre>
<p>//	if (drafts.length == 0) {<br>
//		alert(“No templates found. To make templates available to this action, create a draft with the template content and assign it the tag “template”.”);<br>
//		return false;<br>
//	}</p>
<pre><code>// prompt to select
</code></pre>
<p>//	let p = Prompt.create();<br>
//	p.title = “New Draft with Template”;<br>
//	p.message = “Select a template. A new draft will be created based the template selected.”;</p>
<p>//	p.addSwitch(“omitTitle”, “Omit First Line in New Draft”, omitFirstLineDefault);</p>
<p>//	let ix = 0<br>
//	for (let d of drafts) {<br>
//		p.addButton(d.displayTitle, ix);<br>
//		ix++;<br>
//	}</p>
<p>//	if (!p.show()) {<br>
//		return false;<br>
//	}</p>
<pre><code>// get the selected template draft
</code></pre>
<p>//	let selectedIndex = p.buttonPressed;<br>
// Add the UUID of the Draft to the brackets after Drafts.find</p>
<pre><code>let template = Draft.find('Inserted the UUID here');
let content = template.content;
</code></pre>
<p>//	let omitTitle = omitFirstLineDefault;</p>
<p>//	if (omitTitle) {<br>
//		let lines = content.split(’\n’);<br>
//		if (lines.length &gt; 0) {<br>
//			lines.shift();<br>
//			content = lines.join(’\n’).replace(/^\s+/,"");<br>
//		}<br>
//	}</p>
<pre><code>// create new draft and assign content/tags/syntax
let d = Draft.create();
for (let tag of template.tags) {
	if (tag != "template") {
		d.addTag(tag);
	}
}
d.languageGrammar = template.languageGrammar;
d.content = d.processTemplate(content);
d.update();
// load new draft
editor.load(d);
editor.activate();

// look for &lt;|&gt; to set cursor location
let loc = d.content.search("&lt;|&gt;");
</code></pre>
<p>//	if (p != -1) {<br>
editor.setText(editor.getText().replace("&lt;|&gt;", “”));<br>
editor.setSelectedRange(loc, 0);<br>
//	}</p>
<pre><code>return true;
</code></pre>
<p>}</p>
<p>if (app.isPro) {<br>
if (!f()) {<br>
context.cancel();<br>
}<br>
}<br>
else {<br>
alert(“Drafts Pro features required to use this action.”)<br>
}</p>
        </div>

        <meta itemprop='headline' content='iPad iOS Widget - Running Action and Cursor Placement'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>






    </div>
    <footer class="container wrap">
  <nav class='crawler-nav'>
    <ul>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://forums.getdrafts.com/' itemprop="url">Home </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://forums.getdrafts.com/categories' itemprop="url">Categories </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://forums.getdrafts.com/guidelines' itemprop="url">FAQ/Guidelines </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://forums.getdrafts.com/tos' itemprop="url">Terms of Service </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://forums.getdrafts.com/privacy' itemprop="url">Privacy Policy </a>
        </span>
      </li>
    </ul>
  </nav>
  <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
</footer>

    
    
  </body>
  
</html>
