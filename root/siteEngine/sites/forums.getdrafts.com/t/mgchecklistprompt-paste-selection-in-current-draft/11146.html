<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>MGCheckListPrompt Paste selection in current draft - Scripting - Drafts Community</title>
    <meta name="description" content="I downloaded the action group  MGCheckListPrompt (many thanks to @mattgemmell ) and I’m trying to copy the content of the selected draft (the array of selected drafts if possible) in my current draft. 
I’m new to scripti&amp;hellip;">
    <meta name="generator" content="Discourse 2.9.0.beta4 - https://github.com/discourse/discourse version f0d46c35493f4d01e4c1f9a3b32f867c1ade595e">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/1X/25837d707e58349c1c1881afc1883055a203ac28_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/7/77d737820f07fbb0e980560a8c341a18432a7d92_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="11146.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forums.getdrafts.com","potentialAction":{"@type":"SearchAction","target":"https://forums.getdrafts.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Drafts Community Search">

    <link href="https://forums.getdrafts.com/stylesheets/color_definitions_base__2_3d1df61a71325940d683ff0221fd14dee6a802e5.css?__ws=forums.getdrafts.com" media="all" rel="stylesheet" class="light-scheme"/><link href="https://forums.getdrafts.com/stylesheets/color_definitions_simple-dark_1_2_ce13c571d5f0d2fac2c7d8164bf57e59bd0aa89f.css?__ws=forums.getdrafts.com" media="(prefers-color-scheme: dark)" rel="stylesheet" class="dark-scheme"/>

  <link href="https://forums.getdrafts.com/stylesheets/desktop_efbc3607260bd3949bf9351692c294020d363176.css?__ws=forums.getdrafts.com" media="all" rel="stylesheet" data-target="desktop"  />


  <link href="https://forums.getdrafts.com/stylesheets/discourse-details_efbc3607260bd3949bf9351692c294020d363176.css?__ws=forums.getdrafts.com" media="all" rel="stylesheet" data-target="discourse-details"  />
  <link href="https://forums.getdrafts.com/stylesheets/discourse-local-dates_efbc3607260bd3949bf9351692c294020d363176.css?__ws=forums.getdrafts.com" media="all" rel="stylesheet" data-target="discourse-local-dates"  />
  <link href="https://forums.getdrafts.com/stylesheets/discourse-narrative-bot_efbc3607260bd3949bf9351692c294020d363176.css?__ws=forums.getdrafts.com" media="all" rel="stylesheet" data-target="discourse-narrative-bot"  />
  <link href="https://forums.getdrafts.com/stylesheets/discourse-presence_efbc3607260bd3949bf9351692c294020d363176.css?__ws=forums.getdrafts.com" media="all" rel="stylesheet" data-target="discourse-presence"  />
  <link href="https://forums.getdrafts.com/stylesheets/lazy-yt_efbc3607260bd3949bf9351692c294020d363176.css?__ws=forums.getdrafts.com" media="all" rel="stylesheet" data-target="lazy-yt"  />
  <link href="https://forums.getdrafts.com/stylesheets/poll_efbc3607260bd3949bf9351692c294020d363176.css?__ws=forums.getdrafts.com" media="all" rel="stylesheet" data-target="poll"  />
  <link href="https://forums.getdrafts.com/stylesheets/poll_desktop_efbc3607260bd3949bf9351692c294020d363176.css?__ws=forums.getdrafts.com" media="all" rel="stylesheet" data-target="poll_desktop"  />

  <link href="https://forums.getdrafts.com/stylesheets/desktop_theme_2_8a6535adb5ffcb37b246b8087d7136cfbc597ca9.css?__ws=forums.getdrafts.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2" data-theme-name="default"/>

    
    
        <link rel="alternate nofollow" type="application/rss+xml" title="RSS feed of &#39;MGCheckListPrompt Paste selection in current draft&#39;" href="11146.rss" />
    <meta property="og:site_name" content="Drafts Community" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://forums.getdrafts.com/uploads/default/original/2X/8/8028b40b2b5c46fe6a21aa3e1b9480b911b845df.png" />
<meta property="og:image" content="https://forums.getdrafts.com/uploads/default/original/2X/8/8028b40b2b5c46fe6a21aa3e1b9480b911b845df.png" />
<meta property="og:url" content="https://forums.getdrafts.com/t/mgchecklistprompt-paste-selection-in-current-draft/11146" />
<meta name="twitter:url" content="https://forums.getdrafts.com/t/mgchecklistprompt-paste-selection-in-current-draft/11146" />
<meta property="og:title" content="MGCheckListPrompt Paste selection in current draft" />
<meta name="twitter:title" content="MGCheckListPrompt Paste selection in current draft" />
<meta property="og:description" content="I downloaded the action group  MGCheckListPrompt (many thanks to @mattgemmell ) and I’m trying to copy the content of the selected draft (the array of selected drafts if possible) in my current draft.  I’m new to scripting and after several trials and errors, I learned a lot about scripting but I still can’t figure out what to write.  I understand that editor.setSelectedText() should be used after  var selectedItems = prompt.show();  , perhaps using a variable defined in the action group’s Code ..." />
<meta name="twitter:description" content="I downloaded the action group  MGCheckListPrompt (many thanks to @mattgemmell ) and I’m trying to copy the content of the selected draft (the array of selected drafts if possible) in my current draft.  I’m new to scripting and after several trials and errors, I learned a lot about scripting but I still can’t figure out what to write.  I understand that editor.setSelectedText() should be used after  var selectedItems = prompt.show();  , perhaps using a variable defined in the action group’s Code ..." />
<meta property="article:published_time" content="2021-09-08T02:53:39+00:00" />
<meta property="og:ignore_canonical" content="true" />


    
  </head>
  <body class="crawler">
    
    <header>
  <a href="https://forums.getdrafts.com/">
    <h1>Drafts Community</h1>
  </a>
</header>

    <div id="main-outlet" class="wrap" role="main">
        <div id="topic-title">
    <h1>
      <a href="11146.html">MGCheckListPrompt Paste selection in current draft</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://forums.getdrafts.com/c/scripting/13" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #AB9364'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Scripting</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

      <div class="topic-category">
        <div class='discourse-tags list-tags'>
            <a href='../../tag/javascript.html' class='discourse-tag' rel="tag">javascript</a>, 
            <a href='../../tag/actions.html' class='discourse-tag' rel="tag">actions</a>
        </div>
      </div>
  </div>

  


      <div id='post_1' itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Agile Tortoise, Inc.'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forums.getdrafts.com/uploads/default/original/2X/8/8ed1af80ec826f0860aad768f711c6b1b0fb32b4.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forums.getdrafts.com/u/emanuel_cyr'><span itemprop='name'>emanuel_cyr</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="11146.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-09-08T02:53:39Z' class='post-time'>
                September 8, 2021,  2:53am
              </time>
              <meta itemprop='dateModified' content='2021-09-08T02:53:39Z'>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I downloaded the action group  <a href="../../../actions.getdrafts.com/g/10X.html" rel="noopener nofollow ugc">MGCheckListPrompt</a> (many thanks to <a class="mention" href="https://forums.getdrafts.com/u/mattgemmell">@mattgemmell</a> ) and I’m trying to copy the content of the selected draft (the array of selected drafts if possible) in my current draft.</p>
<p>I’m new to scripting and after several trials and errors, I learned a lot about scripting but I still can’t figure out what to write.<br>
I understand that editor.setSelectedText() should be used after<br>
var selectedItems = prompt.show();<br>
, perhaps using a variable defined in the action group’s Code Library (MGCheckListPrompt Library).</p>
<p>Any help would be greatly appreciated.</p>
        </div>

        <meta itemprop='headline' content='MGCheckListPrompt Paste selection in current draft'>
          <meta itemprop='keywords' content='javascript, actions'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div id='post_2' itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Agile Tortoise, Inc.'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forums.getdrafts.com/uploads/default/original/2X/8/8ed1af80ec826f0860aad768f711c6b1b0fb32b4.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forums.getdrafts.com/u/sylumer'><span itemprop='name'>sylumer</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="11146.html">

            <link itemprop="image" href="../../uploads/default/original/2X/6/6393112bf83f9b4371e34446ee4d80f531904676.png">

          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-09-08T06:25:50Z' class='post-time'>
                September 8, 2021,  6:25am
              </time>
              <meta itemprop='dateModified' content='2021-09-08T06:25:50Z'>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>See if this gets you on the right track.</p>
<aside class="onebox allowlistedgeneric" data-onebox-src="https://actions.getdrafts.com/a/1qW">
  <header class="source">
      <img src="../../uploads/default/original/2X/5/589671206cbd59f5922b38e71c9efbdfccc5d725.png" class="site-icon" width="180" height="180">

      <a href="../../../actions.getdrafts.com/a/1qW.html" target="_blank" rel="noopener">actions.getdrafts.com</a>
  </header>

  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:690/362;"><img src="../../uploads/default/optimized/2X/6/6393112bf83f9b4371e34446ee4d80f531904676_2_690x362.png" class="thumbnail" width="690" height="362" srcset="../../uploads/default/optimized/2X/6/6393112bf83f9b4371e34446ee4d80f531904676_2_690x362.png, ../../uploads/default/optimized/2X/6/6393112bf83f9b4371e34446ee4d80f531904676_2_1035x543.png 1.5x, ../../uploads/default/original/2X/6/6393112bf83f9b4371e34446ee4d80f531904676.png 2x" data-small-upload="https://forums.getdrafts.com/uploads/default/optimized/2X/6/6393112bf83f9b4371e34446ee4d80f531904676_2_10x10.png"></div>

<h3><a href="../../../actions.getdrafts.com/a/1qW.html" target="_blank" rel="noopener">Drafts Directory: Draft content example</a></h3>

  <p>Example actions and other extensions for Drafts, the quick-capture notes app.</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<p>I modified one of the standard demo actions to display the content of each selected draft as an alert.</p>
<p>The prompt looks to be returning an array of the indices of the original selection, so it is just a case of getting the content of those selections and processing it as you wish.</p>
<p>Hope that helps.</p>
        </div>

        <meta itemprop='headline' content='MGCheckListPrompt Paste selection in current draft'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div id='post_3' itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Agile Tortoise, Inc.'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forums.getdrafts.com/uploads/default/original/2X/8/8ed1af80ec826f0860aad768f711c6b1b0fb32b4.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forums.getdrafts.com/u/emanuel_cyr'><span itemprop='name'>emanuel_cyr</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="11146.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-09-08T16:39:06Z' class='post-time'>
                September 8, 2021,  4:39pm
              </time>
              <meta itemprop='dateModified' content='2021-09-08T16:39:06Z'>
          <span itemprop='position'>#3</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Thank you <a class="mention" href="https://forums.getdrafts.com/u/sylumer">@sylumer</a>, very appreciated.<br>
I got it to work like this:</p>
<pre><code class="lang-auto">if (prompt.didShow) {
	if (selectedItems != null) {
		selectedItems.map(intIndex =&gt; 
([st, len] = editor.getSelectedRange(), 
s = (drafts[intIndex].content), 
editor.setTextInRange(st, s.length, s),
editor.setSelectedRange(st+s.length, 0)))
}
</code></pre>
<p>Probably not the most elegant, but it works.<br>
Now, when I select several items, I would like every item to start at the beginning of a line. I’m trying to add +"\n\n"  next to a variable I just described, with no success. Any clue?</p>
        </div>

        <meta itemprop='headline' content='MGCheckListPrompt Paste selection in current draft'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div id='post_4' itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Agile Tortoise, Inc.'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forums.getdrafts.com/uploads/default/original/2X/8/8ed1af80ec826f0860aad768f711c6b1b0fb32b4.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forums.getdrafts.com/u/sylumer'><span itemprop='name'>sylumer</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="11146.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-09-08T16:43:32Z' class='post-time'>
                September 8, 2021,  4:43pm
              </time>
              <meta itemprop='dateModified' content='2021-09-08T16:43:32Z'>
          <span itemprop='position'>#4</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Do you know about joining arrays in JavaScript?</p>
<p><a href="https://www.w3schools.com/jsref/jsref_join.asp" class="onebox" target="_blank" rel="noopener">https://www.w3schools.com/jsref/jsref_join.asp</a></p>
<p>I think it might be ideally suited if you built an array of draft content from the array of selected draft indices.</p>
        </div>

        <meta itemprop='headline' content='MGCheckListPrompt Paste selection in current draft'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="2" />
          </div>

      </div>
      <div id='post_5' itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Agile Tortoise, Inc.'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forums.getdrafts.com/uploads/default/original/2X/8/8ed1af80ec826f0860aad768f711c6b1b0fb32b4.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forums.getdrafts.com/u/emanuel_cyr'><span itemprop='name'>emanuel_cyr</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="11146.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-09-08T16:56:04Z' class='post-time'>
                September 8, 2021,  4:56pm
              </time>
              <meta itemprop='dateModified' content='2021-09-08T16:56:04Z'>
          <span itemprop='position'>#5</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>No but I will take a look.</p>
        </div>

        <meta itemprop='headline' content='MGCheckListPrompt Paste selection in current draft'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div id='post_6' itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Agile Tortoise, Inc.'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forums.getdrafts.com/uploads/default/original/2X/8/8ed1af80ec826f0860aad768f711c6b1b0fb32b4.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forums.getdrafts.com/u/emanuel_cyr'><span itemprop='name'>emanuel_cyr</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="11146.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-09-09T02:00:15Z' class='post-time'>
                September 9, 2021,  2:00am
              </time>
              <meta itemprop='dateModified' content='2021-09-09T02:00:15Z'>
          <span itemprop='position'>#6</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>It works well like this:</p>
<pre><code class="lang-auto">// Report the result.
if (prompt.didShow) {
	if (selectedItems != null) {
		let m = selectedItems.map(intIndex =&gt; 
	(drafts[intIndex].content));
		
		let s = m.join("\n");
		
editor.setSelectedText(s);

	}
</code></pre>
<p>Thanks again for your help.</p>
        </div>

        <meta itemprop='headline' content='MGCheckListPrompt Paste selection in current draft'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>






    </div>
    <footer class="container wrap">
  <nav class='crawler-nav'>
    <ul>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://forums.getdrafts.com/' itemprop="url">Home </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://forums.getdrafts.com/categories' itemprop="url">Categories </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://forums.getdrafts.com/guidelines' itemprop="url">FAQ/Guidelines </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://forums.getdrafts.com/tos' itemprop="url">Terms of Service </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://forums.getdrafts.com/privacy' itemprop="url">Privacy Policy </a>
        </span>
      </li>
    </ul>
  </nav>
  <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
</footer>

    
    
  </body>
  
</html>
