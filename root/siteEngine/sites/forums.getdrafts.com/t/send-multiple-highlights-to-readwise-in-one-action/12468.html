<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Send multiple highlights to Readwise in one action - Actions - Help &amp; Questions - Drafts Community</title>
    <meta name="description" content="Hi, sorry for asking help here because this script is a little difficult for me to adjust. 
I want to send multiple highlights to Readwise and find this Send to Readwise | Drafts Directory . This is exactly what I want, &amp;hellip;">
    <meta name="generator" content="Discourse 2.9.0.beta4 - https://github.com/discourse/discourse version f0d46c35493f4d01e4c1f9a3b32f867c1ade595e">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/1X/25837d707e58349c1c1881afc1883055a203ac28_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/7/77d737820f07fbb0e980560a8c341a18432a7d92_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="12468.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forums.getdrafts.com","potentialAction":{"@type":"SearchAction","target":"https://forums.getdrafts.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Drafts Community Search">

    <link href="https://forums.getdrafts.com/stylesheets/color_definitions_base__2_3d1df61a71325940d683ff0221fd14dee6a802e5.css?__ws=forums.getdrafts.com" media="all" rel="stylesheet" class="light-scheme"/><link href="https://forums.getdrafts.com/stylesheets/color_definitions_simple-dark_1_2_ce13c571d5f0d2fac2c7d8164bf57e59bd0aa89f.css?__ws=forums.getdrafts.com" media="(prefers-color-scheme: dark)" rel="stylesheet" class="dark-scheme"/>

  <link href="https://forums.getdrafts.com/stylesheets/desktop_efbc3607260bd3949bf9351692c294020d363176.css?__ws=forums.getdrafts.com" media="all" rel="stylesheet" data-target="desktop"  />


  <link href="https://forums.getdrafts.com/stylesheets/discourse-details_efbc3607260bd3949bf9351692c294020d363176.css?__ws=forums.getdrafts.com" media="all" rel="stylesheet" data-target="discourse-details"  />
  <link href="https://forums.getdrafts.com/stylesheets/discourse-local-dates_efbc3607260bd3949bf9351692c294020d363176.css?__ws=forums.getdrafts.com" media="all" rel="stylesheet" data-target="discourse-local-dates"  />
  <link href="https://forums.getdrafts.com/stylesheets/discourse-narrative-bot_efbc3607260bd3949bf9351692c294020d363176.css?__ws=forums.getdrafts.com" media="all" rel="stylesheet" data-target="discourse-narrative-bot"  />
  <link href="https://forums.getdrafts.com/stylesheets/discourse-presence_efbc3607260bd3949bf9351692c294020d363176.css?__ws=forums.getdrafts.com" media="all" rel="stylesheet" data-target="discourse-presence"  />
  <link href="https://forums.getdrafts.com/stylesheets/lazy-yt_efbc3607260bd3949bf9351692c294020d363176.css?__ws=forums.getdrafts.com" media="all" rel="stylesheet" data-target="lazy-yt"  />
  <link href="https://forums.getdrafts.com/stylesheets/poll_efbc3607260bd3949bf9351692c294020d363176.css?__ws=forums.getdrafts.com" media="all" rel="stylesheet" data-target="poll"  />
  <link href="https://forums.getdrafts.com/stylesheets/poll_desktop_efbc3607260bd3949bf9351692c294020d363176.css?__ws=forums.getdrafts.com" media="all" rel="stylesheet" data-target="poll_desktop"  />

  <link href="https://forums.getdrafts.com/stylesheets/desktop_theme_2_8a6535adb5ffcb37b246b8087d7136cfbc597ca9.css?__ws=forums.getdrafts.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2" data-theme-name="default"/>

    
    
        <link rel="alternate nofollow" type="application/rss+xml" title="RSS feed of &#39;Send multiple highlights to Readwise in one action&#39;" href="12468.rss" />
    <meta property="og:site_name" content="Drafts Community" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://forums.getdrafts.com/uploads/default/original/2X/8/8028b40b2b5c46fe6a21aa3e1b9480b911b845df.png" />
<meta property="og:image" content="https://forums.getdrafts.com/uploads/default/original/2X/8/8028b40b2b5c46fe6a21aa3e1b9480b911b845df.png" />
<meta property="og:url" content="https://forums.getdrafts.com/t/send-multiple-highlights-to-readwise-in-one-action/12468" />
<meta name="twitter:url" content="https://forums.getdrafts.com/t/send-multiple-highlights-to-readwise-in-one-action/12468" />
<meta property="og:title" content="Send multiple highlights to Readwise in one action" />
<meta name="twitter:title" content="Send multiple highlights to Readwise in one action" />
<meta property="og:description" content="Hi, sorry for asking help here because this script is a little difficult for me to adjust.  I want to send multiple highlights to Readwise and find this Send to Readwise | Drafts Directory . This is exactly what I want, but can I make some adjustments? I don‚Äôt need to add ‚Äúpage‚Äù to every highlights. How can rewrite this script to delete ‚Äúpage‚Äù only keep ‚Äúhighlights‚Äù, ‚ÄúTitle‚Äù, ‚ÄúAuthor‚Äù?  Thanks for you time and kind help." />
<meta name="twitter:description" content="Hi, sorry for asking help here because this script is a little difficult for me to adjust.  I want to send multiple highlights to Readwise and find this Send to Readwise | Drafts Directory . This is exactly what I want, but can I make some adjustments? I don‚Äôt need to add ‚Äúpage‚Äù to every highlights. How can rewrite this script to delete ‚Äúpage‚Äù only keep ‚Äúhighlights‚Äù, ‚ÄúTitle‚Äù, ‚ÄúAuthor‚Äù?  Thanks for you time and kind help." />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="1 mins üïë" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="1 ‚ù§" />
<meta property="article:published_time" content="2022-04-14T14:00:14+00:00" />
<meta property="og:ignore_canonical" content="true" />


    
  </head>
  <body class="crawler">
    
    <header>
  <a href="https://forums.getdrafts.com/">
    <h1>Drafts Community</h1>
  </a>
</header>

    <div id="main-outlet" class="wrap" role="main">
        <div id="topic-title">
    <h1>
      <a href="12468.html">Send multiple highlights to Readwise in one action</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="../../c/actions.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #652D90'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Actions - Help &amp; Questions</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

      <div class="topic-category">
        <div class='discourse-tags list-tags'>
            <a href='../../tag/actions.html' class='discourse-tag' rel="tag">actions</a>
        </div>
      </div>
  </div>

  


      <div id='post_1' itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Agile Tortoise, Inc.'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forums.getdrafts.com/uploads/default/original/2X/8/8ed1af80ec826f0860aad768f711c6b1b0fb32b4.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forums.getdrafts.com/u/bleedingsaber'><span itemprop='name'>bleedingsaber</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="12468.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2022-04-14T14:00:14Z' class='post-time'>
                April 14, 2022,  2:00pm
              </time>
              <meta itemprop='dateModified' content='2022-04-14T14:00:14Z'>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Hi, sorry for asking help here because this script is a little difficult for me to adjust.</p>
<p>I want to send multiple highlights to Readwise and find this <a href="../../../directory.getdrafts.com/a/1ut.html" class="inline-onebox" rel="noopener nofollow ugc">Send to Readwise | Drafts Directory</a> . This is exactly what I want, but can I make some adjustments? I don‚Äôt need to add ‚Äúpage‚Äù to every highlights. How can rewrite this script to delete ‚Äúpage‚Äù only keep ‚Äúhighlights‚Äù, ‚ÄúTitle‚Äù, ‚ÄúAuthor‚Äù?</p>
<p>Thanks for you time and kind help.</p>
        </div>

        <meta itemprop='headline' content='Send multiple highlights to Readwise in one action'>
          <meta itemprop='keywords' content='actions'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div id='post_2' itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Agile Tortoise, Inc.'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forums.getdrafts.com/uploads/default/original/2X/8/8ed1af80ec826f0860aad768f711c6b1b0fb32b4.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forums.getdrafts.com/u/agiletortoise'><span itemprop='name'>agiletortoise</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="12468.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2022-04-15T13:19:42Z' class='post-time'>
                April 15, 2022,  1:19pm
              </time>
              <meta itemprop='dateModified' content='2022-04-15T13:19:42Z'>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I‚Äôm not terribly familiar with Readwise, and I‚Äôm not sure if the author of that action is on these forums to comment. It appears from a quick once over you would need to adjust the <code>addToRWArray</code> function to not look for and parse out the <code>@Page</code> value, and remove the<code>location_type</code> and <code>location</code> parameters in the call to Readwise‚Äôs API (which are both optional values).</p>
<p>Do you have any scripting experience?</p>
        </div>

        <meta itemprop='headline' content='Send multiple highlights to Readwise in one action'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div id='post_3' itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Agile Tortoise, Inc.'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forums.getdrafts.com/uploads/default/original/2X/8/8ed1af80ec826f0860aad768f711c6b1b0fb32b4.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forums.getdrafts.com/u/bleedingsaber'><span itemprop='name'>bleedingsaber</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="12468.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2022-04-16T02:40:55Z' class='post-time'>
                April 16, 2022,  2:40am
              </time>
              <meta itemprop='dateModified' content='2022-04-16T02:40:55Z'>
          <span itemprop='position'>#3</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Thanks for your help.I don‚Äôt have any coding experience but still try my best to make some adjustments to this action. Luckily, it worked. The author explained the script very well and I just delete some lines. It‚Äôs working for me now. I post it here in case other people want to use.</p>
<p>Use it with this action to add "&gt; " quickly. <a href="../../../actions.getdrafts.com/a/1DE.html" class="inline-onebox" rel="noopener nofollow ugc">Markdown Quotation (&gt;) | Drafts Directory</a></p>
<pre><code class="lang-auto">// Global Variables

let RWArray = [];
let d = draft;

// Get Title &amp; Author

var title = d.displayTitle;
var content = d.content;
let author = content.match("Author: (.*)")[1];

// Get Array of Quotes
var content = d.content;
var passages = content.split("## Quotes")[1];
var passagesArray = passages.split("&gt; ");
passagesArray.shift(); // First entry in array is blank. Get rid of it.

// Create Array of Objects
passagesArray.forEach(addToRWArray);

// Send items to Readwise
sendToReadwise(RWArray);

// Function to create JSON object out of highlight and add it to the final array.
function addToRWArray(item){

    //Create an array with 2 items: the passage and the array
    var highlightArray = item.split("@Page: ");
    //alert("Highlight Array: " + highlightArray);

    
    // Create JSON and add it to array
    var highlightObject = 
    {
        text: highlightArray[0],
        title: title,
        author: author,
    };
    //alert(JSON.stringify(highlightObject));

    RWArray.push(highlightObject);
    // alert({JSON.stringify(RWArray));
}


function sendToReadwise(RWArray) {
    // Create HTTP Request
    var rwToken = "YOUR READWISE TOKEN HERE"; //Get token here: https://readwise.io/access_token
    var http = HTTP.create();

    // Readwise Response
    var response = http.request({
        "url": "https://readwise.io/api/v2/highlights",
        "method": "POST",
        "data": {
        "highlights": RWArray,
        },
        "headers": {
            "Authorization": "Token " + rwToken,
            "Content-Type": "application/json",
        }
    });
}

/* Example Drafts Entry
# Moby Dick
Author: Herman Melville

## Quotes
&gt; Call me Ishmael

&gt; But don't ever call me an octopus.


*/

</code></pre>
        </div>

        <meta itemprop='headline' content='Send multiple highlights to Readwise in one action'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div id='post_4' itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Agile Tortoise, Inc.'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forums.getdrafts.com/uploads/default/original/2X/8/8ed1af80ec826f0860aad768f711c6b1b0fb32b4.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forums.getdrafts.com/u/agiletortoise'><span itemprop='name'>agiletortoise</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="12468.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2022-04-16T02:49:56Z' class='post-time'>
                April 16, 2022,  2:49am
              </time>
              <meta itemprop='dateModified' content='2022-04-16T02:49:56Z'>
          <span itemprop='position'>#4</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Great! Glad you were able to sort it out and thanks for sharing the result.</p>
        </div>

        <meta itemprop='headline' content='Send multiple highlights to Readwise in one action'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>






    </div>
    <footer class="container wrap">
  <nav class='crawler-nav'>
    <ul>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://forums.getdrafts.com/' itemprop="url">Home </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://forums.getdrafts.com/categories' itemprop="url">Categories </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://forums.getdrafts.com/guidelines' itemprop="url">FAQ/Guidelines </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://forums.getdrafts.com/tos' itemprop="url">Terms of Service </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://forums.getdrafts.com/privacy' itemprop="url">Privacy Policy </a>
        </span>
      </li>
    </ul>
  </nav>
  <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
</footer>

    
    
  </body>
  
</html>
