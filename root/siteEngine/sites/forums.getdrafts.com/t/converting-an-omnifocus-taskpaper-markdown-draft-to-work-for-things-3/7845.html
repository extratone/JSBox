<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Converting an Omnifocus Taskpaper Markdown Draft to work for Things 3 - Actions - Help &amp; Questions - Drafts Community</title>
    <meta name="description" content="Hi Drafts community, 
I’m a bit stuck and I was wondering whether anyone here could offer some assistance. 
I used to use Omnifocus and am now slowly transitioning back to Things3 but I have a draft that I use quite ofte&amp;hellip;">
    <meta name="generator" content="Discourse 2.9.0.beta4 - https://github.com/discourse/discourse version f0d46c35493f4d01e4c1f9a3b32f867c1ade595e">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/1X/25837d707e58349c1c1881afc1883055a203ac28_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/7/77d737820f07fbb0e980560a8c341a18432a7d92_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="7845.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forums.getdrafts.com","potentialAction":{"@type":"SearchAction","target":"https://forums.getdrafts.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Drafts Community Search">

    <link href="https://forums.getdrafts.com/stylesheets/color_definitions_base__2_3d1df61a71325940d683ff0221fd14dee6a802e5.css?__ws=forums.getdrafts.com" media="all" rel="stylesheet" class="light-scheme"/><link href="https://forums.getdrafts.com/stylesheets/color_definitions_simple-dark_1_2_ce13c571d5f0d2fac2c7d8164bf57e59bd0aa89f.css?__ws=forums.getdrafts.com" media="(prefers-color-scheme: dark)" rel="stylesheet" class="dark-scheme"/>

  <link href="https://forums.getdrafts.com/stylesheets/desktop_efbc3607260bd3949bf9351692c294020d363176.css?__ws=forums.getdrafts.com" media="all" rel="stylesheet" data-target="desktop"  />


  <link href="https://forums.getdrafts.com/stylesheets/discourse-details_efbc3607260bd3949bf9351692c294020d363176.css?__ws=forums.getdrafts.com" media="all" rel="stylesheet" data-target="discourse-details"  />
  <link href="https://forums.getdrafts.com/stylesheets/discourse-local-dates_efbc3607260bd3949bf9351692c294020d363176.css?__ws=forums.getdrafts.com" media="all" rel="stylesheet" data-target="discourse-local-dates"  />
  <link href="https://forums.getdrafts.com/stylesheets/discourse-narrative-bot_efbc3607260bd3949bf9351692c294020d363176.css?__ws=forums.getdrafts.com" media="all" rel="stylesheet" data-target="discourse-narrative-bot"  />
  <link href="https://forums.getdrafts.com/stylesheets/discourse-presence_efbc3607260bd3949bf9351692c294020d363176.css?__ws=forums.getdrafts.com" media="all" rel="stylesheet" data-target="discourse-presence"  />
  <link href="https://forums.getdrafts.com/stylesheets/lazy-yt_efbc3607260bd3949bf9351692c294020d363176.css?__ws=forums.getdrafts.com" media="all" rel="stylesheet" data-target="lazy-yt"  />
  <link href="https://forums.getdrafts.com/stylesheets/poll_efbc3607260bd3949bf9351692c294020d363176.css?__ws=forums.getdrafts.com" media="all" rel="stylesheet" data-target="poll"  />
  <link href="https://forums.getdrafts.com/stylesheets/poll_desktop_efbc3607260bd3949bf9351692c294020d363176.css?__ws=forums.getdrafts.com" media="all" rel="stylesheet" data-target="poll_desktop"  />

  <link href="https://forums.getdrafts.com/stylesheets/desktop_theme_2_8a6535adb5ffcb37b246b8087d7136cfbc597ca9.css?__ws=forums.getdrafts.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2" data-theme-name="default"/>

    
    
        <link rel="alternate nofollow" type="application/rss+xml" title="RSS feed of &#39;Converting an Omnifocus Taskpaper Markdown Draft to work for Things 3&#39;" href="7845.rss" />
    <meta property="og:site_name" content="Drafts Community" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forums.getdrafts.com/uploads/default/optimized/2X/5/57a975bcfdfccfc62d7f19acb3385601f8de0ba5_2_473x1024.png" />
<meta property="og:image" content="https://forums.getdrafts.com/uploads/default/optimized/2X/5/57a975bcfdfccfc62d7f19acb3385601f8de0ba5_2_473x1024.png" />
<meta property="og:url" content="https://forums.getdrafts.com/t/converting-an-omnifocus-taskpaper-markdown-draft-to-work-for-things-3/7845" />
<meta name="twitter:url" content="https://forums.getdrafts.com/t/converting-an-omnifocus-taskpaper-markdown-draft-to-work-for-things-3/7845" />
<meta property="og:title" content="Converting an Omnifocus Taskpaper Markdown Draft to work for Things 3" />
<meta name="twitter:title" content="Converting an Omnifocus Taskpaper Markdown Draft to work for Things 3" />
<meta property="og:description" content="Hi Drafts community,  I’m a bit stuck and I was wondering whether anyone here could offer some assistance.  I used to use Omnifocus and am now slowly transitioning back to Things3 but I have a draft that I use quite often which I managed to get working for Omnifocus but I have no idea how to do it for Things3.  I would be incredibly grateful if anyone has any input for how to adapt it for Things3 compatibility.  It is written in javascript and basically parses my meeting notes template in drafts..." />
<meta name="twitter:description" content="Hi Drafts community,  I’m a bit stuck and I was wondering whether anyone here could offer some assistance.  I used to use Omnifocus and am now slowly transitioning back to Things3 but I have a draft that I use quite often which I managed to get working for Omnifocus but I have no idea how to do it for Things3.  I would be incredibly grateful if anyone has any input for how to adapt it for Things3 compatibility.  It is written in javascript and basically parses my meeting notes template in drafts..." />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="1 mins 🕑" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="2 ❤" />
<meta property="article:published_time" content="2020-07-04T22:42:29+00:00" />
<meta property="og:ignore_canonical" content="true" />


    
  </head>
  <body class="crawler">
    
    <header>
  <a href="https://forums.getdrafts.com/">
    <h1>Drafts Community</h1>
  </a>
</header>

    <div id="main-outlet" class="wrap" role="main">
        <div id="topic-title">
    <h1>
      <a href="7845.html">Converting an Omnifocus Taskpaper Markdown Draft to work for Things 3</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="../../c/actions.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #652D90'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Actions - Help &amp; Questions</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

      <div class="topic-category">
        <div class='discourse-tags list-tags'>
            <a href='../../tag/things.html' class='discourse-tag' rel="tag">things</a>, 
            <a href='../../tag/actions.html' class='discourse-tag' rel="tag">actions</a>, 
            <a href='../../tag/omnifocus.html' class='discourse-tag' rel="tag">omnifocus</a>
        </div>
      </div>
  </div>

  


      <div id='post_1' itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Agile Tortoise, Inc.'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forums.getdrafts.com/uploads/default/original/2X/8/8ed1af80ec826f0860aad768f711c6b1b0fb32b4.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forums.getdrafts.com/u/nicolo'><span itemprop='name'>nicolo</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7845.html">

            <link itemprop="image" href="../../uploads/default/original/2X/5/57a975bcfdfccfc62d7f19acb3385601f8de0ba5.png">

          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-07-04T22:42:29Z' class='post-time'>
                July 4, 2020, 10:42pm
              </time>
              <meta itemprop='dateModified' content='2020-07-05T09:13:50Z'>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Hi Drafts community,</p>
<p>I’m a bit stuck and I was wondering whether anyone here could offer some assistance.<br>
I used to use Omnifocus and am now slowly transitioning back to Things3 but I have a draft that I use quite often which I managed to get working for Omnifocus but I have no idea how to do it for Things3.</p>
<p>I would be incredibly grateful if anyone has any input for how to adapt it for Things3 compatibility.</p>
<p>It is written in javascript and basically parses my meeting notes template in drafts and picks out all markdown tasks and then copies them into Omnifocus (I think in taskpaper format) so in the following document it would pull out Task 1 and add the tag “Meeting Action” to it:</p>
<pre><code class="lang-auto"># Meeting Notes

## Actions
- [ ] Task 1

## Content
Bla bla bla 
</code></pre>
<p>So essentially if anyone knows a quick fix for adapting it or would be willing to help me out real quick I would be infinitely grateful. I don’t really know javascript too well but if anyone can help me out I’m willing to tip for your time as this is really invaluable to my workflow.</p>
<p>This is the current code I’m using and a screenshot of my usage:</p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="../../uploads/default/original/2X/5/57a975bcfdfccfc62d7f19acb3385601f8de0ba5.png" data-download-href="https://forums.getdrafts.com/uploads/default/57a975bcfdfccfc62d7f19acb3385601f8de0ba5" title="Image"><img src="../../uploads/default/optimized/2X/5/57a975bcfdfccfc62d7f19acb3385601f8de0ba5_2_231x500.png" alt="Image" data-base62-sha1="cvuBzVZc5Cotlgr1ji6OasQjVNX" width="231" height="500" srcset="../../uploads/default/optimized/2X/5/57a975bcfdfccfc62d7f19acb3385601f8de0ba5_2_231x500.png, ../../uploads/default/optimized/2X/5/57a975bcfdfccfc62d7f19acb3385601f8de0ba5_2_346x750.png 1.5x, ../../uploads/default/optimized/2X/5/57a975bcfdfccfc62d7f19acb3385601f8de0ba5_2_462x1000.png 2x" data-small-upload="https://forums.getdrafts.com/uploads/default/optimized/2X/5/57a975bcfdfccfc62d7f19acb3385601f8de0ba5_2_10x10.png"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use xlink:href="#far-image"></use></svg><span class="filename">Image</span><span class="informations">828×1792 111 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use xlink:href="#discourse-expand"></use></svg></div></a></div></p>
<pre><code class="lang-auto">let taskpaper = '';
draft.content.split("\n").forEach(function(line){
	if (line.startsWith('- [ ]')) {
		taskpaper += "Meeting Task: " + line.replace('[ ]', '') + " @tags(Meeting Action 🎙)\n";
	}
});

const baseURL = "omnifocus://x-callback-url/paste";
let cb = CallbackURL.create();
cb.baseURL = baseURL;
cb.addParameter("content", taskpaper.trim());
cb.open();

</code></pre>
        </div>

        <meta itemprop='headline' content='Converting an Omnifocus Taskpaper Markdown Draft to work for Things 3'>
          <meta itemprop='keywords' content='things, actions, omnifocus'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div id='post_2' itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Agile Tortoise, Inc.'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forums.getdrafts.com/uploads/default/original/2X/8/8ed1af80ec826f0860aad768f711c6b1b0fb32b4.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forums.getdrafts.com/u/cpac'><span itemprop='name'>cpac</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7845.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-07-05T14:49:44Z' class='post-time'>
                July 5, 2020,  2:49pm
              </time>
              <meta itemprop='dateModified' content='2020-07-05T14:49:44Z'>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Hi Nicolo,</p>
<p>It shouldn’t be too hard to adapt your action for use with Things.</p>
<p>You’ll want to look at the <a href="../../../scripting.getdrafts.com/classes/tjscontainer.html" rel="nofollow noopener">TJSContainer</a> object in the Drafts scripting guide. (TJS stands for Things Javascript).</p>
<p>Us a TJS container to build up your tasks instead of the callback URL in your current script and you should be golden.</p>
        </div>

        <meta itemprop='headline' content='Converting an Omnifocus Taskpaper Markdown Draft to work for Things 3'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div id='post_3' itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Agile Tortoise, Inc.'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forums.getdrafts.com/uploads/default/original/2X/8/8ed1af80ec826f0860aad768f711c6b1b0fb32b4.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forums.getdrafts.com/u/nicolo'><span itemprop='name'>nicolo</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7845.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-07-05T14:53:16Z' class='post-time'>
                July 5, 2020,  2:53pm
              </time>
              <meta itemprop='dateModified' content='2020-07-05T14:53:16Z'>
          <span itemprop='position'>#3</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Hi Cpac,</p>
<p>That actually looks really good! I’ll give this a go when I get home, I’m not great at javascript but this seems pretty straight forward <img src="../../images/emoji/apple/blush.png@v=9" title=":blush:" class="emoji" alt=":blush:"></p>
<p>Thanks so much!</p>
        </div>

        <meta itemprop='headline' content='Converting an Omnifocus Taskpaper Markdown Draft to work for Things 3'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div id='post_4' itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Agile Tortoise, Inc.'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forums.getdrafts.com/uploads/default/original/2X/8/8ed1af80ec826f0860aad768f711c6b1b0fb32b4.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forums.getdrafts.com/u/nicolo'><span itemprop='name'>nicolo</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="7845.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-07-05T17:36:08Z' class='post-time'>
                July 5, 2020,  5:36pm
              </time>
              <meta itemprop='dateModified' content='2020-07-05T17:36:08Z'>
          <span itemprop='position'>#4</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>For reference, I ended up using the following code to achieve my goals and it worked perfectly <img src="../../images/emoji/apple/slight_smile.png@v=9" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
<pre><code class="lang-auto">var content = editor.getText();
var check = content.length;
var taskList = "";

if (content.length == 0) {
alert("Draft is blank");
context.cancel("Draft was blank");
}

// Call API for each line in a draft
// split draft and loop over lines
var lines = content.split("\n");

var thingsTask = Array();

for (var line of lines) {
if (line.startsWith("- [ ]")) {
task = line.replace("- [ ]", "").trim();
temp = TJSTodo.create();
temp.title = task;
temp.tags = ["Meeting Action 🎙"];
thingsTask.push(temp);
taskList += task + "\n";
//content = content.replace(line + "\n", "");
}
}

if (thingsTask.length) {
var container = TJSContainer.create(thingsTask);
var cb = CallbackURL.create();
cb.baseURL = container.url;
var success = cb.open();
if (success) {
console.log("Tasks created in Things");
content = content + "\n\nTasks collected:\n" + taskList;
editor.setText(content);
} else {
context.fail();
}
}
</code></pre>
        </div>

        <meta itemprop='headline' content='Converting an Omnifocus Taskpaper Markdown Draft to work for Things 3'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>






    </div>
    <footer class="container wrap">
  <nav class='crawler-nav'>
    <ul>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://forums.getdrafts.com/' itemprop="url">Home </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://forums.getdrafts.com/categories' itemprop="url">Categories </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://forums.getdrafts.com/guidelines' itemprop="url">FAQ/Guidelines </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://forums.getdrafts.com/tos' itemprop="url">Terms of Service </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://forums.getdrafts.com/privacy' itemprop="url">Privacy Policy </a>
        </span>
      </li>
    </ul>
  </nav>
  <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
</footer>

    
    
  </body>
  
</html>
