<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Accessing Variable Values from Scripted Prompts - Scripting - Drafts Community</title>
    <meta name="description" content="I am struggling to use a prompt to create a draft. I can set up multiple prompts one after another, but my preference would be to gather them all on one form and go through them part by part. I have been playing around w&amp;hellip;">
    <meta name="generator" content="Discourse 2.9.0.beta4 - https://github.com/discourse/discourse version f0d46c35493f4d01e4c1f9a3b32f867c1ade595e">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/1X/25837d707e58349c1c1881afc1883055a203ac28_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/7/77d737820f07fbb0e980560a8c341a18432a7d92_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="9702.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forums.getdrafts.com","potentialAction":{"@type":"SearchAction","target":"https://forums.getdrafts.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Drafts Community Search">

    <link href="https://forums.getdrafts.com/stylesheets/color_definitions_base__2_3d1df61a71325940d683ff0221fd14dee6a802e5.css?__ws=forums.getdrafts.com" media="all" rel="stylesheet" class="light-scheme"/><link href="https://forums.getdrafts.com/stylesheets/color_definitions_simple-dark_1_2_ce13c571d5f0d2fac2c7d8164bf57e59bd0aa89f.css?__ws=forums.getdrafts.com" media="(prefers-color-scheme: dark)" rel="stylesheet" class="dark-scheme"/>

  <link href="https://forums.getdrafts.com/stylesheets/desktop_efbc3607260bd3949bf9351692c294020d363176.css?__ws=forums.getdrafts.com" media="all" rel="stylesheet" data-target="desktop"  />


  <link href="https://forums.getdrafts.com/stylesheets/discourse-details_efbc3607260bd3949bf9351692c294020d363176.css?__ws=forums.getdrafts.com" media="all" rel="stylesheet" data-target="discourse-details"  />
  <link href="https://forums.getdrafts.com/stylesheets/discourse-local-dates_efbc3607260bd3949bf9351692c294020d363176.css?__ws=forums.getdrafts.com" media="all" rel="stylesheet" data-target="discourse-local-dates"  />
  <link href="https://forums.getdrafts.com/stylesheets/discourse-narrative-bot_efbc3607260bd3949bf9351692c294020d363176.css?__ws=forums.getdrafts.com" media="all" rel="stylesheet" data-target="discourse-narrative-bot"  />
  <link href="https://forums.getdrafts.com/stylesheets/discourse-presence_efbc3607260bd3949bf9351692c294020d363176.css?__ws=forums.getdrafts.com" media="all" rel="stylesheet" data-target="discourse-presence"  />
  <link href="https://forums.getdrafts.com/stylesheets/lazy-yt_efbc3607260bd3949bf9351692c294020d363176.css?__ws=forums.getdrafts.com" media="all" rel="stylesheet" data-target="lazy-yt"  />
  <link href="https://forums.getdrafts.com/stylesheets/poll_efbc3607260bd3949bf9351692c294020d363176.css?__ws=forums.getdrafts.com" media="all" rel="stylesheet" data-target="poll"  />
  <link href="https://forums.getdrafts.com/stylesheets/poll_desktop_efbc3607260bd3949bf9351692c294020d363176.css?__ws=forums.getdrafts.com" media="all" rel="stylesheet" data-target="poll_desktop"  />

  <link href="https://forums.getdrafts.com/stylesheets/desktop_theme_2_8a6535adb5ffcb37b246b8087d7136cfbc597ca9.css?__ws=forums.getdrafts.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2" data-theme-name="default"/>

    
    
        <link rel="alternate nofollow" type="application/rss+xml" title="RSS feed of &#39;Accessing Variable Values from Scripted Prompts&#39;" href="9702.rss" />
    <meta property="og:site_name" content="Drafts Community" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://forums.getdrafts.com/uploads/default/original/2X/8/8028b40b2b5c46fe6a21aa3e1b9480b911b845df.png" />
<meta property="og:image" content="https://forums.getdrafts.com/uploads/default/original/2X/8/8028b40b2b5c46fe6a21aa3e1b9480b911b845df.png" />
<meta property="og:url" content="https://forums.getdrafts.com/t/accessing-variable-values-from-scripted-prompts/9702" />
<meta name="twitter:url" content="https://forums.getdrafts.com/t/accessing-variable-values-from-scripted-prompts/9702" />
<meta property="og:title" content="Accessing Variable Values from Scripted Prompts" />
<meta name="twitter:title" content="Accessing Variable Values from Scripted Prompts" />
<meta property="og:description" content="I am struggling to use a prompt to create a draft. I can set up multiple prompts one after another, but my preference would be to gather them all on one form and go through them part by part. I have been playing around with a lot of ideas. I tried the Mustache Prompt method, but I would like more control over how the prompt appears like I can if I script it myself.  For getting the text into the actual draft, I have looked into both template strings/literals and I have also tried setTemplateTag...." />
<meta name="twitter:description" content="I am struggling to use a prompt to create a draft. I can set up multiple prompts one after another, but my preference would be to gather them all on one form and go through them part by part. I have been playing around with a lot of ideas. I tried the Mustache Prompt method, but I would like more control over how the prompt appears like I can if I script it myself.  For getting the text into the actual draft, I have looked into both template strings/literals and I have also tried setTemplateTag...." />
<meta property="article:published_time" content="2021-01-28T07:02:18+00:00" />
<meta property="og:ignore_canonical" content="true" />


    
  </head>
  <body class="crawler">
    
    <header>
  <a href="https://forums.getdrafts.com/">
    <h1>Drafts Community</h1>
  </a>
</header>

    <div id="main-outlet" class="wrap" role="main">
        <div id="topic-title">
    <h1>
      <a href="9702.html">Accessing Variable Values from Scripted Prompts</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://forums.getdrafts.com/c/scripting/13" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #AB9364'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Scripting</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

      <div class="topic-category">
        <div class='discourse-tags list-tags'>
            <a href='../../tag/templates.html' class='discourse-tag' rel="tag">templates</a>
        </div>
      </div>
  </div>

  


      <div id='post_1' itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Agile Tortoise, Inc.'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forums.getdrafts.com/uploads/default/original/2X/8/8ed1af80ec826f0860aad768f711c6b1b0fb32b4.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forums.getdrafts.com/u/Campjacob'><span itemprop='name'>Campjacob</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9702.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-01-28T07:02:18Z' class='post-time'>
                January 28, 2021,  7:02am
              </time>
              <meta itemprop='dateModified' content='2021-01-28T07:02:18Z'>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I am struggling to use a prompt to create a draft. I can set up multiple prompts one after another, but my preference would be to gather them all on one form and go through them part by part. I have been playing around with a lot of ideas. I tried the <a href="../../../actions.getdrafts.com/a/1fT.html" rel="noopener nofollow ugc">Mustache Prompt</a> method, but I would like more control over how the prompt appears like I can if I script it myself.</p>
<p>For getting the text into the actual draft, I have looked into both <a href="../long-text-prompt-variables/7914/2.html">template strings/literals</a> and I have also tried <code>setTemplateTag</code>. My problem is that I don’t know how to access the value of the prompt text field.</p>
<p>Below is a minimal example of my plan. I think if I understand how to access the value for one <code>addTextField</code>, I can duplicate that for my other <code>addTextField</code> and <code>addPicker</code>. I could find an example I was able to adapt of the <code>setTemplateTag</code> to tell if I was getting results and had it formatted correctly.</p>
<pre><code class="lang-auto">
// Minimal Code Example

var p = Prompt.create();

p.title = "Title";
p.message = "Description";
p.addTextField("textFieldVariable", "Text Field Variable: ", "");

isCancellable: true;
p.addButton("Ok");

var didSelect = p.show();

// create template
const template = `# Title of the draft
Insert info from prompt...

${textFieldVariable}
or
[[textFieldVariable]]

`;

// create the draft
var d = Draft.create();
d.content = d.processTemplate(template);
d.update()

// load in editor and focus for editing
editor.load(d);
editor.activate()

</code></pre>
<p>Would it be better to use the template strings or <code>setTemplateTag</code>? Would anybody be able to help show me how to format my script to add it into a new draft?</p>
        </div>

        <meta itemprop='headline' content='Accessing Variable Values from Scripted Prompts'>
          <meta itemprop='keywords' content='templates'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div id='post_2' itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Agile Tortoise, Inc.'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forums.getdrafts.com/uploads/default/original/2X/8/8ed1af80ec826f0860aad768f711c6b1b0fb32b4.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forums.getdrafts.com/u/sylumer'><span itemprop='name'>sylumer</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9702.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-01-28T08:07:24Z' class='post-time'>
                January 28, 2021,  8:07am
              </time>
              <meta itemprop='dateModified' content='2021-01-28T08:07:24Z'>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>This seems to me to be the simplest option.</p>
<pre><code class="lang-auto">let p = Prompt.create();
p.title = "Title";
p.message = "Description";
p.addTextField("textFieldVariable", "Text Field Variable: ", "");
p.isCancellable = true;
p.addButton("OK");

if (p.show())
{
	// create the draft
	let d = Draft.create();
	d.content = `# Title of the draft
Insert info from prompt...

${p.fieldValues["textFieldVariable"]}`;
	d.update();

	// load in editor and focus for editing
	editor.load(d);
	editor.activate();
}
</code></pre>
<p>You might also want to take a look at this action from Greg for some tips.</p>
<p><a href="../../../actions.getdrafts.com/a/1OV.html" class="onebox" target="_blank" rel="noopener">https://actions.getdrafts.com/a/1OV</a></p>
<p>I would also suggest looking into HTML prompts if you want even more control over your capture prompt.</p>
<p>Hope that helps.</p>
        </div>

        <meta itemprop='headline' content='Accessing Variable Values from Scripted Prompts'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div id='post_3' itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Agile Tortoise, Inc.'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forums.getdrafts.com/uploads/default/original/2X/8/8ed1af80ec826f0860aad768f711c6b1b0fb32b4.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forums.getdrafts.com/u/Campjacob'><span itemprop='name'>Campjacob</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="9702.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-01-28T19:11:40Z' class='post-time'>
                January 28, 2021,  7:11pm
              </time>
              <meta itemprop='dateModified' content='2021-01-28T19:11:40Z'>
          <span itemprop='position'>#3</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Thank you so much for the help. The idea of HTML prompts is interesting, but I think I will need to wait for that. I’ve already probably used too much time on this. I was able to make this concept work. I figured I would share the full working code for my action in case it helps anybody. I will say that I have no real skill with JavaScript and just bang my head against my keyboard trying variations until something works. That being said, this is probably not the most beautiful code ever.</p>
<p>First, a little background: I’m working on my Ph.D. currently. With buying a new M1 MacbookAir, I’ve been more heavily relying on MacOS. I had a shortcut that created this same file in drafts for me. It also uses DataJar to pull the Arrays that I use, and I don’t like having to “hard code” them into my script, but until I make a plan for what to do about not currently having access to DataJar on MacOS, this might be what I do.</p>
<p>The way I do my academic writing is that the first line of a draft is the document’s title. The second line of the draft is the folder where I will save it. I have an action that will convert my markdown to HTML, and I can post discussion replies to our Canvas. After completing and publishing my discussion, I can later process it and decide if I need to do anything else with the text or save a version in my OneDrive account.</p>
<p>The code creates a prompt that has some pickers and a text field for my classes. It sets up the file name/folder variables, along with some data that I want to save as <a href="https://en.wikipedia.org/wiki/YAML" rel="noopener nofollow ugc">YAML</a> metadata. I had to use <code>if(){}</code>, <code>if else(){}</code> statements to determine the array number of the selected response and provide text for the <code>addPicker()</code>. It also splits one of the variables so that my metadata can have separate data about the <em>Course ID</em> and <em>Course Title</em>.</p>
<p>It creates a new draft with a template pulling the variables gathered from the prompt. The draft processes itself again to use other templates (e.g., the date). It also adds tags. I separate my tags by category (i.e., "l - " is a location or area of my life, "a - " is an action, and "s - " is a status).</p>
<p>Anyways, I hope that my banging my head against my keyboard is useful for others.</p>
<pre><code class="lang-auto">//  Template Set Up for new writing projects for classes

//  Create Prompt

var p = Prompt.create();
p.title = "CIIS New Writing Project";
p.message = "Fill in form to create new CIIS writing project.";

p.addPicker("pickerCourseDescription", "Course: ", [["Reverse Imagineering", "Methodology Comprehensive Examination", "Literature Review Comprehensive Exam", "Learning Community IV"]], [0]);
p.addPicker("pickerLocation", "Location: ", [["Personal Journal Space", "Research Journal", "Small Group Discussion", "Large Group Discussion", "Paper", "Document"]], [3])
p.addTextField("textFieldTopic", "Topic: ", "");

isCancellable: true;
p.addButton("Ok");

if (p.show())

// Set up frontmatter and project variables

var topic = p.fieldValues["textFieldTopic"];

// Course variable
var courseIDandTitle;
if (p.fieldValues["pickerCourseDescription"] == "0") {
	courseIDandTitle = "TSD 6137 - Reverse Imagineering";
} else if (p.fieldValues["pickerCourseDescription"] == "1") {
	courseIDandTitle = "TSD 9611 - Methodology Comprehensive Examination";
} else if (p.fieldValues["pickerCourseDescription"] == "2") {
	courseIDandTitle = "TSD 9610 - Literature Review Comprehensive Exam";
} else if (p.fieldValues["pickerCourseDescription"] == "3") {
	courseIDandTitle = "TSD 8420 - Learning Community IV";
} else {
	courseIDandTitle = "There is an error in pickerCourseDescription";
}

// Split Course ID and Title Variable

var res = courseIDandTitle.split(" - ");
var courseID = res[0];
var courseTitle = res[1];


// Location variable
var location;
if (p.fieldValues["pickerLocation"] == "0") {
	location = "Personal Journal Space";
} else if (p.fieldValues["pickerLocation"] == "1") {
	location = "Research Journal";
} else if (p.fieldValues["pickerLocation"] == "2") {
	location = "Small Group Discussion";
} else if (p.fieldValues["pickerLocation"] == "3") {
	location = "Large Group Discussion";
} else if (p.fieldValues["pickerLocation"] == "4") {
	location = "Paper";
} else if (p.fieldValues["pickerLocation"] == "5") {
	location = "Document";
} else {
	location = "There is an error in pickerLocation";
}

{
	
	// create the draft
	let d = Draft.create();
	d.content = `[[date]], ${location} Topic - ${topic}
${courseIDandTitle}
---
Course ID: ${courseID}  
Course Title: ${courseTitle}  
Date: [[date]]  
Location: ${location}  
Topic: ${topic}  

---

# ${location} Topic

**Topic**: ${topic}  
**Date**: [[date|%m/%d/%Y]]  
**Title**: 

---


`;

wholeContent = d.content;
d.content = d.processTemplate(wholeContent);
d.addTag("l - ciis");
d.addTag("a - process");
d.addTag("s - draft");
d.update()

// load in editor and focus for editing
editor.load(d);
editor.activate()

}
</code></pre>
        </div>

        <meta itemprop='headline' content='Accessing Variable Values from Scripted Prompts'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>






    </div>
    <footer class="container wrap">
  <nav class='crawler-nav'>
    <ul>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://forums.getdrafts.com/' itemprop="url">Home </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://forums.getdrafts.com/categories' itemprop="url">Categories </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://forums.getdrafts.com/guidelines' itemprop="url">FAQ/Guidelines </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://forums.getdrafts.com/tos' itemprop="url">Terms of Service </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://forums.getdrafts.com/privacy' itemprop="url">Privacy Policy </a>
        </span>
      </li>
    </ul>
  </nav>
  <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
</footer>

    
    
  </body>
  
</html>
