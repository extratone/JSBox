<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>JavaScript beautify only selected text - Drafts Community</title>
    <meta name="description" content="Hi there, 
The TAD library contains an action that beautifys the whole draft. I copied and modified it so that it only works on the selected text, but this causes Drafts to crash sometimes.  Here‚Äôs the relevant code: 
  &amp;hellip;">
    <meta name="generator" content="Discourse 2.9.0.beta4 - https://github.com/discourse/discourse version f0d46c35493f4d01e4c1f9a3b32f867c1ade595e">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/1X/25837d707e58349c1c1881afc1883055a203ac28_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/7/77d737820f07fbb0e980560a8c341a18432a7d92_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="8812.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forums.getdrafts.com","potentialAction":{"@type":"SearchAction","target":"https://forums.getdrafts.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Drafts Community Search">

    <link href="https://forums.getdrafts.com/stylesheets/color_definitions_base__2_3d1df61a71325940d683ff0221fd14dee6a802e5.css?__ws=forums.getdrafts.com" media="all" rel="stylesheet" class="light-scheme"/><link href="https://forums.getdrafts.com/stylesheets/color_definitions_simple-dark_1_2_ce13c571d5f0d2fac2c7d8164bf57e59bd0aa89f.css?__ws=forums.getdrafts.com" media="(prefers-color-scheme: dark)" rel="stylesheet" class="dark-scheme"/>

  <link href="https://forums.getdrafts.com/stylesheets/desktop_efbc3607260bd3949bf9351692c294020d363176.css?__ws=forums.getdrafts.com" media="all" rel="stylesheet" data-target="desktop"  />


  <link href="https://forums.getdrafts.com/stylesheets/discourse-details_efbc3607260bd3949bf9351692c294020d363176.css?__ws=forums.getdrafts.com" media="all" rel="stylesheet" data-target="discourse-details"  />
  <link href="https://forums.getdrafts.com/stylesheets/discourse-local-dates_efbc3607260bd3949bf9351692c294020d363176.css?__ws=forums.getdrafts.com" media="all" rel="stylesheet" data-target="discourse-local-dates"  />
  <link href="https://forums.getdrafts.com/stylesheets/discourse-narrative-bot_efbc3607260bd3949bf9351692c294020d363176.css?__ws=forums.getdrafts.com" media="all" rel="stylesheet" data-target="discourse-narrative-bot"  />
  <link href="https://forums.getdrafts.com/stylesheets/discourse-presence_efbc3607260bd3949bf9351692c294020d363176.css?__ws=forums.getdrafts.com" media="all" rel="stylesheet" data-target="discourse-presence"  />
  <link href="https://forums.getdrafts.com/stylesheets/lazy-yt_efbc3607260bd3949bf9351692c294020d363176.css?__ws=forums.getdrafts.com" media="all" rel="stylesheet" data-target="lazy-yt"  />
  <link href="https://forums.getdrafts.com/stylesheets/poll_efbc3607260bd3949bf9351692c294020d363176.css?__ws=forums.getdrafts.com" media="all" rel="stylesheet" data-target="poll"  />
  <link href="https://forums.getdrafts.com/stylesheets/poll_desktop_efbc3607260bd3949bf9351692c294020d363176.css?__ws=forums.getdrafts.com" media="all" rel="stylesheet" data-target="poll_desktop"  />

  <link href="https://forums.getdrafts.com/stylesheets/desktop_theme_2_8a6535adb5ffcb37b246b8087d7136cfbc597ca9.css?__ws=forums.getdrafts.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2" data-theme-name="default"/>

    
    
        <link rel="alternate nofollow" type="application/rss+xml" title="RSS feed of &#39;JavaScript beautify only selected text&#39;" href="https://forums.getdrafts.com/t/javascript-beautify-only-selected-text/8812.rss" />
    <meta property="og:site_name" content="Drafts Community" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://forums.getdrafts.com/uploads/default/original/2X/8/8028b40b2b5c46fe6a21aa3e1b9480b911b845df.png" />
<meta property="og:image" content="https://forums.getdrafts.com/uploads/default/original/2X/8/8028b40b2b5c46fe6a21aa3e1b9480b911b845df.png" />
<meta property="og:url" content="https://forums.getdrafts.com/t/javascript-beautify-only-selected-text/8812" />
<meta name="twitter:url" content="https://forums.getdrafts.com/t/javascript-beautify-only-selected-text/8812" />
<meta property="og:title" content="JavaScript beautify only selected text" />
<meta name="twitter:title" content="JavaScript beautify only selected text" />
<meta property="og:description" content="Hi there,  The TAD library contains an action that beautifys the whole draft. I copied and modified it so that it only works on the selected text, but this causes Drafts to crash sometimes.  Here‚Äôs the relevant code:     let txt = editor.getSelectedText();    txt = js_beautify(txt, JSON.parse(strContent));    editor.setSelectedText(txt);    draft.update();    return txt;  Does anybody have an idea what might be wrong with this approach? I‚Äôm quite new to Drafts scripting, so it might be something..." />
<meta name="twitter:description" content="Hi there,  The TAD library contains an action that beautifys the whole draft. I copied and modified it so that it only works on the selected text, but this causes Drafts to crash sometimes.  Here‚Äôs the relevant code:     let txt = editor.getSelectedText();    txt = js_beautify(txt, JSON.parse(strContent));    editor.setSelectedText(txt);    draft.update();    return txt;  Does anybody have an idea what might be wrong with this approach? I‚Äôm quite new to Drafts scripting, so it might be something..." />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="3 mins üïë" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="3 ‚ù§" />
<meta property="article:published_time" content="2020-10-18T12:09:31+00:00" />
<meta property="og:ignore_canonical" content="true" />


    
  </head>
  <body class="crawler">
    
    <header>
  <a href="https://forums.getdrafts.com/">
    <h1>Drafts Community</h1>
  </a>
</header>

    <div id="main-outlet" class="wrap" role="main">
        <div id="topic-title">
    <h1>
      <a href="8812.html">JavaScript beautify only selected text</a>
    </h1>


  </div>

  


      <div id='post_1' itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Agile Tortoise, Inc.'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forums.getdrafts.com/uploads/default/original/2X/8/8ed1af80ec826f0860aad768f711c6b1b0fb32b4.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forums.getdrafts.com/u/chrillek'><span itemprop='name'>chrillek</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="8812.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-10-18T12:09:31Z' class='post-time'>
                October 18, 2020, 12:09pm
              </time>
              <meta itemprop='dateModified' content='2020-10-18T12:09:31Z'>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Hi there,<br>
The TAD library contains an action that beautifys the whole draft. I copied and modified it so that it only works on the selected text, but this causes Drafts to crash sometimes.  Here‚Äôs the relevant code:</p>
<pre><code class="lang-auto">   let txt = editor.getSelectedText();
   txt = js_beautify(txt, JSON.parse(strContent));
   editor.setSelectedText(txt);
   draft.update();
   return txt;
</code></pre>
<p>Does anybody have an idea what might be wrong with this approach? I‚Äôm quite new to Drafts scripting, so it might be something quite dumb.</p>
        </div>

        <meta itemprop='headline' content='JavaScript beautify only selected text'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

            <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
                  <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                    <a href="https://forums.getdrafts.com/t/tip-editing-java-script-inside-a-draft/8825/2" itemscope itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                      <meta itemprop='url' content='https://forums.getdrafts.com/t/tip-editing-java-script-inside-a-draft/8825/2'>
                      <span itemprop='name'>[Tip] Editing Java Script inside a Draft</span>
                    </a>
                    <meta itemprop='position' content='1'>
                  </div>
            </div>
      </div>
      <div id='post_2' itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Agile Tortoise, Inc.'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forums.getdrafts.com/uploads/default/original/2X/8/8ed1af80ec826f0860aad768f711c6b1b0fb32b4.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forums.getdrafts.com/u/sylumer'><span itemprop='name'>sylumer</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="8812.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-10-18T12:21:47Z' class='post-time'>
                October 18, 2020, 12:21pm
              </time>
              <meta itemprop='dateModified' content='2020-10-18T12:21:47Z'>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>That‚Äôs rather spooky.  There will actually be a version to do just that in the next release of the library, as well as being able to apply it to any draft - not just the current one. I was documenting it this morning.</p>
<p>Here‚Äôs the string function the library will include.</p>
<pre><code class="lang-auto">// Reformat the string as a JavaScript string.
String.prototype.TA_devBeautifyJS = function()
{
	//Load the beautifier library
	require(tadLib.beautifierLibName + ".js");

	//Attempt to read in any custom settings and beautify the content of the current draft
	let fmCloud = FileManager.createCloud();
	let strSettings = fmCloud.readString("/Library/Scripts/" + tadLib.beautifierSettings + ".json");
	if (typeof strSettings == "undefined")
	{
		//File not found, so we'll call the beautify function on the content without any additional settings.
		app.displayInfoMessage("Using default JS Beautifer settings");
		return js_beautify(this);
	}
	else
	{
		//File found, so pass that in as JSON for some non-default settings.
		app.displayInfoMessage("Using custom JS Beautifer settings");
		return js_beautify(this, JSON.parse(strSettings));
	}
}
</code></pre>
<br>
<p>Then you would call it in this sort of way.</p>
<pre><code class="lang-auto">strFormattedJavaScript = strUnformattedJavaScript.TA_devBeautifyJS();
</code></pre>
<p>Your code has no function definition so it should not require a <code>return</code>.  Similarly you are working with the editor rather than the draft, so there‚Äôs no need to <code>update()</code>. I think therefore the following should suffice.</p>
<pre><code class="lang-auto">editor.setSelectedText(editor.getSelectedText().TA_devBeautifyJS());
</code></pre>
<p>Hope that helps.</p>
        </div>

        <meta itemprop='headline' content='JavaScript beautify only selected text'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="2" />
          </div>

      </div>
      <div id='post_3' itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Agile Tortoise, Inc.'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forums.getdrafts.com/uploads/default/original/2X/8/8ed1af80ec826f0860aad768f711c6b1b0fb32b4.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forums.getdrafts.com/u/jaymf'><span itemprop='name'>jaymf</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="8812.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-10-18T14:00:48Z' class='post-time'>
                October 18, 2020,  2:00pm
              </time>
              <meta itemprop='dateModified' content='2020-10-18T14:00:48Z'>
          <span itemprop='position'>#3</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Would either of you mind pointing to the original TAD script?</p>
        </div>

        <meta itemprop='headline' content='JavaScript beautify only selected text'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div id='post_4' itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Agile Tortoise, Inc.'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forums.getdrafts.com/uploads/default/original/2X/8/8ed1af80ec826f0860aad768f711c6b1b0fb32b4.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forums.getdrafts.com/u/chrillek'><span itemprop='name'>chrillek</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="8812.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-10-18T14:11:41Z' class='post-time'>
                October 18, 2020,  2:11pm
              </time>
              <meta itemprop='dateModified' content='2020-10-18T14:11:41Z'>
          <span itemprop='position'>#4</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Hi,</p>
<p>I couldn‚Äôt actually reproduce this crash later. The <code>return</code> was there because I copied from an actual function definition. Thanks a lot for your answer!<br>
It‚Äôs a cool idea to add this to <code>String</code>, because one can then loop over all the code fence blocks in a document and beautify them one by one.</p>
        </div>

        <meta itemprop='headline' content='JavaScript beautify only selected text'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div id='post_5' itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Agile Tortoise, Inc.'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forums.getdrafts.com/uploads/default/original/2X/8/8ed1af80ec826f0860aad768f711c6b1b0fb32b4.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forums.getdrafts.com/u/chrillek'><span itemprop='name'>chrillek</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="8812.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-10-18T14:11:50Z' class='post-time'>
                October 18, 2020,  2:11pm
              </time>
              <meta itemprop='dateModified' content='2020-10-18T14:11:50Z'>
          <span itemprop='position'>#5</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Here:<br>
</p><aside class="onebox allowlistedgeneric">
  <header class="source">
      <img src="../../uploads/default/original/2X/5/589671206cbd59f5922b38e71c9efbdfccc5d725.png" class="site-icon" width="180" height="180">
      <a href="../../../actions.getdrafts.com/g/1aM.html" target="_blank" rel="noopener nofollow ugc">actions.getdrafts.com</a>
  </header>
  <article class="onebox-body">
    <img src="8812.html" class="thumbnail" width="" height="">

<h3><a href="../../../actions.getdrafts.com/g/1aM.html" target="_blank" rel="noopener nofollow ugc">ThoughtAsylum | Drafts Action Directory</a></h3>



  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

        </div>

        <meta itemprop='headline' content='JavaScript beautify only selected text'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div id='post_6' itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Agile Tortoise, Inc.'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forums.getdrafts.com/uploads/default/original/2X/8/8ed1af80ec826f0860aad768f711c6b1b0fb32b4.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forums.getdrafts.com/u/sylumer'><span itemprop='name'>sylumer</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="8812.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-10-18T14:54:12Z' class='post-time'>
                October 18, 2020,  2:54pm
              </time>
              <meta itemprop='dateModified' content='2020-10-18T14:54:12Z'>
          <span itemprop='position'>#6</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Just to add to the above with a bit more detail, the original function is <a href="https://tadpole.thoughtasylum.com/classes/tadmiscellaneous.html#ta_devbeautifyjsdraft"><code>TadMiscellaneous.TA_devBeautifyJSDraft()</code></a> in the <a href="https://tadpole.thoughtasylum.com">TADpoLe library</a> that is installed in the set-up of the core ThoughtAsylum Action Group.</p>
<p>Since the need to split the ever-growing action group up, the existing action that utilises that function is now in the <em>Scripting</em> section of the <a href="../../../actions.getdrafts.com/g/1ct.html">ThoughtAsylum - Power User</a> action group.  The action is <code>TAD-Beautify JavaScript</code>. It runs the formatting process against the current draft.</p>
<hr>
<p><em>I was actually looking at this so recently because I‚Äôve created a little action to try and help fix unformatted code blocks that come up on the forum.  It was at that point that I realised I‚Äôd put the beautification function under the miscellaneous grouping and that it was for the current draft. Not useful for what I was trying to do, and I guess I hadn‚Äôt tidied that one up enough when I launched the library (I‚Äôd been using the function for quite a couple of years to tidy my own code). It makes much more sense to tie it to a string.  The next update will use the string function above.  There‚Äôs a convenience draft function to process a draft (not necessarily the current one, but it could be), and the miscellaneous one is effectively legacy, but I‚Äôm leaving it in place and it will utilise the other functions instead so I only have one bit of code to maintain.</em></p>
<p><em>I‚Äôm also expecting to tweak it a bit further, so the function above is unlikely be the final version of that code, but any calls to it should effectively function just the same after it is updated. There‚Äôs something I want to include in it to support another Drafts project I‚Äôm working on, but that won‚Äôt be out for a while yet.</em></p>
<hr>
        </div>

        <meta itemprop='headline' content='JavaScript beautify only selected text'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div id='post_7' itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Agile Tortoise, Inc.'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forums.getdrafts.com/uploads/default/original/2X/8/8ed1af80ec826f0860aad768f711c6b1b0fb32b4.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forums.getdrafts.com/u/chrillek'><span itemprop='name'>chrillek</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="8812.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-10-18T15:11:46Z' class='post-time'>
                October 18, 2020,  3:11pm
              </time>
              <meta itemprop='dateModified' content='2020-10-18T15:11:46Z'>
          <span itemprop='position'>#7</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>May I suggest that you put in a note about the beautifier.json file? It is not immediately obvious</p>
<ul>
<li>that that is it‚Äôs name (one has to read the code for that)</li>
<li>where it is located (same)</li>
</ul>
<p>Perhaps it might be possible to not force an extension on the filename? There‚Äôs nothing wrong with .json, the extension is also hidden in the source‚Ä¶ So I‚Äôd rather specify ‚Äúblafoo‚Äù in the config part and be sure that the file ‚Äúblafoo‚Äù is read then having to make sure that it‚Äôs this there and blafoo.json in the filesystem.</p>
<p>A short reference to beautify¬¥s github repository would also be nice so that one can find the info on config file‚Äôs content more easily.</p>
        </div>

        <meta itemprop='headline' content='JavaScript beautify only selected text'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div id='post_8' itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Agile Tortoise, Inc.'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forums.getdrafts.com/uploads/default/original/2X/8/8ed1af80ec826f0860aad768f711c6b1b0fb32b4.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forums.getdrafts.com/u/sylumer'><span itemprop='name'>sylumer</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="8812.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-10-18T15:47:22Z' class='post-time'>
                October 18, 2020,  3:47pm
              </time>
              <meta itemprop='dateModified' content='2020-10-18T15:47:22Z'>
          <span itemprop='position'>#8</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="chrillek" data-post="7" data-topic="8812">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../letter_avatar_proxy/v4/letter/c/e79b87/40.png" class="avatar"> chrillek:</div>
<blockquote>
<p>May I suggest that you put in a note about the beautifier.json file? It is not immediately obvious</p>
<ul>
<li>that that is it‚Äôs name (one has to read the code for that)</li>
<li>where it is located (same)</li>
</ul>
</blockquote>
</aside>
<p>In the <a href="https://tadpole.thoughtasylum.com/classes/tadmiscellaneous.html#ta_devbeautifyjsdraft">documentation for the function</a>, it references that it will use the default settings (as listed in the explicit link to the GitHub default settings) from the library‚Äôs settings if the file specified in the library <code>beautifierSettings</code> property is not present.</p>
<p>i.e. it is not necessarily a file called <code>beautifer.json</code> - that‚Äôs the default name the library comes with, but the user can specify it to be whatever they like.</p>
<p>The settings file is explained in <a href="https://tadpole.thoughtasylum.com/index.html#configuration-file">the configuration file section how-to information on the library home page</a>.</p>
<p>I can see two aspects here that could benefit from additional detail.  The first is the inclusion or exclusion of the file extension; I‚Äôll probably add some code around that as well as something a little more explicit in the documentation (which I‚Äôll add to my working version shortly).  Secondly, the description of the action that currently utilises this could maybe do with some extra referencing.</p>
<aside class="quote no-group" data-username="chrillek" data-post="7" data-topic="8812">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../letter_avatar_proxy/v4/letter/c/e79b87/40.png" class="avatar"> chrillek:</div>
<blockquote>
<p>Perhaps it might be possible to not force an extension on the filename? There‚Äôs nothing wrong with .json, the extension is also hidden in the source‚Ä¶ So I‚Äôd rather specify ‚Äúblafoo‚Äù in the config part and be sure that the file ‚Äúblafoo‚Äù is read then having to make sure that it‚Äôs this there and blafoo.json in the filesystem.</p>
</blockquote>
</aside>
<p>I would argue that storing the file as JSON is preferable, but maybe also specifying it with the extension too.  The file has to be a JSON file, and the JSON extension will allow text editors to readily identify it as JSON format for syntax highlighting and validation. Not making it JSON (but keeping the format) would lose the options around highlighting and validation without the user having to take additional actions.</p>
<aside class="quote no-group" data-username="chrillek" data-post="7" data-topic="8812">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../letter_avatar_proxy/v4/letter/c/e79b87/40.png" class="avatar"> chrillek:</div>
<blockquote>
<p>A short reference to beautify¬¥s github repository would also be nice so that one can find the info on config file‚Äôs content more easily.</p>
</blockquote>
</aside>
<p>That‚Äôs in the function description - both the link to the default settings mentioned above, and a separate one to the GitHub library.</p>
<hr>
<p><em>The additional change I eluded to earlier is to do with the specification of the JSON being passed in and making it easier to vary it, so I‚Äôll keep the above in mind as I work on the amendments.</em></p>
<hr>
        </div>

        <meta itemprop='headline' content='JavaScript beautify only selected text'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div id='post_9' itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Agile Tortoise, Inc.'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forums.getdrafts.com/uploads/default/original/2X/8/8ed1af80ec826f0860aad768f711c6b1b0fb32b4.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forums.getdrafts.com/u/chrillek'><span itemprop='name'>chrillek</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="8812.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-10-18T16:54:14Z' class='post-time'>
                October 18, 2020,  4:54pm
              </time>
              <meta itemprop='dateModified' content='2020-10-18T16:54:14Z'>
          <span itemprop='position'>#9</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="sylumer" data-post="8" data-topic="8812">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/forums.getdrafts.com/sylumer/40/112_2.png" class="avatar"> sylumer:</div>
<blockquote>
<p>In the <a href="https://tadpole.thoughtasylum.com/classes/tadmiscellaneous.html#ta_devbeautifyjsdraft" rel="noopener nofollow ugc">documentation for the function </a>, it references</p>
</blockquote>
</aside>
<p>I have completely overlooked that. And now I found the link in the intro (should have continued to read ‚Ä¶) and got myself an action to open that.<br>
Thanks.</p>
<aside class="quote no-group" data-username="sylumer" data-post="8" data-topic="8812">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/forums.getdrafts.com/sylumer/40/112_2.png" class="avatar"> sylumer:</div>
<blockquote>
<p>I would argue that storing the file as JSON is preferable,</p>
</blockquote>
</aside>
<p>I agree. I just wanted to propose that one specifies the <em>complete</em> file name in the configuration instead of the name <em>without</em> the .json extension. The documentation does not make it clear that ‚Äú.json‚Äù is appended automatically:</p>
<blockquote>
<p>Default setings will be used unless a JSON file is present (name specified by <code>beautifierSettings</code> library property)</p>
</blockquote>
        </div>

        <meta itemprop='headline' content='JavaScript beautify only selected text'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div id='post_10' itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Agile Tortoise, Inc.'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forums.getdrafts.com/uploads/default/original/2X/8/8ed1af80ec826f0860aad768f711c6b1b0fb32b4.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forums.getdrafts.com/u/sylumer'><span itemprop='name'>sylumer</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="8812.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-10-18T19:28:40Z' class='post-time'>
                October 18, 2020,  7:28pm
              </time>
              <meta itemprop='dateModified' content='2020-10-18T19:28:40Z'>
          <span itemprop='position'>#10</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="chrillek" data-post="9" data-topic="8812">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../letter_avatar_proxy/v4/letter/c/e79b87/40.png" class="avatar"> chrillek:</div>
<blockquote>
<p>I just wanted to propose that one specifies the <em>complete</em> file name in the configuration instead of the name <em>without</em> the .json extension.</p>
</blockquote>
</aside>
<p>That‚Äôs in there now for the next update. It will accept with or without, but will use a revised default of  with.</p>
<p>Not exactly sure when it will be pushed out. I would like to get a few more things off the to-do list and on the done  list before I put the next update out.</p>
        </div>

        <meta itemprop='headline' content='JavaScript beautify only selected text'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>






    </div>
    <footer class="container wrap">
  <nav class='crawler-nav'>
    <ul>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://forums.getdrafts.com/' itemprop="url">Home </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://forums.getdrafts.com/categories' itemprop="url">Categories </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://forums.getdrafts.com/guidelines' itemprop="url">FAQ/Guidelines </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://forums.getdrafts.com/tos' itemprop="url">Terms of Service </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://forums.getdrafts.com/privacy' itemprop="url">Privacy Policy </a>
        </span>
      </li>
    </ul>
  </nav>
  <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
</footer>

    
    
  </body>
  
</html>
