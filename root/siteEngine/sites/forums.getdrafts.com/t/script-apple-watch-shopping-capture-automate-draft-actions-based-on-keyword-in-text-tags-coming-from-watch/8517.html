<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Script: Apple watch shopping capture: automate draft actions based on keyword in text/tags coming from watch? - actions - Drafts Community</title>
    <meta name="description" content="Hi all 
So I use drafts for everything (no surprises here :)) and one thing that takes a lot of manual work is dealing with shopping items. 
I cant use drafts for shopping lists (since i need to share them with wife and &amp;hellip;">
    <meta name="generator" content="Discourse 2.9.0.beta4 - https://github.com/discourse/discourse version f0d46c35493f4d01e4c1f9a3b32f867c1ade595e">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/1X/25837d707e58349c1c1881afc1883055a203ac28_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/2X/7/77d737820f07fbb0e980560a8c341a18432a7d92_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="8517.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forums.getdrafts.com","potentialAction":{"@type":"SearchAction","target":"https://forums.getdrafts.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Drafts Community Search">

    <link href="https://forums.getdrafts.com/stylesheets/color_definitions_base__2_3d1df61a71325940d683ff0221fd14dee6a802e5.css?__ws=forums.getdrafts.com" media="all" rel="stylesheet" class="light-scheme"/><link href="https://forums.getdrafts.com/stylesheets/color_definitions_simple-dark_1_2_ce13c571d5f0d2fac2c7d8164bf57e59bd0aa89f.css?__ws=forums.getdrafts.com" media="(prefers-color-scheme: dark)" rel="stylesheet" class="dark-scheme"/>

  <link href="https://forums.getdrafts.com/stylesheets/desktop_efbc3607260bd3949bf9351692c294020d363176.css?__ws=forums.getdrafts.com" media="all" rel="stylesheet" data-target="desktop"  />


  <link href="https://forums.getdrafts.com/stylesheets/discourse-details_efbc3607260bd3949bf9351692c294020d363176.css?__ws=forums.getdrafts.com" media="all" rel="stylesheet" data-target="discourse-details"  />
  <link href="https://forums.getdrafts.com/stylesheets/discourse-local-dates_efbc3607260bd3949bf9351692c294020d363176.css?__ws=forums.getdrafts.com" media="all" rel="stylesheet" data-target="discourse-local-dates"  />
  <link href="https://forums.getdrafts.com/stylesheets/discourse-narrative-bot_efbc3607260bd3949bf9351692c294020d363176.css?__ws=forums.getdrafts.com" media="all" rel="stylesheet" data-target="discourse-narrative-bot"  />
  <link href="https://forums.getdrafts.com/stylesheets/discourse-presence_efbc3607260bd3949bf9351692c294020d363176.css?__ws=forums.getdrafts.com" media="all" rel="stylesheet" data-target="discourse-presence"  />
  <link href="https://forums.getdrafts.com/stylesheets/lazy-yt_efbc3607260bd3949bf9351692c294020d363176.css?__ws=forums.getdrafts.com" media="all" rel="stylesheet" data-target="lazy-yt"  />
  <link href="https://forums.getdrafts.com/stylesheets/poll_efbc3607260bd3949bf9351692c294020d363176.css?__ws=forums.getdrafts.com" media="all" rel="stylesheet" data-target="poll"  />
  <link href="https://forums.getdrafts.com/stylesheets/poll_desktop_efbc3607260bd3949bf9351692c294020d363176.css?__ws=forums.getdrafts.com" media="all" rel="stylesheet" data-target="poll_desktop"  />

  <link href="https://forums.getdrafts.com/stylesheets/desktop_theme_2_8a6535adb5ffcb37b246b8087d7136cfbc597ca9.css?__ws=forums.getdrafts.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2" data-theme-name="default"/>

    
    
        <link rel="alternate nofollow" type="application/rss+xml" title="RSS feed of &#39;Script: Apple watch shopping capture: automate draft actions based on keyword in text/tags coming from watch?&#39;" href="https://forums.getdrafts.com/t/script-apple-watch-shopping-capture-automate-draft-actions-based-on-keyword-in-text-tags-coming-from-watch/8517.rss" />
    <meta property="og:site_name" content="Drafts Community" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forums.getdrafts.com/uploads/default/original/2X/1/16085c936c67d8ae6a5d8ce22b6140c7f106a9a5.png" />
<meta property="og:image" content="https://forums.getdrafts.com/uploads/default/original/2X/1/16085c936c67d8ae6a5d8ce22b6140c7f106a9a5.png" />
<meta property="og:url" content="https://forums.getdrafts.com/t/script-apple-watch-shopping-capture-automate-draft-actions-based-on-keyword-in-text-tags-coming-from-watch/8517" />
<meta name="twitter:url" content="https://forums.getdrafts.com/t/script-apple-watch-shopping-capture-automate-draft-actions-based-on-keyword-in-text-tags-coming-from-watch/8517" />
<meta property="og:title" content="Script: Apple watch shopping capture: automate draft actions based on keyword in text/tags coming from watch?" />
<meta name="twitter:title" content="Script: Apple watch shopping capture: automate draft actions based on keyword in text/tags coming from watch?" />
<meta property="og:description" content="Hi all  So I use drafts for everything (no surprises here :)) and one thing that takes a lot of manual work is dealing with shopping items.  I cant use drafts for shopping lists (since i need to share them with wife and kids) and thus i use apple reminders. The actions List in reminders is perfect for that.  the ‚Äúproblem‚Äù (1st world problems‚Ä¶ üôÇ ) is that i use quick capture for shopping items from the drafts app on my watch each time i remember an item so i end up with 5-6 separate ..." />
<meta name="twitter:description" content="Hi all  So I use drafts for everything (no surprises here :)) and one thing that takes a lot of manual work is dealing with shopping items.  I cant use drafts for shopping lists (since i need to share them with wife and kids) and thus i use apple reminders. The actions List in reminders is perfect for that.  the ‚Äúproblem‚Äù (1st world problems‚Ä¶ üôÇ ) is that i use quick capture for shopping items from the drafts app on my watch each time i remember an item so i end up with 5-6 separate ..." />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="3 mins üïë" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="2 ‚ù§" />
<meta property="article:published_time" content="2020-09-24T05:41:39+00:00" />
<meta property="og:ignore_canonical" content="true" />


    
  </head>
  <body class="crawler">
    
    <header>
  <a href="https://forums.getdrafts.com/">
    <h1>Drafts Community</h1>
  </a>
</header>

    <div id="main-outlet" class="wrap" role="main">
        <div id="topic-title">
    <h1>
      <a href="8517.html">Script: Apple watch shopping capture: automate draft actions based on keyword in text/tags coming from watch?</a>
    </h1>


      <div class="topic-category">
        <div class='discourse-tags list-tags'>
            <a href='../../tag/watch.html' class='discourse-tag' rel="tag">watch</a>, 
            <a href='../../tag/actions.html' class='discourse-tag' rel="tag">actions</a>
        </div>
      </div>
  </div>

  


      <div id='post_1' itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Agile Tortoise, Inc.'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forums.getdrafts.com/uploads/default/original/2X/8/8ed1af80ec826f0860aad768f711c6b1b0fb32b4.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forums.getdrafts.com/u/zeltak'><span itemprop='name'>zeltak</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="8517.html">

            <link itemprop="image" href="../../uploads/default/original/2X/1/16085c936c67d8ae6a5d8ce22b6140c7f106a9a5.png">

          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-09-24T05:41:39Z' class='post-time'>
                September 24, 2020,  5:41am
              </time>
              <meta itemprop='dateModified' content='2020-10-03T19:13:52Z'>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Hi all</p>
<p>So I use drafts for everything (no surprises here :)) and one thing that takes a lot of manual work is dealing with shopping items.</p>
<p>I cant use drafts for shopping lists (since i need to share them with wife and kids) and thus i use apple reminders. The actions <code>List in reminders</code> is perfect for that.</p>
<p>the ‚Äúproblem‚Äù (1st world problems‚Ä¶ <img src="../../images/emoji/apple/slight_smile.png@v=9" title=":slight_smile:" class="emoji" alt=":slight_smile:"> ) is that i use quick capture for shopping items from the drafts app on my watch each time i remember an item so i end up with 5-6 separate drafts with single/multiple shopping items like this:</p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="../../uploads/default/original/2X/1/16085c936c67d8ae6a5d8ce22b6140c7f106a9a5.png" data-download-href="https://forums.getdrafts.com/uploads/default/16085c936c67d8ae6a5d8ce22b6140c7f106a9a5" title="image"><img src="../../uploads/default/optimized/2X/1/16085c936c67d8ae6a5d8ce22b6140c7f106a9a5_2_690x351.png" alt="image" data-base62-sha1="38UpYOOrAq5s93r2g1k27X0pH9P" width="690" height="351" srcset="../../uploads/default/optimized/2X/1/16085c936c67d8ae6a5d8ce22b6140c7f106a9a5_2_690x351.png, ../../uploads/default/original/2X/1/16085c936c67d8ae6a5d8ce22b6140c7f106a9a5.png 1.5x, ../../uploads/default/original/2X/1/16085c936c67d8ae6a5d8ce22b6140c7f106a9a5.png 2x" data-small-upload="https://forums.getdrafts.com/uploads/default/optimized/2X/1/16085c936c67d8ae6a5d8ce22b6140c7f106a9a5_2_10x10.png"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use xlink:href="#far-image"></use></svg><span class="filename">image</span><span class="informations">735√ó374 28.6 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use xlink:href="#discourse-expand"></use></svg></div></a></div></p>
<p>now i have to remember to go each day one by one and click the <code>send to reminders</code> action to get them to the family shopping list‚Ä¶</p>
<p>so after this long intro im wondering, can i automate this somehow? I thought of a few things but don‚Äôt know how to proceed.</p>
<ol>
<li>
<p>add a keyword (like <code>buy</code>) to each line/draft which will trigger a drafts automation and send to reminder? (can you even automate that in drafts?)</p>
</li>
<li>
<p>apply a tag somehow (ie <code>shopping</code>) when i capture on the watch (in new watch os7 i understand there can be multiple complications, perhaps a separate capture to shopping complication)? and then automate based on the tag</p>
</li>
<li>
<p>other  idea?</p>
</li>
</ol>
<p>any help or directions would ne super appreciate <img src="../../images/emoji/apple/slight_smile.png@v=9" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
<p>Best</p>
<p>Z</p>
        </div>

        <meta itemprop='headline' content='Script: Apple watch shopping capture: automate draft actions based on keyword in text/tags coming from watch?'>
          <meta itemprop='keywords' content='watch, actions'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div id='post_2' itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Agile Tortoise, Inc.'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forums.getdrafts.com/uploads/default/original/2X/8/8ed1af80ec826f0860aad768f711c6b1b0fb32b4.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forums.getdrafts.com/u/Andreas_Haberle'><span itemprop='name'>Andreas_Haberle</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="8517.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-09-24T19:26:27Z' class='post-time'>
                September 24, 2020,  7:26pm
              </time>
              <meta itemprop='dateModified' content='2020-09-24T19:26:27Z'>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I think it should be possible to write a small script in an action that guesses if it is a shopping list.</p>
<p>So an approach would be to loop (for) through all  items with (only?) the watch tag on it and find those with 1-3 lines and not too long sentences.</p>
<p>Then add a new tag when sure or ask the user about it.</p>
<p>A fun idea would be to build a dictionary (JSON) for all the items you found and then use this to improve the guessing.</p>
<p>I would suspect that after some weeks the guessing gets quite sofisticated.</p>
<p>Would you have the skills to start fit a simple script? (look into TADpole for basic actions and examples if you not had already)</p>
        </div>

        <meta itemprop='headline' content='Script: Apple watch shopping capture: automate draft actions based on keyword in text/tags coming from watch?'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div id='post_3' itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Agile Tortoise, Inc.'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forums.getdrafts.com/uploads/default/original/2X/8/8ed1af80ec826f0860aad768f711c6b1b0fb32b4.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forums.getdrafts.com/u/yvonnezed'><span itemprop='name'>yvonnezed</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="8517.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-09-25T02:27:18Z' class='post-time'>
                September 25, 2020,  2:27am
              </time>
              <meta itemprop='dateModified' content='2020-09-25T02:27:18Z'>
          <span itemprop='position'>#3</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Keep in mind I haven‚Äôt tested this, but you might be able to use a Shortcut for this. Search for Drafts with a specific tag then use the add to reminders action for each one found. You might even be able to to automate that to run at a specific time each day without prompting you, now that Shortcuts allows for it in iOS 14. Just another thought for research.</p>
        </div>

        <meta itemprop='headline' content='Script: Apple watch shopping capture: automate draft actions based on keyword in text/tags coming from watch?'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div id='post_4' itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Agile Tortoise, Inc.'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forums.getdrafts.com/uploads/default/original/2X/8/8ed1af80ec826f0860aad768f711c6b1b0fb32b4.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forums.getdrafts.com/u/zeltak'><span itemprop='name'>zeltak</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="8517.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-09-25T11:14:39Z' class='post-time'>
                September 25, 2020, 11:14am
              </time>
              <meta itemprop='dateModified' content='2020-09-25T11:14:39Z'>
          <span itemprop='position'>#4</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>thx guys for the input!</p>
<aside class="quote no-group" data-username="Andreas_Haberle" data-post="2" data-topic="8517">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/forums.getdrafts.com/andreas_haberle/40/3084_2.png" class="avatar"> Andreas_Haberle:</div>
<blockquote>
<p>Would you have the skills to start fit a simple script?</p>
</blockquote>
</aside>
<p>haha i really wish but my skills of programming are zero ;D</p>
<p><a class="mention" href="https://forums.getdrafts.com/u/yvonnezed">@yvonnezed</a>, thx for the suggestions im looking more for a mac based solution TBH, but will explore shortcuts</p>
<p>gott say i thought this would are relatively straight forward and that more people would use such things.<br>
I wonder <a class="mention" href="https://forums.getdrafts.com/u/agiletortoise">@agiletortoise</a>,  will it be possible with watchOS 7 to define a complication with a custom tag so every capture from that gets the <code>custom</code> tag?</p>
<p>best</p>
<p>Z</p>
        </div>

        <meta itemprop='headline' content='Script: Apple watch shopping capture: automate draft actions based on keyword in text/tags coming from watch?'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div id='post_5' itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Agile Tortoise, Inc.'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forums.getdrafts.com/uploads/default/original/2X/8/8ed1af80ec826f0860aad768f711c6b1b0fb32b4.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forums.getdrafts.com/u/zeltak'><span itemprop='name'>zeltak</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="8517.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-10-01T05:20:23Z' class='post-time'>
                October 1, 2020,  5:20am
              </time>
              <meta itemprop='dateModified' content='2020-10-01T05:20:23Z'>
          <span itemprop='position'>#5</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Hi guys</p>
<p>Stil struggling with this, would appreciate any suggestions that could fit a non technical user <img src="../../images/emoji/apple/slight_smile.png@v=9" title=":slight_smile:" class="emoji" alt=":slight_smile:"><br>
thx!</p>
<p>Z</p>
        </div>

        <meta itemprop='headline' content='Script: Apple watch shopping capture: automate draft actions based on keyword in text/tags coming from watch?'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div id='post_6' itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Agile Tortoise, Inc.'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forums.getdrafts.com/uploads/default/original/2X/8/8ed1af80ec826f0860aad768f711c6b1b0fb32b4.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forums.getdrafts.com/u/Andreas_Haberle'><span itemprop='name'>Andreas_Haberle</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="8517.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-10-03T19:15:08Z' class='post-time'>
                October 3, 2020,  7:15pm
              </time>
              <meta itemprop='dateModified' content='2020-10-03T19:15:08Z'>
          <span itemprop='position'>#6</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Hi <a class="mention" href="https://forums.getdrafts.com/u/zeltak">@zeltak</a></p>
<p>it is weekend and time for my good deed in the forum</p>
<aside class="onebox allowlistedgeneric">
  <header class="source">
      <img src="../../uploads/default/original/2X/5/589671206cbd59f5922b38e71c9efbdfccc5d725.png" class="site-icon" width="180" height="180">
      <a href="https://actions.getdrafts.com/a/1dN" target="_blank" rel="noopener">actions.getdrafts.com</a>
  </header>
  <article class="onebox-body">
    <img src="8517.html" class="thumbnail" width="" height="">

<h3><a href="https://actions.getdrafts.com/a/1dN" target="_blank" rel="noopener">Test: Shopping List (merge) | Drafts Action Directory</a></h3>



  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>Is the code readable? Do you need an explanation?</p>
<p>Please feel free to ask</p>
<p>Andreas</p>
        </div>

        <meta itemprop='headline' content='Script: Apple watch shopping capture: automate draft actions based on keyword in text/tags coming from watch?'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div id='post_7' itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Agile Tortoise, Inc.'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forums.getdrafts.com/uploads/default/original/2X/8/8ed1af80ec826f0860aad768f711c6b1b0fb32b4.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forums.getdrafts.com/u/zeltak'><span itemprop='name'>zeltak</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="8517.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-10-04T08:38:01Z' class='post-time'>
                October 4, 2020,  8:38am
              </time>
              <meta itemprop='dateModified' content='2020-10-04T08:38:01Z'>
          <span itemprop='position'>#7</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Wow this is amazing, thx so much <a class="mention" href="https://forums.getdrafts.com/u/andreas_haberle">@Andreas_Haberle</a>!! Cant thank you enough <img src="../../images/emoji/apple/smiley.png@v=9" title=":smiley:" class="emoji" alt=":smiley:"></p>
<p>I have zero coding language but managed to modify it a bit ( I assume there re much more intelligent ways to do so <img src="../../images/emoji/apple/slight_smile.png@v=9" title=":slight_smile:" class="emoji" alt=":slight_smile:"> ‚Ä¶  ) :</p>
<ul>
<li>i don‚Äôt need Markdown list so took out the syntax here</li>
</ul>
<pre><code class="lang-auto">match_list += " "+ content_lines[line_index] + "\n";
</code></pre>
<ul>
<li>also i export my items to a shopping list with my wife named <code>Shopping</code> so changed that as well</li>
</ul>
<pre><code class="lang-auto">  title_master : "# Shopping",
</code></pre>
<p>I have 2 questions if you don‚Äôt mind!</p>
<ol>
<li>
<p>is there a way to have the original <code>watch</code> tagged shopping items auto archive (currently they stay in the inbox alongside the non shopping items with <code>watch</code> which are not processed)</p>
</li>
<li>
<p>can the little window which pops up (saying <code>dismiss</code>) either be removed or if not have a <code>cancel</code> button?</p>
</li>
</ol>
<p>thx against much i learned a lot from this!</p>
<p>best</p>
<p>z</p>
        </div>

        <meta itemprop='headline' content='Script: Apple watch shopping capture: automate draft actions based on keyword in text/tags coming from watch?'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="2" />
          </div>

      </div>
      <div id='post_8' itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Agile Tortoise, Inc.'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forums.getdrafts.com/uploads/default/original/2X/8/8ed1af80ec826f0860aad768f711c6b1b0fb32b4.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forums.getdrafts.com/u/sylumer'><span itemprop='name'>sylumer</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="8517.html">

            <link itemprop="image" href="../../uploads/default/original/2X/f/ff5073483373ac67e773a7a5bd11fb89a7265713.jpeg">

          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-10-04T08:54:56Z' class='post-time'>
                October 4, 2020,  8:54am
              </time>
              <meta itemprop='dateModified' content='2020-10-04T08:54:56Z'>
          <span itemprop='position'>#8</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="zeltak" data-post="7" data-topic="8517">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../letter_avatar_proxy/v4/letter/z/a88e4f/40.png" class="avatar"> zeltak:</div>
<blockquote>
<p>is there a way to have the original <code>watch</code> tagged shopping items auto archive (currently they stay in the inbox alongside the non shopping items with <code>watch</code> which are not processed)</p>
</blockquote>
</aside>
<p>Actions have an option to do this on success. Just change the action to archive on a successful run rather than default.</p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="../../uploads/default/original/2X/f/ff5073483373ac67e773a7a5bd11fb89a7265713.jpeg" data-download-href="https://forums.getdrafts.com/uploads/default/ff5073483373ac67e773a7a5bd11fb89a7265713" title="image"><img src="../../uploads/default/optimized/2X/f/ff5073483373ac67e773a7a5bd11fb89a7265713_2_690x351.jpeg" alt="image" data-base62-sha1="AqC7nmxgm3H1qH8oUxwilHfiSRB" width="690" height="351" srcset="../../uploads/default/optimized/2X/f/ff5073483373ac67e773a7a5bd11fb89a7265713_2_690x351.jpeg, ../../uploads/default/optimized/2X/f/ff5073483373ac67e773a7a5bd11fb89a7265713_2_1035x526.jpeg 1.5x, ../../uploads/default/original/2X/f/ff5073483373ac67e773a7a5bd11fb89a7265713.jpeg 2x" data-small-upload="https://forums.getdrafts.com/uploads/default/optimized/2X/f/ff5073483373ac67e773a7a5bd11fb89a7265713_2_10x10.png"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use xlink:href="#far-image"></use></svg><span class="filename">image</span><span class="informations">1242√ó633 81.7 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use xlink:href="#discourse-expand"></use></svg></div></a></div></p>
<aside class="quote no-group" data-username="zeltak" data-post="7" data-topic="8517">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../letter_avatar_proxy/v4/letter/z/a88e4f/40.png" class="avatar"> zeltak:</div>
<blockquote>
<p>can the little window which pops up (saying <code>dismiss</code> ) either be removed or if not have a <code>cancel</code> button?</p>
</blockquote>
</aside>
<p>Prefix line 67 with two forward slashed like this:</p>
<pre><code class="lang-javascript">//alert(items);
</code></pre>
<p>That should stop it appearing.</p>
        </div>

        <meta itemprop='headline' content='Script: Apple watch shopping capture: automate draft actions based on keyword in text/tags coming from watch?'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="2" />
          </div>

      </div>
      <div id='post_9' itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Agile Tortoise, Inc.'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forums.getdrafts.com/uploads/default/original/2X/8/8ed1af80ec826f0860aad768f711c6b1b0fb32b4.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forums.getdrafts.com/u/Andreas_Haberle'><span itemprop='name'>Andreas_Haberle</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="8517.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-10-04T09:27:09Z' class='post-time'>
                October 4, 2020,  9:27am
              </time>
              <meta itemprop='dateModified' content='2020-10-04T09:27:09Z'>
          <span itemprop='position'>#9</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="zeltak" data-post="7" data-topic="8517">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../letter_avatar_proxy/v4/letter/z/a88e4f/40.png" class="avatar"> zeltak:</div>
<blockquote>
<p>Wow this is amazing, thx so much <a class="mention" href="https://forums.getdrafts.com/u/andreas_haberle">@Andreas_Haberle</a>!! Cant thank you enough</p>
</blockquote>
</aside>
<p>Your really welcome. I love the idea. It was fun!</p>
<aside class="quote no-group" data-username="sylumer" data-post="8" data-topic="8517">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/forums.getdrafts.com/sylumer/40/112_2.png" class="avatar"> sylumer:</div>
<blockquote>
<p>Prefix line 67 with two forward slashed like this:</p>
</blockquote>
</aside>
<p>Thanks Stephen! You totally rock!</p>
<p>I updated the action</p>
<aside class="onebox allowlistedgeneric">
  <header class="source">
      <img src="../../uploads/default/original/2X/5/589671206cbd59f5922b38e71c9efbdfccc5d725.png" class="site-icon" width="180" height="180">
      <a href="https://actions.getdrafts.com/a/1dN" target="_blank" rel="noopener">actions.getdrafts.com</a>
  </header>
  <article class="onebox-body">
    <img src="8517.html" class="thumbnail" width="" height="">

<h3><a href="https://actions.getdrafts.com/a/1dN" target="_blank" rel="noopener">Test: Shopping List (merge) | Drafts Action Directory</a></h3>



  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>It now includes all your changes</p>
        </div>

        <meta itemprop='headline' content='Script: Apple watch shopping capture: automate draft actions based on keyword in text/tags coming from watch?'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div id='post_10' itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Agile Tortoise, Inc.'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forums.getdrafts.com/uploads/default/original/2X/8/8ed1af80ec826f0860aad768f711c6b1b0fb32b4.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forums.getdrafts.com/u/zeltak'><span itemprop='name'>zeltak</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="8517.html">

            <link itemprop="image" href="../../uploads/default/original/2X/2/2bf1845c8325eb5a51991d1f7c475298d590a6dc.png">

          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-10-04T09:27:45Z' class='post-time'>
                October 4, 2020,  9:27am
              </time>
              <meta itemprop='dateModified' content='2020-10-04T09:27:45Z'>
          <span itemprop='position'>#10</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>thx <a class="mention" href="https://forums.getdrafts.com/u/sylumer">@sylumer</a></p>
<p>the commenting of line 67 was perfect!</p>
<p>as for the archive after success part i had that already yet this only works on the draft this is launched from.  But the script merges 2‚Ä¶n scripts and they don‚Äôt get archived. I wonder if the script can archive them or is that impossible technically?</p>
<p>Also i think related i tried to add a Draft action to run immediately after the completion of the script but again this runs only on the note the action is launched from and not the merged note:</p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="../../uploads/default/original/2X/2/2bf1845c8325eb5a51991d1f7c475298d590a6dc.png" data-download-href="https://forums.getdrafts.com/uploads/default/2bf1845c8325eb5a51991d1f7c475298d590a6dc" title="image"><img src="../../uploads/default/optimized/2X/2/2bf1845c8325eb5a51991d1f7c475298d590a6dc_2_639x500.png" alt="image" data-base62-sha1="6gJYHDtuxgNT5iP8CNPwzZ5015O" width="639" height="500" srcset="../../uploads/default/optimized/2X/2/2bf1845c8325eb5a51991d1f7c475298d590a6dc_2_639x500.png, ../../uploads/default/optimized/2X/2/2bf1845c8325eb5a51991d1f7c475298d590a6dc_2_958x750.png 1.5x, ../../uploads/default/original/2X/2/2bf1845c8325eb5a51991d1f7c475298d590a6dc.png 2x" data-small-upload="https://forums.getdrafts.com/uploads/default/optimized/2X/2/2bf1845c8325eb5a51991d1f7c475298d590a6dc_2_10x10.png"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use xlink:href="#far-image"></use></svg><span class="filename">image</span><span class="informations">1181√ó923 94 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use xlink:href="#discourse-expand"></use></svg></div></a></div></p>
<p>any clue how to male the second draft action <code>RM::Q&gt;Shopping</code> run on the merged note and not the note the first action was started from?</p>
<p>thx a lot guys appreciate the help a lot and learning much about drafts!!</p>
<p>best</p>
<p>Z</p>
        </div>

        <meta itemprop='headline' content='Script: Apple watch shopping capture: automate draft actions based on keyword in text/tags coming from watch?'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div id='post_11' itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Agile Tortoise, Inc.'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forums.getdrafts.com/uploads/default/original/2X/8/8ed1af80ec826f0860aad768f711c6b1b0fb32b4.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forums.getdrafts.com/u/sylumer'><span itemprop='name'>sylumer</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="8517.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-10-04T10:49:43Z' class='post-time'>
                October 4, 2020, 10:49am
              </time>
              <meta itemprop='dateModified' content='2020-10-04T10:49:43Z'>
          <span itemprop='position'>#11</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="zeltak" data-post="10" data-topic="8517">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../letter_avatar_proxy/v4/letter/z/a88e4f/40.png" class="avatar"> zeltak:</div>
<blockquote>
<p>as for the archive after success part i had that already yet this only works on the draft this is launched from. But the script merges 2‚Ä¶n scripts and they don‚Äôt get archived. I wonder if the script can archive them or is that impossible technically?</p>
</blockquote>
</aside>
<p>OK, got it. I‚Äôd read this at first as being a manual multi-select and process, but I see it is now filtering automatically. But the good news is that yes, this is possible.</p>
<p>Keeping with the approach Andreas has used, you can do this by adding two lines.</p>
<p>I added the first after the remove _watch_tag setting, but you could place it in any number of places in the constraint definition. It is a setting to tell the script to archive drafts it is merging.</p>
<pre><code class="lang-javascript">  remove_watch_tag : true,
  archive: true,
  max_lines : 5,
</code></pre>
<p>Next we want to use that setting.  I‚Äôve added this in after the merge tag is added.</p>
<pre><code class="lang-javascript">        draft_candidate.addTag(p_constraints.merged_tag);
        draft_candidate.isArchived = p_constraints.archive;
        draft_candidate.removeTag(p_constraints.watch_tag);
</code></pre>
<p>Here we‚Äôre telling the script to update the current draft to set the archival attribute to whatever was set in the constraints.</p>
<p>With the changes above, a little bit of reformatting, switching <code>vars</code> to <code>lets</code> (<a href="https://stackoverflow.com/questions/762011/whats-the-difference-between-using-let-and-var">functionally no change, but some good practice to help avoid coding issues</a>), applying your updates, and correcting a variable typo, the revised code might look a bit like this:</p>
<pre><code class="lang-javascript">// shopping list: finding and merging shopping lists
//TODO: remove watch tag
// ignore processed notes 

const constraints =
{
	tag_master: "shopping_master",
	title_master: "# Shopping",
	tag_watch: "watch",
	merged_tag: "shopping_merged",
	dismissed_tag: "shopping_dismissed",
	remove_watch_tag: true,
	archive: true,
	max_lines: 5,
	max_line_length: 42,
	look_in: "inbox" // archive, flagged, trash, all
}

function get_items(p_constraints)
{
	let match_list = "";
	let data_list = Draft.query("", p_constraints.look_in, [p_constraints.tag_watch], [p_constraints.merged_tag, p_constraints.dismissed_tag]);

	for (let index in data_list)
	{
		let draft_candidate = data_list[index];
		let content_lines = draft_candidate.lines
		let max_line_length = 0;
		for (let line_index in content_lines)
		{
			let active_length = content_lines[line_index].length;
			if (max_line_length &lt; active_length) max_line_length = active_length;
		}

		if (content_lines.length &lt; p_constraints.max_lines &amp;&amp; max_line_length &lt; p_constraints.max_line_length)
		{
			draft_candidate.addTag(p_constraints.merged_tag);
			draft_candidate.isArchived = p_constraints.archive;
			draft_candidate.removeTag(p_constraints.watch_tag);

			for (let line_index in content_lines)
			{
				let active_item = content_lines[line_index];
				if (active_item.length &gt; 0) match_list += content_lines[line_index] + "\n";
			}
		}
		else
		{
			draft_candidate.addTag(p_constraints.dismissed_tag);
			draft_candidate.removeTag(p_constraints.watch_tag);
		}
		draft_candidate.update();
	}
	return match_list;
}

let items = get_items(constraints);

// put this into the shopping list draft
let shopping_list = Draft.query("", "all", [constraints.tag_master])[0];

if (shopping_list == null)
{
	shopping_list = new Draft();
	shopping_list.addTag(constraints.tag_master);
	shopping_list.content = constraints.title_master;
}

shopping_list.append(items);
shopping_list.update();
</code></pre>
        </div>

        <meta itemprop='headline' content='Script: Apple watch shopping capture: automate draft actions based on keyword in text/tags coming from watch?'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div id='post_12' itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Agile Tortoise, Inc.'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forums.getdrafts.com/uploads/default/original/2X/8/8ed1af80ec826f0860aad768f711c6b1b0fb32b4.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forums.getdrafts.com/u/Andreas_Haberle'><span itemprop='name'>Andreas_Haberle</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="8517.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-10-04T11:06:01Z' class='post-time'>
                October 4, 2020, 11:06am
              </time>
              <meta itemprop='dateModified' content='2020-10-04T11:06:01Z'>
          <span itemprop='position'>#12</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I agree.</p>
<p>I did not know about the <code>let</code> and <code>var</code> difference.<br>
I will use <code>let</code> in future</p>
<aside class="quote no-group" data-username="sylumer" data-post="11" data-topic="8517">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/forums.getdrafts.com/sylumer/40/112_2.png" class="avatar"> sylumer:</div>
<blockquote>
<p><code>archive: true,</code></p>
</blockquote>
</aside>
<p>might not be necessary cause it is the only useful behaviour</p>
<p>I did not get that <code>draft.isArchived</code> is a writable property.<br>
Hmm it is not really documented in the script interface. So good to know.</p>
        </div>

        <meta itemprop='headline' content='Script: Apple watch shopping capture: automate draft actions based on keyword in text/tags coming from watch?'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div id='post_13' itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Agile Tortoise, Inc.'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forums.getdrafts.com/uploads/default/original/2X/8/8ed1af80ec826f0860aad768f711c6b1b0fb32b4.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forums.getdrafts.com/u/Andreas_Haberle'><span itemprop='name'>Andreas_Haberle</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="8517.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-10-04T11:11:30Z' class='post-time'>
                October 4, 2020, 11:11am
              </time>
              <meta itemprop='dateModified' content='2020-10-04T11:11:30Z'>
          <span itemprop='position'>#13</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>You might even want to trash the merged drafts with</p>
<pre><code>    draft_candidate.isTrashed = true;
</code></pre>
<p>Instead of archiving them.</p>
        </div>

        <meta itemprop='headline' content='Script: Apple watch shopping capture: automate draft actions based on keyword in text/tags coming from watch?'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div id='post_14' itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Agile Tortoise, Inc.'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forums.getdrafts.com/uploads/default/original/2X/8/8ed1af80ec826f0860aad768f711c6b1b0fb32b4.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forums.getdrafts.com/u/zeltak'><span itemprop='name'>zeltak</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="8517.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-10-04T11:47:11Z' class='post-time'>
                October 4, 2020, 11:47am
              </time>
              <meta itemprop='dateModified' content='2020-10-04T11:47:11Z'>
          <span itemprop='position'>#14</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Wow guys wow, this is amazing (and so fun to follow as a non coder and begin to understand :))</p>
<aside class="quote no-group" data-username="Andreas_Haberle" data-post="13" data-topic="8517">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/forums.getdrafts.com/andreas_haberle/40/3084_2.png" class="avatar"> Andreas_Haberle:</div>
<blockquote>
<pre><code class="lang-auto">    draft_candidate.isTrashed = true;
</code></pre>
</blockquote>
</aside>
<p>thx! I added this to the code (and commented the archive option (was that needed)?:</p>
<pre><code class="lang-auto">if (content_lines.length &lt; p_constraints.max_lines &amp;&amp; max_line_length &lt; p_constraints.max_line_length)
		{
			draft_candidate.addTag(p_constraints.merged_tag);
			// draft_candidate.isArchived = p_constraints.archive;
			draft_candidate.isTrashed = true;
			draft_candidate.removeTag(p_constraints.watch_tag);

</code></pre>
<p>but it seems only the other notes are sent to the trash and the original note to archive?</p>
<p>Also only the first note is being sent to the reminders with my <code>send to reminder</code> action, and not the <code>shopping list</code> merged note.</p>
<p>TBH this is leaps and bounds beyond what i imagined so if you guys had enough of me i can live with the current state <img src="../../images/emoji/apple/smiley.png@v=9" title=":smiley:" class="emoji" alt=":smiley:"></p>
<p><a class="mention" href="https://forums.getdrafts.com/u/andreas_haberle">@Andreas_Haberle</a>, since all credit goes to you (With the kind help of <a class="mention" href="https://forums.getdrafts.com/u/sylumer">@sylumer</a> ofc!) , will you want to UL it as a proper script so other users can enjoy it? If you cant. be bothered i will gladly do it myself</p>
<p>best and thx again</p>
<p>Z</p>
        </div>

        <meta itemprop='headline' content='Script: Apple watch shopping capture: automate draft actions based on keyword in text/tags coming from watch?'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div id='post_15' itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='Agile Tortoise, Inc.'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forums.getdrafts.com/uploads/default/original/2X/8/8ed1af80ec826f0860aad768f711c6b1b0fb32b4.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forums.getdrafts.com/u/sylumer'><span itemprop='name'>sylumer</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="8517.html">

            <link itemprop="image" href="https://forums.getdrafts.com/uploads/default/original/2X/b/b27ce6b5baf4ae9d82ec4f4d0936f15a49fa6c16.jpeg">

          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-10-04T11:57:52Z' class='post-time'>
                October 4, 2020, 11:57am
              </time>
              <meta itemprop='dateModified' content='2020-10-04T11:57:52Z'>
          <span itemprop='position'>#15</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="Andreas_Haberle" data-post="12" data-topic="8517">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/forums.getdrafts.com/andreas_haberle/40/3084_2.png" class="avatar"> Andreas_Haberle:</div>
<blockquote>
<p>I did not get that <code>draft.isArchived</code> is a writable property.<br>
Hmm it is not really documented in the script interface. So good to know.</p>
</blockquote>
</aside>
<p>Read only properties should have the read only label on them.</p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="https://forums.getdrafts.com/uploads/default/original/2X/b/b27ce6b5baf4ae9d82ec4f4d0936f15a49fa6c16.jpeg" data-download-href="https://forums.getdrafts.com/uploads/default/b27ce6b5baf4ae9d82ec4f4d0936f15a49fa6c16" title="image"><img src="../../uploads/default/optimized/2X/b/b27ce6b5baf4ae9d82ec4f4d0936f15a49fa6c16_2_281x500.jpeg" alt="image" data-base62-sha1="psYAxsqmexP2iCz9PjhACsveiua" width="281" height="500" srcset="../../uploads/default/optimized/2X/b/b27ce6b5baf4ae9d82ec4f4d0936f15a49fa6c16_2_281x500.jpeg, ../../uploads/default/optimized/2X/b/b27ce6b5baf4ae9d82ec4f4d0936f15a49fa6c16_2_421x750.jpeg 1.5x, ../../uploads/default/optimized/2X/b/b27ce6b5baf4ae9d82ec4f4d0936f15a49fa6c16_2_562x1000.jpeg 2x" data-small-upload="https://forums.getdrafts.com/uploads/default/optimized/2X/b/b27ce6b5baf4ae9d82ec4f4d0936f15a49fa6c16_2_10x10.png"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use xlink:href="#far-image"></use></svg><span class="filename">image</span><span class="informations">1242√ó2208 272 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use xlink:href="#discourse-expand"></use></svg></div></a></div></p>
        </div>

        <meta itemprop='headline' content='Script: Apple watch shopping capture: automate draft actions based on keyword in text/tags coming from watch?'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>






    </div>
    <footer class="container wrap">
  <nav class='crawler-nav'>
    <ul>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://forums.getdrafts.com/' itemprop="url">Home </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://forums.getdrafts.com/categories' itemprop="url">Categories </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://forums.getdrafts.com/guidelines' itemprop="url">FAQ/Guidelines </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://forums.getdrafts.com/tos' itemprop="url">Terms of Service </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://forums.getdrafts.com/privacy' itemprop="url">Privacy Policy </a>
        </span>
      </li>
    </ul>
  </nav>
  <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
</footer>

    
    
  </body>
  
</html>
