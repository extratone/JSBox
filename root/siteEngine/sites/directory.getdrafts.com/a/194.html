<!DOCTYPE html>
<html lang='en'>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>New From Template | Drafts Directory</title>
    <meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="ned6sW8RikT3BmXQeu7aIofhOtL82sRXtW9cSDO+hcSQHTFsaUPiy32TMe/R2eHm7yuzWHwzpnX7Icc7uIucSw==" />
    <meta http-equiv="content-type" content="text/html;charset=utf-8">
    <meta http-equiv="content-language" content="en">
    <meta http-equiv="content-language" content="en-us">
    
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <meta property="og:title" content="Drafts Directory: New From Template" />
    <meta property="og:url" content="https://directory.getdrafts.com/a/194" />
    <meta property="og:type" content="website" />
    <meta property="og:description" content="Example actions and other extensions for Drafts, the quick-capture notes app." />
    <meta property="og:image" content="https://directory.getdrafts.com/assets/drafts-ogimage-action-d9c60102fd45e0cb516e1b49ed50a81e3c3a2b90f81f55df8f43d0feb0512978.png" />
    <meta property="twitter:title" content="Drafts Directory: New From Template" />
    <meta property="twitter:url" content="https://directory.getdrafts.com/a/194" />
    <meta property="twitter:type" content="website" />
    <meta property="twitter:description" content="Example actions and other extensions for Drafts, the quick-capture notes app." />
    <meta property="twitter:image" content="https://directory.getdrafts.com/assets/drafts-ogimage-action-d9c60102fd45e0cb516e1b49ed50a81e3c3a2b90f81f55df8f43d0feb0512978.png" />

    <link rel="shortcut icon" type="image/x-icon" href="../assets/favicon-114dbb66b0ef0399a14fa5dfcad7e6210bb558c30cea665e04d49b59fec87f70.png" />

    <link rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/styles/default.min.css">
    <link rel="stylesheet" media="all" href="../assets/application-6e4f014b4c48cd673942dbfbbeb3e571a732b05562ddde5904f3a5c3833e54ff.css" />
    <script src="../assets/application-13492939cb10be5be76b5abb3e9ae0bef0bbae3202cec2b85cf6fca5bc8429c8.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/highlight.min.js"></script>
    <script>hljs.highlightAll();</script>
    <script async defer data-domain="directory.getdrafts.com" src="https://plausible.io/js/plausible.js"></script>
  </head>

<body data-no-turbolink>

    <div class="page-wrap">
        <div class="side-bar">
            <a href="../index.html" class="site-title fs-6 lh-tight" title="{{ site.title }}">
                <img src="../assets/drafts-directory-header-4d826bd007f515c8e5a10f654e56ad76fbb3bd3103a67ce342283f701f1677fe.svg" alt="Drafts Directory" style="max-height: 30px;" />
            </a>
            <span class="fs-3"><button class="js-main-nav-trigger navigation-list-toggle btn btn-outline" type="button"
                    data-text-toggle="Hide">Menu</button></span>
            <div class="navigation main-nav js-main-nav">
              <ul class="navigation-list">
                <li class="navigation-list-item">
                  <a class="navigation-list-link" href="../index.html">Home</a>
                </li>
                <li class="navigation-list-item">
                  <a class="navigation-list-link" href="../drafts_actions.html">Actions</a>
                </li>
                <li class="navigation-list-item">
                  <a class="navigation-list-link" href="../drafts_action_groups.html">Action Groups</a>
                </li>
                <li class="navigation-list-item">
                  <a class="navigation-list-link" href="../syntax_definitions.html">Syntaxes</a>
                </li>
                <li class="navigation-list-item">
                  <a class="navigation-list-link" href="../theme_definitions.html">Themes</a>
                </li>
                <li class="navigation-list-item">
                  <a class="navigation-list-link" href="../workspaces.html">Workspaces</a>
                </li>
                <li class="navigation-list-item">
                  <hr style="margin:1em; padding: 0;" />
                </li>
                <li class="navigation-list-item">
                  <a class="navigation-list-link" href="../search.html">Search</a>
                </li>
                <li class="navigation-list-item">
                  <hr style="margin:1em; padding: 0;" />
                </li>
                <li class="navigation-list-item">
                    <a class="navigation-list-link nav-external" title="About Drafts" href="../../getdrafts.com/index.html">Get Drafts &#x2192;</a>
                </li>
                <li class="navigation-list-item">
                    <a class="navigation-list-link nav-external" title="Detailed documentation" href="../../docs.getdrafts.com/index.html">User Guide &#x2192;</a>
                </li>
                <li class="navigation-list-item">
                    <a class="navigation-list-link nav-external" title="Get your questions answered in the forums" href="https://forums.getdrafts.com/">Community &#x2192;</a>
                </li>
                <li class="navigation-list-item">
                    <a class="navigation-list-link nav-external" title="Online tools and generators" href="../../tools.getdrafts.com/index.html">Tools &#x2192;</a>
                </li>
                <li class="navigation-list-item">
                    <a class="navigation-list-link nav-external" title="Scripting library reference" href="../../scripting.getdrafts.com/index.html">Script Reference &#x2192;</a>
                </li>
              </ul>
            </div>
            <footer role="contentinfo" class="site-footer">
                <p class="text-small text-grey-dk-000 mb-0">
                    Download: <a href="https://itunes.apple.com/app/id1236254471?ls=1&mt=8&at=11l4Cf&ct=site">iOS</a> | <a href="https://itunes.apple.com/app/id1435957248?mt=12&at=11l4Cf&ct=site">Mac</a>
                </p>
            </footer>
        </div>
        <div class="main-content-wrap js-main-content" tabindex="0">
            <div class="page-header">
                <div class="main-content">
                    <div class="search js-search">
	<div class="search-input-wrap">
<form class="search-form" action="../search.html" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
	<button style='border:none;background-color:transparent;'>
	<svg width="14" height="14" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg"
		class="search-icon">
		<title>Search</title>
		<g fill-rule="nonzero">
			<path
				d="M17.332 20.735c-5.537 0-10-4.6-10-10.247 0-5.646 4.463-10.247 10-10.247 5.536 0 10 4.601 10 10.247s-4.464 10.247-10 10.247zm0-4c3.3 0 6-2.783 6-6.247 0-3.463-2.7-6.247-6-6.247s-6 2.784-6 6.247c0 3.464 2.7 6.247 6 6.247z" />
			<path d="M11.672 13.791L.192 25.271 3.02 28.1 14.5 16.62z" />
		</g>
	</svg>
	</button>
	<input type="text" name="q" id="q" class="js-search-input search-input search" size="12" tabindex="0" placeholder="Search" />
</form>	</div>
</div>
                    <ul class="list-style-none text-small mt-md-1 mb-md-1 pb-4 pb-md-0 js-aux-nav aux-nav">
                        <li class="d-inline-block my-0 mr-2">
                          <a href="../../getdrafts.com/index.html">Get Drafts</a>
                        </li>
                        <li class="d-inline-block my-0">
                          <a href="https://forums.getdrafts.com">Community</a>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="main-content">
                <div id="main-content" class="page-content" role="main">
                  <div class="type">
                    <h4>Action</h4>
                  </div>
                  <div class="header">
                      <h1><img src="https://config.agiletortoise.com/drafts-icons/share-alt.png" class="action-icon" />New From Template</h1>
                  </div>

                  <div class="content">
                    
<div class='caption'>
        Posted by @mattgemmell,
    Last update
    almost 2 years ago
</div>


    <div class='description'>
        <p>Create a new draft from a specified template. Supports [[cross-link]] backlinks. See the various configurable options at the top of the script. Requires Drafts 20.1 or later. Works well with my “Open Cross-Link at Cursor” action.</p>

<p>By Matt Gemmell — @mattgemmell — <a href="https://mattgemmell.com/">https://mattgemmell.com/</a></p>

    </div>

<div class="certification">
  
  
</div>

<div style="margin: 2em 0;">
    <a class="btn btn-blue" href="drafts5://action?identifier=194&amp;data=%7B%22uuid%22:%222F5E3D73-E0FE-4CC5-824C-36C7F93EE102%22,%22steps%22:[%7B%22platforms%22:3,%22data%22:%7B%22name%22:%22newDraftTemplateName%22,%22template%22:%22Cross-Linked%20Draft%20Template%22%7D,%22type%22:%22defineTemplateTag%22,%22isEnabled%22:true,%22uuid%22:%22362C0DBA-B1A2-45D3-9988-8731AB431121%22%7D,%7B%22platforms%22:3,%22data%22:%7B%22script%22:%22/*%5Cn%5CnCreate%20new%20drafts%20via%20the%20same%20template%20system%20as%20my%20%5C%22Open%20Cross-Link%20at%20Cursor%5C%22%20action.%5Cn%5CnAuthor:%20%5Ct%5CtMatt%20Gemmell%5CnTwitter:%20%5Ct@mattgemmell%5Cthttps://twitter.com/mattgemmell%5CnWeb:%20%5Ct%5Ct%5Cthttps://mattgemmell.com/%5Cn%5Cn*/%5Cn%5Cn/*%20===========================%20*/%5Cn//%20Configuration%5Cn/*%20===========================%20*/%5Cn%5Cn%5Cnvar%20ensureInitialCapitals%20=%20true;%5Cn/*%5CnIf%20true,%20newly-created%20drafts%20will%20have%20their%20title&#39;s%20first%20letter%20made%20uppercase%20if%20necessary.%5Cn*/%5Cn%5Cn%5Cnvar%20newDraftTemplateName%20=%20%5C%22%5C%22;%5Cn/*%5CnTitle%20of%20an%20existing%20draft%20which%20will%20be%20used%20as%20a%20template%20when%20creating%20new%20ones.%5CnIf%20the%20template%20is%20not%20found,%20a%20blank%20draft%20will%20be%20created%20with%20the%20appropriate%20title.%5CnUse%20an%20empty%20string%20(%5C%22%5C%22)%20to%20disable%20the%20template%20functionality.%5Cn%5CnNotes:%5Cn%5Ct-%20The%20new%20draft&#39;s%20title%20%E2%80%94%C2%A0i.e.%20the%20template&#39;s%20first%20non-blank%20line%20%E2%80%94%20will%20be%20replaced%20appropriately.%5Cn%5Ct-%20Any%20leading%20hash/pound%20symbols%20(i.e.%20%5C%22%23%5C%22)%20will%20be%20preserved%20when%20setting%20the%20new%20title.%5Cn%5Ct-%20Drafts%20template%20tags%20will%20be%20processed%20(https://docs.getdrafts.com/docs/actions/templates%20).%5Cn%5Ct-%20Some%20custom%20template%20tags%20are%20available:%5Cn%5Ct%5Cn%5Ct%5Ct-%20source_display_title%20is%20the%20display%20title%20of%20the%20source%20draft%20which%20created%20the%20new%20draft.%5Cn%5Ct%5Ct-%20source_uuid%20is%20the%20UUID%20of%20the%20source%20draft%20which%20created%20the%20new%20draft.%5Cn%5Ct%5Ct-%20source_title_link%20is%20a%20preformatted%20[[backlink]]%20to%20the%20source%20draft&#39;s%20display%20title.%5Cn%5Ct%5Ct-%20source_uuid_link%20is%20a%20preformatted%20[[u:backlink]]%20to%20the%20source%20draft&#39;s%20UUID.%5Cn*/%5Cn%5Cn%5Cnvar%20inheritTagsFromTemplate%20=%20true;%5Cn/*%5CnIf%20true,%20any%20tags%20which%20are%20applied%20to%20the%20template%20will%20also%20be%20applied%20to%20each%20new%20draft%20created%20from%20it.%5Cn*/%5Cn%5Cn%5Cnvar%20excludedTags%20=%20[%5C%22template%5C%22];%5Cn/*%5CnThe%20tags%20present%20in%20this%20array%20will%20NOT%20be%20inherited%20by%20new%20drafts%20created%20from%20the%20template.%20Has%20no%20effect%20if%20inheritTagsFromTemplate%20(above)%20is%20false.%5Cn*/%5Cn%5Cn%5Cnvar%20prependToNewTitles%20=%20%5C%22%5C%22;%5Cn/*%5CnA%20string%20to%20prepend%20to%20the%20titles%20of%20new%20pages%20(but%20after%20any%20leading%20Markdown%20headers%20and%20whitespace%20from%20the%20template).%20This%20string%20will%20be%20processed%20for%20Drafts%20template%20tags%20first,%20in%20the%20contetx%20of%20the%20new%20draft.%20A%20useful%20example%20for%20unique%20identifiers%20would%20be:%20%5C%22[[date%7C%25Y%25m%25d%25H%25M%25S]]%20%5C%22%5Cn*/%5Cn%5Cn%5Cn/*%20===========================%20*/%5Cn//%20END%20of%20Configuration%5Cn/*%20===========================%20*/%5Cn%5Cn%5Cn/*%20===========================%20*/%5Cn//%20A%20few%20useful%20functions.%5Cn/*%20===========================%20*/%5Cn%5Cn%5Cnfunction%20getTitle(theDraft)%20%7B%5Cn%5Ctreturn%20theDraft.displayTitle;%5Cn%7D%5Cn%5Cnfunction%20openDraft(theDraft)%20%7B%5Cn%5Cteditor.load(theDraft);%5Cn%5Cteditor.activate();%5Cn%7D%5Cn%5Cn%5Cn/*%20===========================%20*/%5Cn//%20End%20of%20functions.%5Cn/*%20===========================%20*/%5Cn%5Cn%5Cn//%20Default%20to%20suggesting%20the%20selected%20text%20as%20a%20title.%5Cnvar%20createDraft%20=%20true;%5Cnvar%20draftTitle%20=%20%5C%22%5C%22;%5Cnif%20(draft)%20%7B%5Cn%5Ctvar%20selText%20=%20editor.getSelectedText();%5Cn%5Ctif%20(selText%20%5Cu0026%5Cu0026%20selText.length%20%5Cu003e%200)%20%7B%5Cn%5Ct%5CtdraftTitle%20=%20selText;%5Cn%5Ct%7D%5Cn%7D%5Cn%5Cn//%20Ask%20for%20title%20of%20the%20new%20draft.%5Cnvar%20prompt%20=%20Prompt.create();%5Cnprompt.isCancellable%20=%20true;%5Cnprompt.title%20=%20%5C%22Title%20of%20new%20draft?%5C%22;%5Cnprompt.addTextField(%5C%22titleField%5C%22,%20%5C%22%5C%22,%20draftTitle,%20%7B%5C%22wantsFocus%5C%22:%20true%7D);%5Cnprompt.addButton(%5C%22Create%5C%22);%5CncreateDraft%20=%20prompt.show();%5Cn%5Cnif%20(createDraft)%20%7B%5Cn%5Ctvar%20titleFieldContents%20=%20prompt.fieldValues[%5C%22titleField%5C%22].trim();%5Cn%5Ctif%20(titleFieldContents%20%5Cu0026%5Cu0026%20titleFieldContents.length%20%5Cu003e%200)%20%7B%5Cn%5Ct%5CtdraftTitle%20=%20titleFieldContents;%5Cn%5Ct%7D%20else%20%7B%5Cn%5Ct%5CtcreateDraft%20=%20false;%5Cn%5Ct%7D%5Cn%7D%5Cn%5Cnif%20(createDraft)%20%7B%5Cn%5Ctvar%20newDraft%20=%20new%20Draft();%5Cn%5Cn%5Ct//%20Deal%20with%20initial%20capitals.%5Cn%5Ctif%20(ensureInitialCapitals)%20%7B%5Cn%5Ct%5CtdraftTitle%20=%20draftTitle.charAt(0).toUpperCase()%20+%20draftTitle.slice(1);%5Cn%5Ct%7D%5Cn%5Ct%5Cn%5Ct//%20Deal%20with%20prepended%20title%20string,%20if%20set.%5Cn%5Ctif%20(prependToNewTitles.length%20%5Cu003e%200)%20%7B%5Cn%5Ct%5CtdraftTitle%20=%20newDraft.processTemplate(prependToNewTitles)%20+%20draftTitle;%5Cn%5Ct%7D%5Cn%5Cn%5CtnewDraft.content%20=%20%5C%22%23%20%5C%22%20+%20draftTitle%20+%20%5C%22%5C%5Cn%5C%5Cn%5C%22;%5Cn%5Ct%5Cn%5Ct//%20Handle%20template%20requirements.%5Cn%5Ctif%20(newDraftTemplateName%20==%20null%20%7C%7C%20newDraftTemplateName%20==%20%5C%22%5C%22)%20%7B%5Cn%5Ct%5CtnewDraftTemplateName%20=%20draft.getTemplateTag(%5C%22newDraftTemplateName%5C%22);%5Cn%5Ct%7D%5Cn%5Ct%5Cn%5Ctif%20(newDraftTemplateName%20!=%20null%20%5Cu0026%5Cu0026%20newDraftTemplateName%20!=%20%5C%22%5C%22)%20%7B%5Cn%5Ct%5Ct//%20Attempt%20to%20locate%20template.%5Cn%5Ct%5Ctvar%20foundTemplates%20=%20Draft.queryByTitle(newDraftTemplateName);%5Cn%5Ct%5Ctif%20(foundTemplates.length%20%5Cu003e%200)%20%7B%5Cn%5Ct%5Ct%5Ctvar%20template%20=%20foundTemplates[0];%5Cn%5Ct%5Ct%5Ctvar%20templateContent%20=%20template.content;%5Cn%5Ct%5Ct%5Ct%5Cn%5Ct%5Ct%5Ct//%20Replace%20title%20appropriately.%5Cn%5Ct%5Ct%5CttemplateContent%20=%20templateContent.replace(template.displayTitle,%20draftTitle);%5Cn%5Ct%5Ct%5Ct%5Cn%5Ct%5Ct%5Ct//%20Process%20template%20tags.%5Cn%5Ct%5Ct%5CtnewDraft.setTemplateTag(%5C%22source_display_title%5C%22,%20draft.displayTitle);%5Cn%5Ct%5Ct%5CtnewDraft.setTemplateTag(%5C%22source_uuid%5C%22,%20draft.uuid);%5Cn%5Ct%5Ct%5CtnewDraft.setTemplateTag(%5C%22source_title_link%5C%22,%20%5C%22%5C%5C[[%5C%22%20+%20draft.displayTitle%20+%20%5C%22]]%5C%22);%5Cn%5Ct%5Ct%5CtnewDraft.setTemplateTag(%5C%22source_uuid_link%5C%22,%20%5C%22%5C%5C[[u:%5C%22%20+%20draft.uuid%20+%20%5C%22]]%5C%22);%5Cn%5Ct%5Ct%5CttemplateContent%20=%20newDraft.processTemplate(templateContent);%5Cn%5Ct%5Ct%5Ct%5Cn%5Ct%5Ct%5Ct//%20Transfer%20tags%20if%20appropriate.%5Cn%5Ct%5Ct%5Ctif%20(inheritTagsFromTemplate)%20%7B%5Cn%5Ct%5Ct%5Ct%5Ctfor%20(tag%20of%20template.tags)%20%7B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctif%20(!excludedTags.includes(tag))%20%7B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ct%5CtnewDraft.addTag(tag);%5Cn%5Ct%5Ct%5Ct%5Ct%5Ct%7D%5Cn%5Ct%5Ct%5Ct%5Ct%7D%5Cn%5Ct%5Ct%5Ct%7D%5Cn%5Ct%5Ct%5Ct%5Cn%5Ct%5Ct%5Ct//%20Apply%20contents%20to%20our%20new%20draft.%5Cn%5Ct%5Ct%5CtnewDraft.content%20=%20templateContent;%5Cn%5Ct%5Ct%5Ct%5Cn%5Ct%5Ct%7D%20else%20%7B%5Cn%5Ct%5Ct%5Ctapp.displayInfoMessage(%5C%22Couldn&#39;t%20find%20new%20draft%20template.%5C%22);%5Cn%5Ct%5Ct%7D%5Cn%5Ct%7D%5Cn%5Ct%5Cn%5Ct//%20Open%20draft.%5Ct%5Ct%5Ct%5Cn%5Ctif%20(newDraft%20!=%20null)%20%7B%5Cn%5Ct%5CtnewDraft.update();%5Cn%5Ct%5CtopenDraft(newDraft);%5Cn%5Ct%7D%5Cn%7D%5Cn%22,%22allowAsync%22:%22false%22%7D,%22type%22:%22script%22,%22isEnabled%22:true,%22uuid%22:%2255E9C63A-F131-4F44-8D31-F73372197B95%22%7D],%22backingPlatforms%22:3,%22shortName%22:%22New%20From%20Template%22,%22shouldConfirm%22:false,%22disposition%22:0,%22keyCommand%22:%7B%22optionKey%22:true,%22input%22:%22N%22,%22controlKey%22:true,%22commandKey%22:true,%22type%22:%22action%22,%22discoverabilityTitle%22:%22New%20From%20Template%22,%22shiftKey%22:false%7D,%22logLevel%22:1,%22groupDisposition%22:0,%22notificationType%22:1,%22tintColor%22:%22none%22,%22actionDescription%22:%22Create%20a%20new%20draft%20from%20a%20specified%20template.%20Supports%20[[cross-link]]%20backlinks.%20See%20the%20various%20configurable%20options%20at%20the%20top%20of%20the%20script.%20Requires%20Drafts%2020.1%20or%20later.%5Cn%5CnBy%20Matt%20Gemmell%20%E2%80%94%20@mattgemmell%20%E2%80%94%20https://mattgemmell.com/%22,%22keyUseIcon%22:true,%22icon%22:%22share-alt%22,%22visibility%22:480,%22backingIsSeparator%22:false,%22groupUUID%22:%2239E2821B-F7CA-4A6E-AA47-33C485EF250A%22,%22assignTags%22:[],%22name%22:%22New%20From%20Template%22%7D">Install</a>
</div>

<div>
  <h4>Steps</h4>
<ul class='steps'>
  <li>
    <div class='step'><h3>defineTemplateTag</h3><table class='action-detail'><tr><td class='cell-label'>name</td><td class='value'><pre>newDraftTemplateName</pre></td></tr><tr><td class='cell-label'>template</td><td class='value'><pre>Cross-Linked Draft Template</pre></td></tr></table></div>
  </li>
  <li>
    <div class='step'><h3>script</h3><pre><code class='language-javascript'>/*

Create new drafts via the same template system as my &quot;Open Cross-Link at Cursor&quot; action.

Author: 		Matt Gemmell
Twitter: 	@mattgemmell	https://twitter.com/mattgemmell
Web: 			https://mattgemmell.com/

*/

/* =========================== */
// Configuration
/* =========================== */


var ensureInitialCapitals = true;
/*
If true, newly-created drafts will have their title&#39;s first letter made uppercase if necessary.
*/


var newDraftTemplateName = &quot;&quot;;
/*
Title of an existing draft which will be used as a template when creating new ones.
If the template is not found, a blank draft will be created with the appropriate title.
Use an empty string (&quot;&quot;) to disable the template functionality.

Notes:
	- The new draft&#39;s title — i.e. the template&#39;s first non-blank line — will be replaced appropriately.
	- Any leading hash/pound symbols (i.e. &quot;#&quot;) will be preserved when setting the new title.
	- Drafts template tags will be processed (https://docs.getdrafts.com/docs/actions/templates ).
	- Some custom template tags are available:
	
		- source_display_title is the display title of the source draft which created the new draft.
		- source_uuid is the UUID of the source draft which created the new draft.
		- source_title_link is a preformatted [[backlink]] to the source draft&#39;s display title.
		- source_uuid_link is a preformatted [[u:backlink]] to the source draft&#39;s UUID.
*/


var inheritTagsFromTemplate = true;
/*
If true, any tags which are applied to the template will also be applied to each new draft created from it.
*/


var excludedTags = [&quot;template&quot;];
/*
The tags present in this array will NOT be inherited by new drafts created from the template. Has no effect if inheritTagsFromTemplate (above) is false.
*/


var prependToNewTitles = &quot;&quot;;
/*
A string to prepend to the titles of new pages (but after any leading Markdown headers and whitespace from the template). This string will be processed for Drafts template tags first, in the contetx of the new draft. A useful example for unique identifiers would be: &quot;[[date|%Y%m%d%H%M%S]] &quot;
*/


/* =========================== */
// END of Configuration
/* =========================== */


/* =========================== */
// A few useful functions.
/* =========================== */


function getTitle(theDraft) {
	return theDraft.displayTitle;
}

function openDraft(theDraft) {
	editor.load(theDraft);
	editor.activate();
}


/* =========================== */
// End of functions.
/* =========================== */


// Default to suggesting the selected text as a title.
var createDraft = true;
var draftTitle = &quot;&quot;;
if (draft) {
	var selText = editor.getSelectedText();
	if (selText &amp;&amp; selText.length &gt; 0) {
		draftTitle = selText;
	}
}

// Ask for title of the new draft.
var prompt = Prompt.create();
prompt.isCancellable = true;
prompt.title = &quot;Title of new draft?&quot;;
prompt.addTextField(&quot;titleField&quot;, &quot;&quot;, draftTitle, {&quot;wantsFocus&quot;: true});
prompt.addButton(&quot;Create&quot;);
createDraft = prompt.show();

if (createDraft) {
	var titleFieldContents = prompt.fieldValues[&quot;titleField&quot;].trim();
	if (titleFieldContents &amp;&amp; titleFieldContents.length &gt; 0) {
		draftTitle = titleFieldContents;
	} else {
		createDraft = false;
	}
}

if (createDraft) {
	var newDraft = new Draft();

	// Deal with initial capitals.
	if (ensureInitialCapitals) {
		draftTitle = draftTitle.charAt(0).toUpperCase() + draftTitle.slice(1);
	}
	
	// Deal with prepended title string, if set.
	if (prependToNewTitles.length &gt; 0) {
		draftTitle = newDraft.processTemplate(prependToNewTitles) + draftTitle;
	}

	newDraft.content = &quot;# &quot; + draftTitle + &quot;\n\n&quot;;
	
	// Handle template requirements.
	if (newDraftTemplateName == null || newDraftTemplateName == &quot;&quot;) {
		newDraftTemplateName = draft.getTemplateTag(&quot;newDraftTemplateName&quot;);
	}
	
	if (newDraftTemplateName != null &amp;&amp; newDraftTemplateName != &quot;&quot;) {
		// Attempt to locate template.
		var foundTemplates = Draft.queryByTitle(newDraftTemplateName);
		if (foundTemplates.length &gt; 0) {
			var template = foundTemplates[0];
			var templateContent = template.content;
			
			// Replace title appropriately.
			templateContent = templateContent.replace(template.displayTitle, draftTitle);
			
			// Process template tags.
			newDraft.setTemplateTag(&quot;source_display_title&quot;, draft.displayTitle);
			newDraft.setTemplateTag(&quot;source_uuid&quot;, draft.uuid);
			newDraft.setTemplateTag(&quot;source_title_link&quot;, &quot;\[[&quot; + draft.displayTitle + &quot;]]&quot;);
			newDraft.setTemplateTag(&quot;source_uuid_link&quot;, &quot;\[[u:&quot; + draft.uuid + &quot;]]&quot;);
			templateContent = newDraft.processTemplate(templateContent);
			
			// Transfer tags if appropriate.
			if (inheritTagsFromTemplate) {
				for (tag of template.tags) {
					if (!excludedTags.includes(tag)) {
						newDraft.addTag(tag);
					}
				}
			}
			
			// Apply contents to our new draft.
			newDraft.content = templateContent;
			
		} else {
			app.displayInfoMessage(&quot;Couldn&#39;t find new draft template.&quot;);
		}
	}
	
	// Open draft.			
	if (newDraft != null) {
		newDraft.update();
		openDraft(newDraft);
	}
}
</code></pre></div>
  </li>
</ul>
</div>

<div>
  <h4>Options</h4>
  <ul class="steps">
    <li>
  <table class='action-detail'>
    <tr>
      <td class="cell-label">After Success</td>
      <td class="value">
        Nothing
        
      </td>
    </tr>
    <tr>
      <td class="cell-label">Notification</td>
      <td class="value">Error</td>
    </tr>
    <tr>
      <td class="cell-label">Log Level</td>
      <td class="value">Error</td>
    </tr>
  </table>
</li>
</ul>
</div>

<div class="disclaimer">
  Items available in the Drafts Directory are uploaded by community members. Use appropriate caution reviewing downloaded items before use.
</div>


                  </div>
                  <div class="footer-content">
                  <p>
                  <a href="https://itunes.apple.com/app/id1236254471?ls=1&mt=8&at=11l4Cf&ct=site">
                    <img alt="Download on App Store" src="../assets/appstore-deaf597bd57239c5054c59099e54ab9014f1e15eddb961085428e0ce94d4385b.svg" />
                  </a>
                  <a href="https://itunes.apple.com/app/id1435957248?mt=12&at=11l4Cf&ct=site">
                    <img alt="Download on Mac App Store" src="../assets/macappstore-05f5eed00e6bb26b68c1368217276158329862682e6d61b3ed193f819fe02f2f.svg" />
                  </a>
                  </p>
                    &copy; 2012-2022 by Agile Tortoise, Inc.<br/>
                    Drafts is a registered Trademark of Agile Tortoise, Inc.<br/>
                    <a href="../../getdrafts.com/support/privacy.html">Privacy</a> | <a href="../../getdrafts.com/support/terms.html">Terms</a>
                </div>
                </div>
            </div>
        </div>
    </div>

  </body>
  </html>
