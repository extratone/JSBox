<!DOCTYPE html>
<html lang='en'>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Post Gist to Github | Drafts Directory</title>
    <meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="RJTBJNCcLRiHtihFvD+HuvZDsI7GAEqEE2Kf/hzKaLlJbor51s5Flw0jfHoXCLx+nok5BEbpKKZdLASNl/9xNg==" />
    <meta http-equiv="content-type" content="text/html;charset=utf-8">
    <meta http-equiv="content-language" content="en">
    <meta http-equiv="content-language" content="en-us">
    
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <meta property="og:title" content="Drafts Directory: Post Gist to Github" />
    <meta property="og:url" content="https://directory.getdrafts.com/a/18O" />
    <meta property="og:type" content="website" />
    <meta property="og:description" content="Example actions and other extensions for Drafts, the quick-capture notes app." />
    <meta property="og:image" content="https://directory.getdrafts.com/assets/drafts-ogimage-action-d9c60102fd45e0cb516e1b49ed50a81e3c3a2b90f81f55df8f43d0feb0512978.png" />
    <meta property="twitter:title" content="Drafts Directory: Post Gist to Github" />
    <meta property="twitter:url" content="https://directory.getdrafts.com/a/18O" />
    <meta property="twitter:type" content="website" />
    <meta property="twitter:description" content="Example actions and other extensions for Drafts, the quick-capture notes app." />
    <meta property="twitter:image" content="https://directory.getdrafts.com/assets/drafts-ogimage-action-d9c60102fd45e0cb516e1b49ed50a81e3c3a2b90f81f55df8f43d0feb0512978.png" />

    <link rel="shortcut icon" type="image/x-icon" href="../assets/favicon-114dbb66b0ef0399a14fa5dfcad7e6210bb558c30cea665e04d49b59fec87f70.png" />

    <link rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/styles/default.min.css">
    <link rel="stylesheet" media="all" href="../assets/application-6e4f014b4c48cd673942dbfbbeb3e571a732b05562ddde5904f3a5c3833e54ff.css" />
    <script src="../assets/application-13492939cb10be5be76b5abb3e9ae0bef0bbae3202cec2b85cf6fca5bc8429c8.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/highlight.min.js"></script>
    <script>hljs.highlightAll();</script>
    <script async defer data-domain="directory.getdrafts.com" src="https://plausible.io/js/plausible.js"></script>
  </head>

<body data-no-turbolink>

    <div class="page-wrap">
        <div class="side-bar">
            <a href="../index.html" class="site-title fs-6 lh-tight" title="{{ site.title }}">
                <img src="../assets/drafts-directory-header-4d826bd007f515c8e5a10f654e56ad76fbb3bd3103a67ce342283f701f1677fe.svg" alt="Drafts Directory" style="max-height: 30px;" />
            </a>
            <span class="fs-3"><button class="js-main-nav-trigger navigation-list-toggle btn btn-outline" type="button"
                    data-text-toggle="Hide">Menu</button></span>
            <div class="navigation main-nav js-main-nav">
              <ul class="navigation-list">
                <li class="navigation-list-item">
                  <a class="navigation-list-link" href="../index.html">Home</a>
                </li>
                <li class="navigation-list-item">
                  <a class="navigation-list-link" href="../drafts_actions.html">Actions</a>
                </li>
                <li class="navigation-list-item">
                  <a class="navigation-list-link" href="../drafts_action_groups.html">Action Groups</a>
                </li>
                <li class="navigation-list-item">
                  <a class="navigation-list-link" href="../syntax_definitions.html">Syntaxes</a>
                </li>
                <li class="navigation-list-item">
                  <a class="navigation-list-link" href="../theme_definitions.html">Themes</a>
                </li>
                <li class="navigation-list-item">
                  <a class="navigation-list-link" href="../workspaces.html">Workspaces</a>
                </li>
                <li class="navigation-list-item">
                  <hr style="margin:1em; padding: 0;" />
                </li>
                <li class="navigation-list-item">
                  <a class="navigation-list-link" href="../search.html">Search</a>
                </li>
                <li class="navigation-list-item">
                  <hr style="margin:1em; padding: 0;" />
                </li>
                <li class="navigation-list-item">
                    <a class="navigation-list-link nav-external" title="About Drafts" href="../../getdrafts.com/index.html">Get Drafts &#x2192;</a>
                </li>
                <li class="navigation-list-item">
                    <a class="navigation-list-link nav-external" title="Detailed documentation" href="../../docs.getdrafts.com/index.html">User Guide &#x2192;</a>
                </li>
                <li class="navigation-list-item">
                    <a class="navigation-list-link nav-external" title="Get your questions answered in the forums" href="https://forums.getdrafts.com/">Community &#x2192;</a>
                </li>
                <li class="navigation-list-item">
                    <a class="navigation-list-link nav-external" title="Online tools and generators" href="../../tools.getdrafts.com/index.html">Tools &#x2192;</a>
                </li>
                <li class="navigation-list-item">
                    <a class="navigation-list-link nav-external" title="Scripting library reference" href="../../scripting.getdrafts.com/index.html">Script Reference &#x2192;</a>
                </li>
              </ul>
            </div>
            <footer role="contentinfo" class="site-footer">
                <p class="text-small text-grey-dk-000 mb-0">
                    Download: <a href="https://itunes.apple.com/app/id1236254471?ls=1&mt=8&at=11l4Cf&ct=site">iOS</a> | <a href="https://itunes.apple.com/app/id1435957248?mt=12&at=11l4Cf&ct=site">Mac</a>
                </p>
            </footer>
        </div>
        <div class="main-content-wrap js-main-content" tabindex="0">
            <div class="page-header">
                <div class="main-content">
                    <div class="search js-search">
	<div class="search-input-wrap">
<form class="search-form" action="../search.html" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
	<button style='border:none;background-color:transparent;'>
	<svg width="14" height="14" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg"
		class="search-icon">
		<title>Search</title>
		<g fill-rule="nonzero">
			<path
				d="M17.332 20.735c-5.537 0-10-4.6-10-10.247 0-5.646 4.463-10.247 10-10.247 5.536 0 10 4.601 10 10.247s-4.464 10.247-10 10.247zm0-4c3.3 0 6-2.783 6-6.247 0-3.463-2.7-6.247-6-6.247s-6 2.784-6 6.247c0 3.464 2.7 6.247 6 6.247z" />
			<path d="M11.672 13.791L.192 25.271 3.02 28.1 14.5 16.62z" />
		</g>
	</svg>
	</button>
	<input type="text" name="q" id="q" class="js-search-input search-input search" size="12" tabindex="0" placeholder="Search" />
</form>	</div>
</div>
                    <ul class="list-style-none text-small mt-md-1 mb-md-1 pb-4 pb-md-0 js-aux-nav aux-nav">
                        <li class="d-inline-block my-0 mr-2">
                          <a href="../../getdrafts.com/index.html">Get Drafts</a>
                        </li>
                        <li class="d-inline-block my-0">
                          <a href="https://forums.getdrafts.com">Community</a>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="main-content">
                <div id="main-content" class="page-content" role="main">
                  <div class="type">
                    <h4>Action</h4>
                  </div>
                  <div class="header">
                      <h1><img src="https://config.agiletortoise.com/drafts-icons/488-github.png" class="action-icon" />Post Gist to Github</h1>
                  </div>

                  <div class="content">
                    
<div class='caption'>
        Posted by agiletortoise,
    Last update
    about 2 years ago
</div>


    <div class='description'>
        <p>Post the content of the draft to a Gist on Github. After creating the Gist, you are prompted to either place the URL in the clipboard, or open the Gist in Safari. The URL is also logged in the action log for reference.</p>

<p>When first run, you will be prompt to enter a personal access token for API access. Generate a token a your <a href="https://github.com/settings/tokens">settings page on GitHub.com</a>. The token should have “gist” permissions for this action to work.</p>

<p>Basic configuration options for output content, public/private status can be configured in variables at the beginning of the script.</p>

    </div>

<div class="certification">
  <a class='verified' href='18O.html#' title='Tested'><img style="width:24px;height:24px;vertical-align:middle;" src="../assets/verified-0a462f6fe5d6003d5dc5dd995c0c818a21e3dd5fdb9aaab171c16fb75cbf76f4.svg" /> Tested</a>
  <a class='trusted' href='18O.html#' title='From trusted community member'><img style="width:24px;height:24px;vertical-align:middle;" src="../assets/trusted-c3f95628f768e0a0ed09961d556a8012d1b1be6ae9e6adede683513eec0df814.svg" /> Trusted member</a>
</div>

<div style="margin: 2em 0;">
    <a class="btn btn-blue" href="drafts5://action?identifier=18O&amp;data=%7B%22uuid%22:%225CFA5A26-394E-4167-A8FB-ADD789FFB16A%22,%22steps%22:[%7B%22platforms%22:3,%22data%22:%7B%22script%22:%22/*%20Create%20public%20Gist%20with%20draft%20content%20on%20GitHub%5Cn*.%20When%20first%20run,%20you%20will%20be%20prompted%20for%20a%20personal%20API%20token%5Cn*%20%20Personal%20tokens%20can%20be%20generated%20at:%20https://github.com/settings/tokens%5Cn*%20%20The%20token%20used%20should%20have%20%5C%22gist%5C%22%20scope%20permissions%5Cn*/%5Cn%5Cn//%20BEGIN%20config%5Cnlet%20content%20=%20draft.content;%20//%20content%20of%20the%20Gist%5Cnlet%20fileName%20=%20%5C%22content.md%5C%22;%20//%20file%20name%5Cnlet%20isPublic%20=%20true;%20//%20should%20this%20be%20a%20public%20Gist%5Cn//%20END%20config%20%5Cn%5Cn//%20do%20credential%20auth%20to%20get%20a%20token%20from%20the%20user.%5Cnlet%20auth%20=%20()%20=%5Cu003e%20%7B%5Cn%5Ctlet%20githubPage%20=%20%5C%22https://github.com/settings/tokens%5C%22;%5Cn%5Ctlet%20cred%20=%20Credential.create(%5C%22GitHub%20Gist%5C%22,%20%5C%22Enter%20personal%20access%20token%20for%20the%20GitHub%20API%20generated%20from%20your%20developer%20page%20at%20GitHub.com%20(https://github.com/settings/tokens).%20This%20token%20should%20have%20permissions%20for%20the%20scope%20%5C%5C%5C%22gist%5C%5C%5C%22%20to%20allow%20creation%20of%20Gists.%5C%22);%5Cn%5Ct%5Cn%5Ctcred.addTextField(%5C%22Token%5C%22,%20%5C%22%5C%22);%5Cn%5Ctif%20(cred.authorize())%20%7B%5Cn%5Ct%5Ctreturn%20cred.getValue(%5C%22Token%5C%22);%5Cn%5Ct%7D%5Cn%5Ctelse%20%7B%5Cn%5Ct%5Ctreturn%20false%5Cn%5Ct%7D%5Cn%7D%5Cn%5Cn//%20%5Cnlet%20token%20=%20auth();%5Cnif%20(token)%20%7B%5Cn%5Ctlet%20http%20=%20HTTP.create();%5Cn%5Cn%5Ctlet%20data%20=%20%7B%5Cn%5Ct%20%20%5C%22description%5C%22:%20%5C%22Gist%20from%20Drafts%5C%22,%5Cn%5Ct%20%20%5C%22public%5C%22:%20isPublic,%5Cn%5Ct%20%20%5C%22files%5C%22:%20%7B%20%7D%20%20%5Cn%5Ct%7D;%5Cn%5Ctdata[%5C%22files%5C%22][fileName]%20=%20%7B%5Cn%5Ct%5Ct%5C%22content%5C%22:%20content%5Cn%5Ct%7D%5Cn%5Cn%5Ctlet%20settings%20=%20%7B%5Cn%5Ct%20%20%5C%22url%5C%22:%20%5C%22https://api.github.com/gists%5C%22,%5Cn%5Ct%20%20%5C%22method%5C%22:%20%5C%22POST%5C%22,%5Cn%5Ct%20%20%5C%22headers%5C%22:%20%7B%5C%22Authorization%5C%22:%20%60Bearer%20$%7Btoken%7D%60%7D,%5Cn%5Ct%20%20%5C%22data%5C%22:%20data%5Cn%5Ct%7D;%5Cn%5Cn%5Ctlet%20response%20=%20http.request(settings);%5Cn%5Ctif%20(response.statusCode%20==%20201)%20%7B%5Cn%5Ct%5Ctlet%20responseData%20=%20JSON.parse(response.responseText);%5Cn%5Ct%5Ctlet%20gistURL%20=%20responseData.html_url;%5Cn%5Cn%5Ct%5Ctconsole.log(responseData);%5Cn%5Ct%5Ctconsole.log(gistURL);%5Cn%5Ct%5Ctconsole.log(%5C%22Gist%20created%5C%22);%5Cn%5Ct%5Ctapp.setClipboard(gistURL);%5Cn%5Cn%5Ct%5Ctlet%20p%20=%20Prompt.create();%5Cn%5Ct%5Ctp.title%20=%20%5C%22Gist%20created%5C%22%5Cn%5Ct%5Ctp.message%20=%20%5C%22Gist%20created%20and%20url%20placed%20in%20the%20clipboard.%5C%22%5Cn%5Ct%5Ctp.addButton(%5C%22Open%20in%20Safari%5C%22);%5Cn%5Cn%5Ct%5Ctif%20(p.show())%20%7B%5Cn%5Ct%5Ct%20%20if%20(p.buttonPressed%20==%20%5C%22Open%20in%20Safari%5C%22)%20%7B%5Cn%5Ct%5Ct%20%20%20%20app.openURL(gistURL);%5Cn%5Ct%5Ct%20%20%7D%5Cn%5Ct%5Ct%7D%5Cn%5Ct%7D%5Cn%5Ctelse%20%7B%5Cn%5Ct%5Ctconsole.log(response.statusCode);%5Cn%5Ct%5Ctcontext.fail();%5Cn%5Ct%7D%5Cn%7D%5Cnelse%20%7B%5Cn%5Ctcontext.cancel();%5Cn%7D%5Cn%5Cn%22,%22allowAsync%22:%22false%22%7D,%22type%22:%22script%22,%22isEnabled%22:true,%22uuid%22:%221A83E1F6-0BBA-434F-82B0-B997A84AC330%22%7D],%22groupDisposition%22:0,%22shortName%22:%22Gist%22,%22shouldConfirm%22:false,%22disposition%22:0,%22keyCommand%22:%7B%22optionKey%22:false,%22input%22:%22%22,%22controlKey%22:false,%22commandKey%22:false,%22type%22:%22action%22,%22discoverabilityTitle%22:%22Post%20Gist%20to%20Github%22,%22shiftKey%22:false%7D,%22logLevel%22:2,%22notificationType%22:2,%22tintColor%22:%22gray%22,%22actionDescription%22:%22Post%20the%20content%20of%20the%20draft%20to%20a%20Gist%20on%20Github.%20After%20creating%20the%20Gist,%20you%20are%20prompted%20to%20either%20place%20the%20URL%20in%20the%20clipboard,%20or%20open%20the%20Gist%20in%20Safari.%20The%20URL%20is%20also%20logged%20in%20the%20action%20log%20for%20reference.%5Cn%5CnWhen%20first%20run,%20you%20will%20be%20prompt%20to%20enter%20a%20personal%20access%20token%20for%20API%20access.%20Generate%20a%20token%20a%20your%20[settings%20page%20on%20GitHub.com](https://github.com/settings/tokens).%20The%20token%20should%20have%20%E2%80%9Cgist%E2%80%9D%20permissions%20for%20this%20action%20to%20work.%5Cn%5CnBasic%20configuration%20options%20for%20output%20content,%20public/private%20status%20can%20be%20configured%20in%20variables%20at%20the%20beginning%20of%20the%20script.%22,%22keyUseIcon%22:true,%22icon%22:%22488-github%22,%22visibility%22:480,%22groupUUID%22:%2238577D7C-7990-44B1-8072-631961910600%22,%22assignTags%22:[],%22name%22:%22Post%20Gist%20to%20Github%22%7D">Install</a>
</div>

<div>
  <h4>Steps</h4>
<ul class='steps'>
  <li>
    <div class='step'><h3>script</h3><pre><code class='language-javascript'>/* Create public Gist with draft content on GitHub
*. When first run, you will be prompted for a personal API token
*  Personal tokens can be generated at: https://github.com/settings/tokens
*  The token used should have &quot;gist&quot; scope permissions
*/

// BEGIN config
let content = draft.content; // content of the Gist
let fileName = &quot;content.md&quot;; // file name
let isPublic = true; // should this be a public Gist
// END config 

// do credential auth to get a token from the user.
let auth = () =&gt; {
	let githubPage = &quot;https://github.com/settings/tokens&quot;;
	let cred = Credential.create(&quot;GitHub Gist&quot;, &quot;Enter personal access token for the GitHub API generated from your developer page at GitHub.com (https://github.com/settings/tokens). This token should have permissions for the scope \&quot;gist\&quot; to allow creation of Gists.&quot;);
	
	cred.addTextField(&quot;Token&quot;, &quot;&quot;);
	if (cred.authorize()) {
		return cred.getValue(&quot;Token&quot;);
	}
	else {
		return false
	}
}

// 
let token = auth();
if (token) {
	let http = HTTP.create();

	let data = {
	  &quot;description&quot;: &quot;Gist from Drafts&quot;,
	  &quot;public&quot;: isPublic,
	  &quot;files&quot;: { }  
	};
	data[&quot;files&quot;][fileName] = {
		&quot;content&quot;: content
	}

	let settings = {
	  &quot;url&quot;: &quot;https://api.github.com/gists&quot;,
	  &quot;method&quot;: &quot;POST&quot;,
	  &quot;headers&quot;: {&quot;Authorization&quot;: `Bearer ${token}`},
	  &quot;data&quot;: data
	};

	let response = http.request(settings);
	if (response.statusCode == 201) {
		let responseData = JSON.parse(response.responseText);
		let gistURL = responseData.html_url;

		console.log(responseData);
		console.log(gistURL);
		console.log(&quot;Gist created&quot;);
		app.setClipboard(gistURL);

		let p = Prompt.create();
		p.title = &quot;Gist created&quot;
		p.message = &quot;Gist created and url placed in the clipboard.&quot;
		p.addButton(&quot;Open in Safari&quot;);

		if (p.show()) {
		  if (p.buttonPressed == &quot;Open in Safari&quot;) {
		    app.openURL(gistURL);
		  }
		}
	}
	else {
		console.log(response.statusCode);
		context.fail();
	}
}
else {
	context.cancel();
}

</code></pre></div>
  </li>
</ul>
</div>

<div>
  <h4>Options</h4>
  <ul class="steps">
    <li>
  <table class='action-detail'>
    <tr>
      <td class="cell-label">After Success</td>
      <td class="value">
        Nothing
        
      </td>
    </tr>
    <tr>
      <td class="cell-label">Notification</td>
      <td class="value">Info</td>
    </tr>
    <tr>
      <td class="cell-label">Log Level</td>
      <td class="value">Info</td>
    </tr>
  </table>
</li>
</ul>
</div>

<div class="disclaimer">
  Items available in the Drafts Directory are uploaded by community members. Use appropriate caution reviewing downloaded items before use.
</div>


                  </div>
                  <div class="footer-content">
                  <p>
                  <a href="https://itunes.apple.com/app/id1236254471?ls=1&mt=8&at=11l4Cf&ct=site">
                    <img alt="Download on App Store" src="../assets/appstore-deaf597bd57239c5054c59099e54ab9014f1e15eddb961085428e0ce94d4385b.svg" />
                  </a>
                  <a href="https://itunes.apple.com/app/id1435957248?mt=12&at=11l4Cf&ct=site">
                    <img alt="Download on Mac App Store" src="../assets/macappstore-05f5eed00e6bb26b68c1368217276158329862682e6d61b3ed193f819fe02f2f.svg" />
                  </a>
                  </p>
                    &copy; 2012-2022 by Agile Tortoise, Inc.<br/>
                    Drafts is a registered Trademark of Agile Tortoise, Inc.<br/>
                    <a href="../../getdrafts.com/support/privacy.html">Privacy</a> | <a href="../../getdrafts.com/support/terms.html">Terms</a>
                </div>
                </div>
            </div>
        </div>
    </div>

  </body>
  </html>
